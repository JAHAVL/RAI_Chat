2025-04-23 02:08:41,319 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:08:41,319 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:08:41,319 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:08:41,347 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:08:46,354 - core.database.connection - INFO - Attempting to connect to database (attempt 2/5)
2025-04-23 02:08:46,358 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:08:51,368 - core.database.connection - INFO - Attempting to connect to database (attempt 3/5)
2025-04-23 02:08:51,371 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:08:56,378 - core.database.connection - INFO - Attempting to connect to database (attempt 4/5)
2025-04-23 02:08:56,383 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:09:01,391 - core.database.connection - INFO - Attempting to connect to database (attempt 5/5)
2025-04-23 02:09:01,395 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:09:06,405 - core.database.connection - ERROR - Failed to connect to database after 5 attempts. Last error: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-23 02:09:06,406 - core.database.connection - WARNING - Falling back to SQLite database for temporary operation
2025-04-23 02:09:06,422 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:09:06,442 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:09:06,450 - core.database.connection - ERROR - Error creating default user: cannot import name 'get_db' from partially initialized module 'core.database.connection' (most likely due to a circular import) (/app/core/database/connection.py)
2025-04-23 02:09:06,464 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 02:09:06,465 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:09:06,474 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 02:09:06,474 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 02:09:06,474 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 02:09:06,474 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 02:09:06,474 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 02:09:06,474 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 02:09:06,474 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 02:09:06,474 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 02:09:06,483 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 02:09:06,483 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 02:09:06,483 - components.action_handler - INFO - Web search functionality is available
2025-04-23 02:09:06,484 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 02:09:06,484 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 02:09:06,484 - app - INFO - Chat blueprint registered successfully
2025-04-23 02:09:06,486 - app - ERROR - Error registering blueprints: No module named 'api.core'
Traceback (most recent call last):
  File "/app/app.py", line 99, in register_blueprints
    import api.endpoints.session
  File "/app/api/endpoints/session.py", line 24, in <module>
    from ..core.auth.utils import token_required
ModuleNotFoundError: No module named 'api.core'
2025-04-23 02:09:06,492 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:11:00,974 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:11:00,975 - api.endpoints.auth - ERROR - Error registering user: 'AuthService' object has no attribute 'register'
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    result = auth_service.register(db, username, password, email)
AttributeError: 'AuthService' object has no attribute 'register'
2025-04-23 02:18:00,052 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:18:00,052 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:18:00,053 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:18:00,085 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:18:05,090 - core.database.connection - INFO - Attempting to connect to database (attempt 2/5)
2025-04-23 02:18:05,100 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:18:10,110 - core.database.connection - INFO - Attempting to connect to database (attempt 3/5)
2025-04-23 02:18:10,117 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:18:15,123 - core.database.connection - INFO - Attempting to connect to database (attempt 4/5)
2025-04-23 02:18:15,129 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:18:20,140 - core.database.connection - INFO - Attempting to connect to database (attempt 5/5)
2025-04-23 02:18:20,146 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:18:25,157 - core.database.connection - ERROR - Failed to connect to database after 5 attempts. Last error: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-23 02:18:25,158 - core.database.connection - WARNING - Falling back to SQLite database for temporary operation
2025-04-23 02:18:25,174 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:18:25,179 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:18:25,197 - core.database.connection - ERROR - Error creating default user: cannot import name 'get_db' from partially initialized module 'core.database.connection' (most likely due to a circular import) (/app/core/database/connection.py)
2025-04-23 02:18:25,213 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:18:25,216 - app - ERROR - Error registering blueprints: No module named 'managers.session'
Traceback (most recent call last):
  File "/app/app.py", line 95, in register_blueprints
    import api.endpoints.chat
  File "/app/api/endpoints/chat.py", line 30, in <module>
    from managers.session import get_user_session_manager
ModuleNotFoundError: No module named 'managers.session'
2025-04-23 02:18:25,223 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:20:50,578 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:20:50,787 - core.auth.strategies - INFO - Successfully registered new user: testuser
2025-04-23 02:20:50,788 - api.endpoints.auth - ERROR - Error registering user: You must have the config attribute orm_mode=True to use from_orm
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    user = auth_service.register_user(user_data)
  File "/app/core/auth/service.py", line 70, in register_user
    return UserSchema.from_orm(user)
  File "/usr/local/lib/python3.10/site-packages/pydantic/main.py", line 574, in from_orm
    raise ConfigError('You must have the config attribute orm_mode=True to use from_orm')
pydantic.errors.ConfigError: You must have the config attribute orm_mode=True to use from_orm
2025-04-23 02:23:38,110 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:23:38,110 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:23:38,110 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:23:38,137 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:23:43,143 - core.database.connection - INFO - Attempting to connect to database (attempt 2/5)
2025-04-23 02:23:43,149 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:23:48,156 - core.database.connection - INFO - Attempting to connect to database (attempt 3/5)
2025-04-23 02:23:48,166 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:23:53,174 - core.database.connection - INFO - Attempting to connect to database (attempt 4/5)
2025-04-23 02:23:53,183 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:23:58,190 - core.database.connection - INFO - Attempting to connect to database (attempt 5/5)
2025-04-23 02:23:58,196 - core.database.connection - WARNING - Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8). Retrying in 5 seconds...
2025-04-23 02:24:03,201 - core.database.connection - ERROR - Failed to connect to database after 5 attempts. Last error: (pymysql.err.OperationalError) (1045, "Access denied for user 'rai_user'@'172.23.0.4' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-23 02:24:03,201 - core.database.connection - WARNING - Falling back to SQLite database for temporary operation
2025-04-23 02:24:03,216 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:24:03,219 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:24:03,228 - core.database.connection - INFO - Default user already exists.
2025-04-23 02:24:03,245 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:24:03,247 - app - ERROR - Error registering blueprints: No module named 'managers.session'
Traceback (most recent call last):
  File "/app/app.py", line 95, in register_blueprints
    import api.endpoints.chat
  File "/app/api/endpoints/chat.py", line 30, in <module>
    from managers.session import get_user_session_manager
ModuleNotFoundError: No module named 'managers.session'
2025-04-23 02:24:03,251 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:27:53,626 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:27:53,626 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:27:53,626 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:27:53,651 - core.database.connection - INFO - Database connection successful!
2025-04-23 02:27:53,651 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:27:53,683 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:27:53,689 - core.database.connection - ERROR - Error creating default user: cannot import name 'get_db' from partially initialized module 'core.database.connection' (most likely due to a circular import) (/app/core/database/connection.py)
2025-04-23 02:27:53,704 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:27:53,714 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 02:27:53,714 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 02:27:53,714 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 02:27:53,714 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 02:27:53,714 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 02:27:53,715 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 02:27:53,715 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 02:27:53,715 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 02:27:53,723 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 02:27:53,723 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 02:27:53,723 - components.action_handler - INFO - Web search functionality is available
2025-04-23 02:27:53,723 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 02:27:53,724 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 02:27:53,724 - app - INFO - Chat blueprint registered successfully
2025-04-23 02:27:53,727 - app - INFO - Session blueprint registered successfully
2025-04-23 02:27:53,728 - app - INFO - Memory blueprint registered successfully
2025-04-23 02:27:53,729 - app - INFO - System Messages blueprint registered successfully
2025-04-23 02:27:53,730 - app - INFO - Basic endpoints registered successfully
2025-04-23 02:27:53,733 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:28:27,674 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:28:27,894 - core.auth.strategies - INFO - Successfully registered new user: testuser
2025-04-23 02:28:27,895 - api.endpoints.auth - ERROR - Error registering user: 'UserSchema' object has no attribute 'id'
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 67, in register_user
    'user_id': user.id,
AttributeError: 'UserSchema' object has no attribute 'id'
2025-04-23 02:30:38,845 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:30:38,845 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:30:38,845 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:30:38,858 - core.database.connection - INFO - Database connection successful!
2025-04-23 02:30:38,858 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:30:38,861 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:30:38,865 - core.database.connection - INFO - Default user already exists.
2025-04-23 02:30:38,879 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:30:38,890 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 02:30:38,890 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 02:30:38,890 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 02:30:38,890 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 02:30:38,891 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 02:30:38,891 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 02:30:38,891 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 02:30:38,891 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 02:30:38,895 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 02:30:38,896 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 02:30:38,896 - components.action_handler - INFO - Web search functionality is available
2025-04-23 02:30:38,896 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 02:30:38,896 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 02:30:38,897 - app - INFO - Chat blueprint registered successfully
2025-04-23 02:30:38,898 - app - INFO - Session blueprint registered successfully
2025-04-23 02:30:38,899 - app - INFO - Memory blueprint registered successfully
2025-04-23 02:30:38,900 - app - INFO - System Messages blueprint registered successfully
2025-04-23 02:30:38,901 - app - INFO - Basic endpoints registered successfully
2025-04-23 02:30:38,905 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:30:47,380 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:30:47,625 - core.auth.strategies - INFO - Successfully registered new user: testuser2
2025-04-23 02:30:47,626 - api.endpoints.auth - ERROR - Error registering user: generate_token() missing 1 required positional argument: 'username'
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 68, in register_user
    'token': generate_token(user.user_id)
TypeError: generate_token() missing 1 required positional argument: 'username'
2025-04-23 02:31:39,498 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:31:39,498 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:31:39,499 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:31:39,511 - core.database.connection - INFO - Database connection successful!
2025-04-23 02:31:39,511 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:31:39,513 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:31:39,517 - core.database.connection - INFO - Default user already exists.
2025-04-23 02:31:39,530 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:31:39,541 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 02:31:39,541 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 02:31:39,541 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 02:31:39,541 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 02:31:39,542 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 02:31:39,542 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 02:31:39,542 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 02:31:39,542 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 02:31:39,546 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 02:31:39,546 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 02:31:39,547 - components.action_handler - INFO - Web search functionality is available
2025-04-23 02:31:39,547 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 02:31:39,547 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 02:31:39,548 - app - INFO - Chat blueprint registered successfully
2025-04-23 02:31:39,549 - app - INFO - Session blueprint registered successfully
2025-04-23 02:31:39,550 - app - INFO - Memory blueprint registered successfully
2025-04-23 02:31:39,551 - app - INFO - System Messages blueprint registered successfully
2025-04-23 02:31:39,552 - app - INFO - Basic endpoints registered successfully
2025-04-23 02:31:39,556 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:32:33,546 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:32:33,764 - core.auth.strategies - INFO - Successfully registered new user: testuser3
2025-04-23 02:32:33,766 - api.endpoints.auth - INFO - User testuser3 registered successfully
2025-04-23 02:33:49,184 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:33:49,185 - api.endpoints.auth - ERROR - Error logging in user: 'AuthService' object has no attribute 'login'
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 105, in login_user
    result = auth_service.login(db, username, password)
AttributeError: 'AuthService' object has no attribute 'login'
2025-04-23 02:47:05,227 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:47:05,227 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:47:05,227 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:47:05,240 - core.database.connection - INFO - Database connection successful!
2025-04-23 02:47:05,241 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:47:05,242 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:47:05,246 - core.database.connection - INFO - Default user already exists.
2025-04-23 02:47:05,260 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:47:05,269 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 02:47:05,269 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 02:47:05,269 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 02:47:05,269 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 02:47:05,269 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 02:47:05,269 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 02:47:05,270 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 02:47:05,270 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 02:47:05,274 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 02:47:05,274 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 02:47:05,274 - components.action_handler - INFO - Web search functionality is available
2025-04-23 02:47:05,275 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 02:47:05,275 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 02:47:05,275 - app - INFO - Chat blueprint registered successfully
2025-04-23 02:47:05,276 - app - INFO - Session blueprint registered successfully
2025-04-23 02:47:05,277 - app - INFO - Memory blueprint registered successfully
2025-04-23 02:47:05,278 - app - INFO - System Messages blueprint registered successfully
2025-04-23 02:47:05,278 - app - INFO - Basic endpoints registered successfully
2025-04-23 02:47:05,282 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:47:31,172 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:47:31,176 - core.auth.strategies - ERROR - Error during local authentication: argument 'hashed_password': 'str' object cannot be converted to 'PyBytes'
2025-04-23 02:47:31,177 - api.endpoints.auth - WARNING - Login failed for user testuser3
2025-04-23 02:48:33,712 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:48:33,712 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:48:33,712 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:48:33,725 - core.database.connection - INFO - Database connection successful!
2025-04-23 02:48:33,726 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:48:33,728 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:48:33,732 - core.database.connection - INFO - Default user already exists.
2025-04-23 02:48:33,748 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:48:33,759 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 02:48:33,759 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 02:48:33,759 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 02:48:33,759 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 02:48:33,759 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 02:48:33,759 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 02:48:33,760 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 02:48:33,760 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 02:48:33,764 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 02:48:33,764 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 02:48:33,764 - components.action_handler - INFO - Web search functionality is available
2025-04-23 02:48:33,765 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 02:48:33,765 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 02:48:33,765 - app - INFO - Chat blueprint registered successfully
2025-04-23 02:48:33,767 - app - INFO - Session blueprint registered successfully
2025-04-23 02:48:33,767 - app - INFO - Memory blueprint registered successfully
2025-04-23 02:48:33,768 - app - INFO - System Messages blueprint registered successfully
2025-04-23 02:48:33,769 - app - INFO - Basic endpoints registered successfully
2025-04-23 02:48:33,774 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:49:38,777 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:49:38,997 - core.auth.strategies - INFO - Authentication successful for user: testuser3
2025-04-23 02:49:38,999 - api.endpoints.auth - INFO - User testuser3 logged in successfully
2025-04-23 02:49:53,615 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:49:53,828 - core.auth.strategies - INFO - Authentication successful for user: testuser3
2025-04-23 02:49:53,830 - api.endpoints.auth - INFO - User testuser3 logged in successfully
2025-04-23 02:49:53,840 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 02:49:53,841 - api.endpoints.chat - INFO - Received chat message from user 1: Hello RAI!...
2025-04-23 02:49:53,841 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 02:49:53,842 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 02:49:53,842 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 02:49:53,843 - managers.user_session_manager - INFO - Created new session ID: 5ebd3b3d-458d-43e2-aaca-3977136bed63 for user: 1
2025-04-23 02:49:53,843 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 5ebd3b3d-458d-43e2-aaca-3977136bed63
2025-04-23 02:49:53,844 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 02:49:53,845 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 02:49:53,845 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 02:49:53,846 - CtxMemMgr_User1 - ERROR - Error initializing LLM API client: No module named 'llm_Engine'
2025-04-23 02:49:53,847 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:49:53,848 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 02:49:53,848 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 02:49:53,848 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 02:49:53,848 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 02:49:53,848 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 5ebd3b3d-458d-43e2-aaca-3977136bed63
2025-04-23 02:49:53,848 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 02:49:53,849 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 02:49:53,849 - api.endpoints.chat - ERROR - Error processing chat request: 'ConversationManager' object has no attribute 'load_chat'
2025-04-23 02:51:13,771 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:51:13,771 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:51:13,771 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:51:13,784 - core.database.connection - INFO - Database connection successful!
2025-04-23 02:51:13,784 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:51:13,786 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:51:13,790 - core.database.connection - INFO - Default user already exists.
2025-04-23 02:51:13,805 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:51:13,816 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 02:51:13,816 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 02:51:13,816 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 02:51:13,816 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 02:51:13,816 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 02:51:13,816 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 02:51:13,816 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 02:51:13,816 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 02:51:13,821 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 02:51:13,821 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 02:51:13,821 - components.action_handler - INFO - Web search functionality is available
2025-04-23 02:51:13,821 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 02:51:13,821 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 02:51:13,822 - app - INFO - Chat blueprint registered successfully
2025-04-23 02:51:13,823 - app - INFO - Session blueprint registered successfully
2025-04-23 02:51:13,824 - app - INFO - Memory blueprint registered successfully
2025-04-23 02:51:13,825 - app - INFO - System Messages blueprint registered successfully
2025-04-23 02:51:13,825 - app - INFO - Basic endpoints registered successfully
2025-04-23 02:51:13,830 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:51:26,357 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:51:26,599 - core.auth.strategies - INFO - Authentication successful for user: testuser3
2025-04-23 02:51:26,601 - api.endpoints.auth - INFO - User testuser3 logged in successfully
2025-04-23 02:51:26,611 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 02:51:26,612 - api.endpoints.chat - INFO - Received chat message from user 1: Hello RAI!...
2025-04-23 02:51:26,612 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 02:51:26,612 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 02:51:26,612 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 02:51:26,612 - managers.user_session_manager - INFO - Created new session ID: 5ed1931f-bad0-40ba-a8ea-75cb297bb22b for user: 1
2025-04-23 02:51:26,612 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 5ed1931f-bad0-40ba-a8ea-75cb297bb22b
2025-04-23 02:51:26,613 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 02:51:26,613 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 02:51:26,613 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 02:51:26,614 - CtxMemMgr_User1 - ERROR - Error initializing LLM API client: No module named 'llm_Engine'
2025-04-23 02:51:26,615 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:51:26,616 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 02:51:26,616 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 02:51:26,616 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 02:51:26,616 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 02:51:26,616 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 5ed1931f-bad0-40ba-a8ea-75cb297bb22b
2025-04-23 02:51:26,616 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 02:51:26,617 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 02:51:26,618 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:51:26,618 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 02:51:26,618 - components.prompt_builder - INFO - Constructing prompt for session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b, user 1, depth 0
2025-04-23 02:51:26,618 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 02:51:26,618 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Hello RAI!'
2025-04-23 02:51:26,618 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 02:51:26,618 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 02:51:26,618 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 02:51:26,618 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 02:51:26,620 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:51:26,621 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 02:51:28,610 - CtxMemMgr_User1 - INFO - Loading session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b for processing assistant message
2025-04-23 02:51:28,612 - CtxMemMgr_User1 - INFO - Loading session context for 5ed1931f-bad0-40ba-a8ea-75cb297bb22b from /app/data/sessions/1/5ed1931f-bad0-40ba-a8ea-75cb297bb22b/context.json
2025-04-23 02:51:28,612 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/5ed1931f-bad0-40ba-a8ea-75cb297bb22b/context.json not found. Initializing empty context for new session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b.
2025-04-23 02:51:28,612 - CtxMemMgr_User1 - INFO - Stored turn 00a63706-bdac-49c1-8557-95714d68701c for active session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b
2025-04-23 02:51:28,613 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b: '...'
2025-04-23 02:51:28,614 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 02:51:28,615 - CtxMemMgr_User1 - INFO - Session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b: Active history token count ~2 / 30000
2025-04-23 02:51:28,615 - CtxMemMgr_User1 - INFO - Saving active session context for 5ed1931f-bad0-40ba-a8ea-75cb297bb22b to /app/data/sessions/1/5ed1931f-bad0-40ba-a8ea-75cb297bb22b/context.json
2025-04-23 02:51:28,618 - CtxMemMgr_User1 - INFO - Successfully saved context for session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b
2025-04-23 02:51:28,618 - ActionHandler_User1 - INFO - Processing LLM response for session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b, user 1
2025-04-23 02:51:28,618 - ActionHandler_User1 - INFO - Extracted tier3_response (first 50 chars): ```json
{
  "user_message_analysis": {
    "timest...
2025-04-23 02:51:28,619 - ActionHandler_User1 - ERROR - !!! EXCEPTION during LLM response processing in ActionHandler: local variable 're' referenced before assignment !!!
Traceback (most recent call last):
  File "/app/components/action_handler.py", line 241, in process_llm_response
    fetch_match = re.search(r"\[FETCH_EPISODE:\s*([\w\-]+)\s*\]", tier3_response)
UnboundLocalError: local variable 're' referenced before assignment
2025-04-23 02:51:28,621 - CtxMemMgr_User1 - INFO - Stored turn c048de95-e6fe-48a5-9116-e22278b90b97 for active session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b
2025-04-23 02:51:28,621 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b: '...'
2025-04-23 02:51:28,621 - CtxMemMgr_User1 - WARNING - No suitable LLM API method found for chat completion
2025-04-23 02:51:28,622 - CtxMemMgr_User1 - WARNING - Memory extraction response was not valid JSON: Memory extraction failed - no API method available
2025-04-23 02:51:28,622 - CtxMemMgr_User1 - INFO - Session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b: Active history token count ~157 / 30000
2025-04-23 02:51:28,622 - CtxMemMgr_User1 - INFO - Saving active session context for 5ed1931f-bad0-40ba-a8ea-75cb297bb22b to /app/data/sessions/1/5ed1931f-bad0-40ba-a8ea-75cb297bb22b/context.json
2025-04-23 02:51:28,624 - CtxMemMgr_User1 - INFO - Successfully saved context for session 5ed1931f-bad0-40ba-a8ea-75cb297bb22b
2025-04-23 02:53:47,795 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:53:47,795 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:53:47,795 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:53:47,810 - core.database.connection - INFO - Database connection successful!
2025-04-23 02:53:47,810 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:53:47,812 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:53:47,817 - core.database.connection - INFO - Default user already exists.
2025-04-23 02:53:47,830 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:53:47,849 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 02:53:47,849 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 02:53:47,850 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 02:53:47,850 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 02:53:47,850 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 02:53:47,850 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 02:53:47,850 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 02:53:47,850 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 02:53:47,855 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 02:53:47,855 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 02:53:47,855 - components.action_handler - INFO - Web search functionality is available
2025-04-23 02:53:47,856 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 02:53:47,856 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 02:53:47,856 - app - INFO - Chat blueprint registered successfully
2025-04-23 02:53:47,858 - app - INFO - Session blueprint registered successfully
2025-04-23 02:53:47,858 - app - INFO - Memory blueprint registered successfully
2025-04-23 02:53:47,859 - app - INFO - System Messages blueprint registered successfully
2025-04-23 02:53:47,860 - app - INFO - Basic endpoints registered successfully
2025-04-23 02:53:47,864 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:54:03,126 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:54:03,354 - core.auth.strategies - INFO - Authentication successful for user: testuser3
2025-04-23 02:54:03,357 - api.endpoints.auth - INFO - User testuser3 logged in successfully
2025-04-23 02:54:03,367 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 02:54:03,368 - api.endpoints.chat - INFO - Received chat message from user 1: Tell me about RAI...
2025-04-23 02:54:03,368 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 02:54:03,368 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 02:54:03,368 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 02:54:03,368 - managers.user_session_manager - INFO - Created new session ID: f86134c4-c337-43cd-b1e4-77c2743d3d62 for user: 1
2025-04-23 02:54:03,368 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: f86134c4-c337-43cd-b1e4-77c2743d3d62
2025-04-23 02:54:03,369 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 02:54:03,369 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 02:54:03,369 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 02:54:03,369 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 02:54:03,371 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:54:03,371 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 02:54:03,371 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 02:54:03,371 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 02:54:03,372 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 02:54:03,372 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: f86134c4-c337-43cd-b1e4-77c2743d3d62
2025-04-23 02:54:03,372 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 02:54:03,372 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 02:54:03,373 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:54:03,373 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 02:54:03,373 - components.prompt_builder - INFO - Constructing prompt for session f86134c4-c337-43cd-b1e4-77c2743d3d62, user 1, depth 0
2025-04-23 02:54:03,374 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 02:54:03,374 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Tell me about RAI'
2025-04-23 02:54:03,374 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 02:54:03,374 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 02:54:03,374 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 02:54:03,374 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 02:54:03,376 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:54:03,376 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 02:54:05,364 - CtxMemMgr_User1 - INFO - Loading session f86134c4-c337-43cd-b1e4-77c2743d3d62 for processing assistant message
2025-04-23 02:54:05,365 - CtxMemMgr_User1 - INFO - Loading session context for f86134c4-c337-43cd-b1e4-77c2743d3d62 from /app/data/sessions/1/f86134c4-c337-43cd-b1e4-77c2743d3d62/context.json
2025-04-23 02:54:05,366 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/f86134c4-c337-43cd-b1e4-77c2743d3d62/context.json not found. Initializing empty context for new session f86134c4-c337-43cd-b1e4-77c2743d3d62.
2025-04-23 02:54:05,366 - CtxMemMgr_User1 - INFO - Stored turn 4be102b9-5649-46e9-93e4-093827d61238 for active session f86134c4-c337-43cd-b1e4-77c2743d3d62
2025-04-23 02:54:05,367 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session f86134c4-c337-43cd-b1e4-77c2743d3d62: '...'
2025-04-23 02:54:05,369 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 02:54:05,369 - CtxMemMgr_User1 - INFO - Session f86134c4-c337-43cd-b1e4-77c2743d3d62: Active history token count ~4 / 30000
2025-04-23 02:54:05,370 - CtxMemMgr_User1 - INFO - Saving active session context for f86134c4-c337-43cd-b1e4-77c2743d3d62 to /app/data/sessions/1/f86134c4-c337-43cd-b1e4-77c2743d3d62/context.json
2025-04-23 02:54:05,374 - CtxMemMgr_User1 - INFO - Successfully saved context for session f86134c4-c337-43cd-b1e4-77c2743d3d62
2025-04-23 02:54:05,374 - ActionHandler_User1 - INFO - Processing LLM response for session f86134c4-c337-43cd-b1e4-77c2743d3d62, user 1
2025-04-23 02:54:05,375 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session f86134c4-c337-43cd-b1e4-77c2743d3d62.
2025-04-23 02:54:05,375 - CtxMemMgr_User1 - INFO - Stored turn b85a50c3-eb5f-4f2d-aec3-ce4e14520276 for active session f86134c4-c337-43cd-b1e4-77c2743d3d62
2025-04-23 02:54:05,376 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session f86134c4-c337-43cd-b1e4-77c2743d3d62: '...'
2025-04-23 02:54:05,376 - CtxMemMgr_User1 - ERROR - Error in chat_completion: LLMAPIClient.chat_completion() got an unexpected keyword argument 'temperature'
2025-04-23 02:54:05,376 - CtxMemMgr_User1 - WARNING - Memory extraction response was not valid JSON: Error: LLMAPIClient.chat_completion() got an unexpected keyword argument 'temperature'
2025-04-23 02:54:05,377 - CtxMemMgr_User1 - INFO - Session f86134c4-c337-43cd-b1e4-77c2743d3d62: Active history token count ~228 / 30000
2025-04-23 02:54:05,377 - CtxMemMgr_User1 - INFO - Saving active session context for f86134c4-c337-43cd-b1e4-77c2743d3d62 to /app/data/sessions/1/f86134c4-c337-43cd-b1e4-77c2743d3d62/context.json
2025-04-23 02:54:05,380 - CtxMemMgr_User1 - INFO - Successfully saved context for session f86134c4-c337-43cd-b1e4-77c2743d3d62
2025-04-23 02:55:35,021 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:55:35,021 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:55:35,021 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:55:35,034 - core.database.connection - INFO - Database connection successful!
2025-04-23 02:55:35,035 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:55:35,037 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:55:35,041 - core.database.connection - INFO - Default user already exists.
2025-04-23 02:55:35,055 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:55:35,070 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 02:55:35,070 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 02:55:35,070 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 02:55:35,070 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 02:55:35,070 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 02:55:35,070 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 02:55:35,070 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 02:55:35,070 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 02:55:35,075 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 02:55:35,075 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 02:55:35,075 - components.action_handler - INFO - Web search functionality is available
2025-04-23 02:55:35,076 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 02:55:35,076 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 02:55:35,076 - app - INFO - Chat blueprint registered successfully
2025-04-23 02:55:35,078 - app - INFO - Session blueprint registered successfully
2025-04-23 02:55:35,079 - app - INFO - Memory blueprint registered successfully
2025-04-23 02:55:35,079 - app - INFO - System Messages blueprint registered successfully
2025-04-23 02:55:35,080 - app - INFO - Basic endpoints registered successfully
2025-04-23 02:55:35,085 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:56:20,536 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:56:20,744 - core.auth.strategies - INFO - Authentication successful for user: testuser3
2025-04-23 02:56:20,747 - api.endpoints.auth - INFO - User testuser3 logged in successfully
2025-04-23 02:56:20,756 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 02:56:20,756 - api.endpoints.chat - INFO - Received chat message from user 1: What is RAI?...
2025-04-23 02:56:20,756 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 02:56:20,757 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 02:56:20,757 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 02:56:20,757 - managers.user_session_manager - INFO - Created new session ID: 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479 for user: 1
2025-04-23 02:56:20,757 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479
2025-04-23 02:56:20,757 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 02:56:20,758 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 02:56:20,758 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 02:56:20,758 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 02:56:20,759 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:56:20,760 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 02:56:20,760 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 02:56:20,760 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 02:56:20,760 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 02:56:20,760 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479
2025-04-23 02:56:20,760 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 02:56:20,760 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 02:56:20,761 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:56:20,761 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 02:56:20,762 - components.prompt_builder - INFO - Constructing prompt for session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479, user 1, depth 0
2025-04-23 02:56:20,762 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 02:56:20,762 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'What is RAI?'
2025-04-23 02:56:20,762 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 02:56:20,762 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 02:56:20,762 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 02:56:20,762 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 02:56:20,764 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:56:20,764 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 02:56:22,902 - CtxMemMgr_User1 - INFO - Loading session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479 for processing assistant message
2025-04-23 02:56:22,902 - CtxMemMgr_User1 - INFO - Loading session context for 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479 from /app/data/sessions/1/52bb7f2e-afc3-4a10-9fd0-7be5f9c52479/context.json
2025-04-23 02:56:22,903 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/52bb7f2e-afc3-4a10-9fd0-7be5f9c52479/context.json not found. Initializing empty context for new session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479.
2025-04-23 02:56:22,903 - CtxMemMgr_User1 - INFO - Stored turn b9b7ecf9-1ea4-4b32-a984-46578b89e827 for active session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479
2025-04-23 02:56:22,903 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479: '...'
2025-04-23 02:56:22,905 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 02:56:22,905 - CtxMemMgr_User1 - INFO - Session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479: Active history token count ~3 / 30000
2025-04-23 02:56:22,905 - CtxMemMgr_User1 - INFO - Saving active session context for 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479 to /app/data/sessions/1/52bb7f2e-afc3-4a10-9fd0-7be5f9c52479/context.json
2025-04-23 02:56:22,907 - CtxMemMgr_User1 - INFO - Successfully saved context for session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479
2025-04-23 02:56:22,907 - ActionHandler_User1 - INFO - Processing LLM response for session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479, user 1
2025-04-23 02:56:22,907 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479.
2025-04-23 02:56:22,908 - CtxMemMgr_User1 - INFO - Stored turn 573b1dcd-0366-4a45-b5da-760e89bac6b8 for active session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479
2025-04-23 02:56:22,908 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479: '...'
2025-04-23 02:56:22,908 - CtxMemMgr_User1 - ERROR - Error during memory extraction: ContextualMemoryManager.__init__.<locals>.MemoryExtractionLLMClient.chat_completion() got an unexpected keyword argument 'options'
2025-04-23 02:56:22,908 - CtxMemMgr_User1 - INFO - Session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479: Active history token count ~234 / 30000
2025-04-23 02:56:22,909 - CtxMemMgr_User1 - INFO - Saving active session context for 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479 to /app/data/sessions/1/52bb7f2e-afc3-4a10-9fd0-7be5f9c52479/context.json
2025-04-23 02:56:22,910 - CtxMemMgr_User1 - INFO - Successfully saved context for session 52bb7f2e-afc3-4a10-9fd0-7be5f9c52479
2025-04-23 02:59:27,809 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 02:59:27,809 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 02:59:27,810 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 02:59:27,822 - core.database.connection - INFO - Database connection successful!
2025-04-23 02:59:27,823 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 02:59:27,825 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 02:59:27,834 - core.database.connection - INFO - Default user already exists.
2025-04-23 02:59:27,849 - app - INFO - Auth blueprint registered successfully
2025-04-23 02:59:27,864 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 02:59:27,864 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 02:59:27,865 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 02:59:27,865 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 02:59:27,865 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 02:59:27,865 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 02:59:27,865 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 02:59:27,865 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 02:59:27,870 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 02:59:27,870 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 02:59:27,870 - components.action_handler - INFO - Web search functionality is available
2025-04-23 02:59:27,870 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 02:59:27,870 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 02:59:27,871 - app - INFO - Chat blueprint registered successfully
2025-04-23 02:59:27,872 - app - INFO - Session blueprint registered successfully
2025-04-23 02:59:27,873 - app - INFO - Memory blueprint registered successfully
2025-04-23 02:59:27,874 - app - INFO - System Messages blueprint registered successfully
2025-04-23 02:59:27,875 - app - INFO - Basic endpoints registered successfully
2025-04-23 02:59:27,879 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 02:59:43,761 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 02:59:43,975 - core.auth.strategies - INFO - Authentication successful for user: testuser3
2025-04-23 02:59:43,978 - api.endpoints.auth - INFO - User testuser3 logged in successfully
2025-04-23 02:59:43,988 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 02:59:43,988 - api.endpoints.chat - INFO - Received chat message from user 1: What is RAI?...
2025-04-23 02:59:43,988 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 02:59:43,989 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 02:59:43,989 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 02:59:43,989 - managers.user_session_manager - INFO - Created new session ID: 5bae9d20-9c94-49cc-aa92-071597137e85 for user: 1
2025-04-23 02:59:43,989 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 5bae9d20-9c94-49cc-aa92-071597137e85
2025-04-23 02:59:43,989 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 02:59:43,990 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 02:59:43,990 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 02:59:43,990 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 02:59:43,991 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:59:43,992 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 02:59:43,992 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 02:59:43,992 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 02:59:43,992 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 02:59:43,992 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 5bae9d20-9c94-49cc-aa92-071597137e85
2025-04-23 02:59:43,992 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 02:59:43,992 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 02:59:43,993 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:59:43,993 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 02:59:43,994 - components.prompt_builder - INFO - Constructing prompt for session 5bae9d20-9c94-49cc-aa92-071597137e85, user 1, depth 0
2025-04-23 02:59:43,994 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 02:59:43,994 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'What is RAI?'
2025-04-23 02:59:43,994 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 02:59:43,994 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 02:59:43,994 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 02:59:43,994 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 02:59:43,996 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 02:59:43,996 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 02:59:46,017 - CtxMemMgr_User1 - INFO - Loading session 5bae9d20-9c94-49cc-aa92-071597137e85 for processing assistant message
2025-04-23 02:59:46,017 - CtxMemMgr_User1 - INFO - Loading session context for 5bae9d20-9c94-49cc-aa92-071597137e85 from /app/data/sessions/1/5bae9d20-9c94-49cc-aa92-071597137e85/context.json
2025-04-23 02:59:46,018 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/5bae9d20-9c94-49cc-aa92-071597137e85/context.json not found. Initializing empty context for new session 5bae9d20-9c94-49cc-aa92-071597137e85.
2025-04-23 02:59:46,018 - CtxMemMgr_User1 - INFO - Stored turn 0813de93-4c14-4756-ba78-feef26252246 for active session 5bae9d20-9c94-49cc-aa92-071597137e85
2025-04-23 02:59:46,018 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 5bae9d20-9c94-49cc-aa92-071597137e85: '...'
2025-04-23 02:59:46,020 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 02:59:46,020 - CtxMemMgr_User1 - INFO - Session 5bae9d20-9c94-49cc-aa92-071597137e85: Active history token count ~3 / 30000
2025-04-23 02:59:46,021 - CtxMemMgr_User1 - INFO - Saving active session context for 5bae9d20-9c94-49cc-aa92-071597137e85 to /app/data/sessions/1/5bae9d20-9c94-49cc-aa92-071597137e85/context.json
2025-04-23 02:59:46,023 - CtxMemMgr_User1 - INFO - Successfully saved context for session 5bae9d20-9c94-49cc-aa92-071597137e85
2025-04-23 02:59:46,023 - ActionHandler_User1 - INFO - Processing LLM response for session 5bae9d20-9c94-49cc-aa92-071597137e85, user 1
2025-04-23 02:59:46,024 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session 5bae9d20-9c94-49cc-aa92-071597137e85.
2025-04-23 02:59:46,024 - CtxMemMgr_User1 - INFO - Stored turn 6b4f5471-fcc8-47b3-b130-300669f8beab for active session 5bae9d20-9c94-49cc-aa92-071597137e85
2025-04-23 02:59:46,024 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 5bae9d20-9c94-49cc-aa92-071597137e85: '...'
2025-04-23 02:59:46,446 - CtxMemMgr_User1 - INFO - Session 5bae9d20-9c94-49cc-aa92-071597137e85: Active history token count ~229 / 30000
2025-04-23 02:59:46,446 - CtxMemMgr_User1 - INFO - Saving active session context for 5bae9d20-9c94-49cc-aa92-071597137e85 to /app/data/sessions/1/5bae9d20-9c94-49cc-aa92-071597137e85/context.json
2025-04-23 02:59:46,448 - CtxMemMgr_User1 - INFO - Successfully saved context for session 5bae9d20-9c94-49cc-aa92-071597137e85
2025-04-23 03:00:33,283 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:00:33,505 - core.auth.strategies - INFO - Successfully registered new user: testuser4
2025-04-23 03:00:33,506 - api.endpoints.auth - INFO - User testuser4 registered successfully
2025-04-23 03:10:00,597 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:10:00,815 - core.auth.strategies - INFO - Successfully registered new user: testuser5
2025-04-23 03:10:00,817 - api.endpoints.auth - INFO - User testuser5 registered successfully
2025-04-23 03:10:11,895 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:10:12,111 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:10:12,113 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:10:12,123 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 03:10:12,123 - api.endpoints.chat - INFO - Received chat message from user 1: This is test message 1...
2025-04-23 03:10:12,123 - managers.user_session_manager - INFO - Created new session ID: 7c41f654-58d8-486e-b775-95cc61205f27 for user: 1
2025-04-23 03:10:12,124 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 7c41f654-58d8-486e-b775-95cc61205f27
2025-04-23 03:10:12,125 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 03:10:12,125 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 03:10:12,125 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 03:10:12,126 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 03:10:12,127 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 03:10:12,127 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 03:10:12,127 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:10:12,127 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:10:12,127 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 7c41f654-58d8-486e-b775-95cc61205f27
2025-04-23 03:10:12,127 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:10:12,127 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:10:12,128 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 03:10:12,128 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 03:10:12,128 - components.prompt_builder - INFO - Constructing prompt for session 7c41f654-58d8-486e-b775-95cc61205f27, user 1, depth 0
2025-04-23 03:10:12,129 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 03:10:12,129 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'This is test message 1'
2025-04-23 03:10:12,129 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 03:10:12,129 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 03:10:12,129 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 03:10:12,129 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 03:10:12,131 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 03:10:12,131 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 03:10:13,943 - CtxMemMgr_User1 - INFO - Loading session 7c41f654-58d8-486e-b775-95cc61205f27 for processing assistant message
2025-04-23 03:10:13,944 - CtxMemMgr_User1 - INFO - Loading session context for 7c41f654-58d8-486e-b775-95cc61205f27 from /app/data/sessions/1/7c41f654-58d8-486e-b775-95cc61205f27/context.json
2025-04-23 03:10:13,945 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/7c41f654-58d8-486e-b775-95cc61205f27/context.json not found. Initializing empty context for new session 7c41f654-58d8-486e-b775-95cc61205f27.
2025-04-23 03:10:13,945 - CtxMemMgr_User1 - INFO - Stored turn 1d3c8307-3a61-42eb-a1dd-727d6cd8c670 for active session 7c41f654-58d8-486e-b775-95cc61205f27
2025-04-23 03:10:13,946 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 7c41f654-58d8-486e-b775-95cc61205f27: '...'
2025-04-23 03:10:13,946 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 03:10:13,946 - CtxMemMgr_User1 - INFO - Session 7c41f654-58d8-486e-b775-95cc61205f27: Active history token count ~5 / 30000
2025-04-23 03:10:13,946 - CtxMemMgr_User1 - INFO - Saving active session context for 7c41f654-58d8-486e-b775-95cc61205f27 to /app/data/sessions/1/7c41f654-58d8-486e-b775-95cc61205f27/context.json
2025-04-23 03:10:13,949 - CtxMemMgr_User1 - INFO - Successfully saved context for session 7c41f654-58d8-486e-b775-95cc61205f27
2025-04-23 03:10:13,950 - ActionHandler_User1 - INFO - Processing LLM response for session 7c41f654-58d8-486e-b775-95cc61205f27, user 1
2025-04-23 03:10:13,950 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session 7c41f654-58d8-486e-b775-95cc61205f27.
2025-04-23 03:10:13,950 - CtxMemMgr_User1 - INFO - Stored turn 7f2b663b-3376-4e68-a6b2-a390b6ea80cd for active session 7c41f654-58d8-486e-b775-95cc61205f27
2025-04-23 03:10:13,950 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 7c41f654-58d8-486e-b775-95cc61205f27: '...'
2025-04-23 03:10:14,315 - CtxMemMgr_User1 - INFO - Session 7c41f654-58d8-486e-b775-95cc61205f27: Active history token count ~183 / 30000
2025-04-23 03:10:14,316 - CtxMemMgr_User1 - INFO - Saving active session context for 7c41f654-58d8-486e-b775-95cc61205f27 to /app/data/sessions/1/7c41f654-58d8-486e-b775-95cc61205f27/context.json
2025-04-23 03:10:14,318 - CtxMemMgr_User1 - INFO - Successfully saved context for session 7c41f654-58d8-486e-b775-95cc61205f27
2025-04-23 03:10:28,104 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:10:28,323 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:10:28,325 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:10:57,182 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:10:57,419 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:10:57,421 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:11:04,545 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:11:04,768 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:11:04,770 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:11:55,119 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:11:55,334 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:11:55,336 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:11:55,346 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 03:11:55,346 - app - ERROR - Exception on /api/sessions/list [GET]
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 2528, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1825, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.10/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
  File "/app/core/auth/utils.py", line 117, in decorated
    return f(*args, **kwargs)
  File "/app/api/endpoints/session.py", line 62, in list_sessions
    logger.error(f"Error listing sessions for user {g.user_id}: {e}", exc_info=True)
  File "/usr/local/lib/python3.10/site-packages/flask/ctx.py", line 52, in __getattr__
    raise AttributeError(name) from None
AttributeError: user_id
2025-04-23 03:12:56,681 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:12:56,917 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:12:56,919 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:12:56,930 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 03:12:56,930 - app - ERROR - Exception on /api/sessions/list [GET]
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 2528, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1825, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.10/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
  File "/app/core/auth/utils.py", line 117, in decorated
    return f(*args, **kwargs)
  File "/app/api/endpoints/session.py", line 62, in list_sessions
    logger.error(f"Error listing sessions for user {g.user_id}: {e}", exc_info=True)
  File "/usr/local/lib/python3.10/site-packages/flask/ctx.py", line 52, in __getattr__
    raise AttributeError(name) from None
AttributeError: user_id
2025-04-23 03:14:40,370 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 03:14:40,370 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 03:14:40,371 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 03:14:40,384 - core.database.connection - INFO - Database connection successful!
2025-04-23 03:14:40,384 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 03:14:40,386 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 03:14:40,391 - core.database.connection - INFO - Default user already exists.
2025-04-23 03:14:40,405 - app - INFO - Auth blueprint registered successfully
2025-04-23 03:14:40,415 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 03:14:40,415 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 03:14:40,415 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 03:14:40,415 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 03:14:40,415 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 03:14:40,415 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 03:14:40,415 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 03:14:40,415 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 03:14:40,420 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 03:14:40,420 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 03:14:40,420 - components.action_handler - INFO - Web search functionality is available
2025-04-23 03:14:40,421 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 03:14:40,421 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 03:14:40,421 - app - INFO - Chat blueprint registered successfully
2025-04-23 03:14:40,424 - app - INFO - Session blueprint registered successfully
2025-04-23 03:14:40,425 - app - INFO - Memory blueprint registered successfully
2025-04-23 03:14:40,425 - app - INFO - System Messages blueprint registered successfully
2025-04-23 03:14:40,426 - app - INFO - Basic endpoints registered successfully
2025-04-23 03:14:40,431 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 03:14:50,702 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:14:50,914 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:14:50,917 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:14:50,927 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 03:14:50,927 - api.endpoints.session - ERROR - Error listing sessions for user 1: No module named 'api.core'
Traceback (most recent call last):
  File "/app/api/endpoints/session.py", line 43, in list_sessions
    from ..core.database.session import get_db
ModuleNotFoundError: No module named 'api.core'
2025-04-23 03:15:36,949 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 03:15:36,949 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 03:15:36,949 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 03:15:36,962 - core.database.connection - INFO - Database connection successful!
2025-04-23 03:15:36,962 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 03:15:36,964 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 03:15:36,969 - core.database.connection - INFO - Default user already exists.
2025-04-23 03:15:36,983 - app - INFO - Auth blueprint registered successfully
2025-04-23 03:15:36,993 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 03:15:36,993 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 03:15:36,994 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 03:15:36,994 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 03:15:36,994 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 03:15:36,994 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 03:15:36,994 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 03:15:36,994 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 03:15:37,002 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 03:15:37,019 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 03:15:37,020 - components.action_handler - INFO - Web search functionality is available
2025-04-23 03:15:37,022 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 03:15:37,022 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 03:15:37,023 - app - INFO - Chat blueprint registered successfully
2025-04-23 03:15:37,027 - app - INFO - Session blueprint registered successfully
2025-04-23 03:15:37,028 - app - INFO - Memory blueprint registered successfully
2025-04-23 03:15:37,029 - app - INFO - System Messages blueprint registered successfully
2025-04-23 03:15:37,029 - app - INFO - Basic endpoints registered successfully
2025-04-23 03:15:37,035 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 03:15:45,311 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:15:45,525 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:15:45,527 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:15:45,537 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 03:15:45,538 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 03:15:45,542 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 03:15:45,542 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 03:15:45,542 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 03:15:45,542 - managers.user_session_manager - INFO - Created new session ID: f12c0489-010e-41ea-96d3-1e6a36ee5a46 for user: 1
2025-04-23 03:15:45,542 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: f12c0489-010e-41ea-96d3-1e6a36ee5a46
2025-04-23 03:15:45,543 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 03:15:45,543 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 03:15:45,543 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 03:15:45,543 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 03:15:45,545 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 03:15:45,545 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 03:15:45,545 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 03:15:45,545 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:15:45,545 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:15:45,545 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: f12c0489-010e-41ea-96d3-1e6a36ee5a46
2025-04-23 03:15:45,545 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:15:45,546 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:15:45,546 - api.endpoints.session - ERROR - Error listing sessions for user 1: 'tuple' object has no attribute 'get_conversation_manager'
Traceback (most recent call last):
  File "/app/api/endpoints/session.py", line 50, in list_sessions
    _, conversation_manager = user_session_manager.get_conversation_manager(user_id)
AttributeError: 'tuple' object has no attribute 'get_conversation_manager'
2025-04-23 03:16:45,670 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 03:16:45,670 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 03:16:45,670 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 03:16:45,683 - core.database.connection - INFO - Database connection successful!
2025-04-23 03:16:45,684 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 03:16:45,685 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 03:16:45,690 - core.database.connection - INFO - Default user already exists.
2025-04-23 03:16:45,703 - app - INFO - Auth blueprint registered successfully
2025-04-23 03:16:45,714 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 03:16:45,714 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 03:16:45,714 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 03:16:45,714 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 03:16:45,715 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 03:16:45,715 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 03:16:45,715 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 03:16:45,715 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 03:16:45,719 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 03:16:45,719 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 03:16:45,720 - components.action_handler - INFO - Web search functionality is available
2025-04-23 03:16:45,720 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 03:16:45,720 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 03:16:45,721 - app - INFO - Chat blueprint registered successfully
2025-04-23 03:16:45,724 - app - INFO - Session blueprint registered successfully
2025-04-23 03:16:45,724 - app - INFO - Memory blueprint registered successfully
2025-04-23 03:16:45,725 - app - INFO - System Messages blueprint registered successfully
2025-04-23 03:16:45,726 - app - INFO - Basic endpoints registered successfully
2025-04-23 03:16:45,730 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 03:17:15,207 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:17:15,427 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:17:15,430 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:17:15,439 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 03:17:15,440 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 03:17:15,444 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 03:17:15,444 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 03:17:15,444 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 03:17:15,444 - managers.user_session_manager - INFO - Created new session ID: 31c40b11-00d4-4b46-825f-2f75a5fc4b21 for user: 1
2025-04-23 03:17:15,444 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 31c40b11-00d4-4b46-825f-2f75a5fc4b21
2025-04-23 03:17:15,445 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 03:17:15,445 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 03:17:15,445 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 03:17:15,446 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 03:17:15,447 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 03:17:15,448 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 03:17:15,448 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 03:17:15,448 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:17:15,448 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:17:15,448 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 31c40b11-00d4-4b46-825f-2f75a5fc4b21
2025-04-23 03:17:15,448 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:17:15,448 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:17:15,449 - api.endpoints.session - ERROR - Error listing sessions for user 1: 'ConversationManager' object has no attribute 'list_saved_sessions'
Traceback (most recent call last):
  File "/app/api/endpoints/session.py", line 56, in list_sessions
    sessions = conversation_manager.list_saved_sessions(db)
AttributeError: 'ConversationManager' object has no attribute 'list_saved_sessions'
2025-04-23 03:18:54,629 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 03:18:54,629 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 03:18:54,630 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 03:18:54,649 - core.database.connection - INFO - Database connection successful!
2025-04-23 03:18:54,649 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 03:18:54,651 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 03:18:54,655 - core.database.connection - INFO - Default user already exists.
2025-04-23 03:18:54,671 - app - INFO - Auth blueprint registered successfully
2025-04-23 03:18:54,692 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 03:18:54,692 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 03:18:54,692 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 03:18:54,692 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 03:18:54,692 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 03:18:54,693 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 03:18:54,693 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 03:18:54,693 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 03:18:54,698 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 03:18:54,698 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 03:18:54,698 - components.action_handler - INFO - Web search functionality is available
2025-04-23 03:18:54,698 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 03:18:54,699 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 03:18:54,699 - app - INFO - Chat blueprint registered successfully
2025-04-23 03:18:54,702 - app - INFO - Session blueprint registered successfully
2025-04-23 03:18:54,704 - app - INFO - Memory blueprint registered successfully
2025-04-23 03:18:54,704 - app - INFO - System Messages blueprint registered successfully
2025-04-23 03:18:54,705 - app - INFO - Basic endpoints registered successfully
2025-04-23 03:18:54,710 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 03:19:04,682 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:19:04,905 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:19:04,907 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:19:04,917 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 03:19:04,918 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 03:19:04,922 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 03:19:04,922 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 03:19:04,922 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 03:19:04,922 - managers.user_session_manager - INFO - Created new session ID: 280f8a7d-65f8-4402-80bb-02821c9c2dce for user: 1
2025-04-23 03:19:04,923 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 280f8a7d-65f8-4402-80bb-02821c9c2dce
2025-04-23 03:19:04,923 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 03:19:04,923 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 03:19:04,924 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 03:19:04,924 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 03:19:04,925 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 03:19:04,926 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 03:19:04,926 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 03:19:04,926 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:19:04,926 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:19:04,926 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 280f8a7d-65f8-4402-80bb-02821c9c2dce
2025-04-23 03:19:04,926 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:19:04,926 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:19:04,927 - managers.chat_file_manager - ERROR - Error listing sessions for user 1 from DB: '_GeneratorContextManager' object has no attribute 'query'
Traceback (most recent call last):
  File "/app/managers/chat_file_manager.py", line 87, in list_sessions
    sessions = db.query(
AttributeError: '_GeneratorContextManager' object has no attribute 'query'
2025-04-23 03:19:24,149 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:19:24,362 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:19:24,364 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:19:24,374 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 03:19:24,374 - api.endpoints.chat - INFO - Received chat message from user 1: This is a test message to create a new session...
2025-04-23 03:19:24,374 - managers.user_session_manager - INFO - Created new session ID: 2760ddae-5fe4-441f-89db-774cc444ea13 for user: 1
2025-04-23 03:19:24,374 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 2760ddae-5fe4-441f-89db-774cc444ea13
2025-04-23 03:19:24,374 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 03:19:24,375 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 03:19:24,375 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 03:19:24,376 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 03:19:24,376 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 03:19:24,376 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 03:19:24,376 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:19:24,376 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:19:24,376 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 2760ddae-5fe4-441f-89db-774cc444ea13
2025-04-23 03:19:24,376 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:19:24,377 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:19:24,377 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 03:19:24,378 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 03:19:24,378 - components.prompt_builder - INFO - Constructing prompt for session 2760ddae-5fe4-441f-89db-774cc444ea13, user 1, depth 0
2025-04-23 03:19:24,378 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 03:19:24,378 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'This is a test message to create a new session'
2025-04-23 03:19:24,378 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 03:19:24,378 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 03:19:24,378 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 03:19:24,378 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 03:19:24,380 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 03:19:24,380 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 03:19:26,546 - CtxMemMgr_User1 - INFO - Loading session 2760ddae-5fe4-441f-89db-774cc444ea13 for processing assistant message
2025-04-23 03:19:26,546 - CtxMemMgr_User1 - INFO - Loading session context for 2760ddae-5fe4-441f-89db-774cc444ea13 from /app/data/sessions/1/2760ddae-5fe4-441f-89db-774cc444ea13/context.json
2025-04-23 03:19:26,546 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/2760ddae-5fe4-441f-89db-774cc444ea13/context.json not found. Initializing empty context for new session 2760ddae-5fe4-441f-89db-774cc444ea13.
2025-04-23 03:19:26,546 - CtxMemMgr_User1 - INFO - Stored turn f4217eac-8e2f-46ad-8e2b-91a1555f9b1b for active session 2760ddae-5fe4-441f-89db-774cc444ea13
2025-04-23 03:19:26,546 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 2760ddae-5fe4-441f-89db-774cc444ea13: '...'
2025-04-23 03:19:26,547 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 03:19:26,547 - CtxMemMgr_User1 - INFO - Session 2760ddae-5fe4-441f-89db-774cc444ea13: Active history token count ~11 / 30000
2025-04-23 03:19:26,547 - CtxMemMgr_User1 - INFO - Saving active session context for 2760ddae-5fe4-441f-89db-774cc444ea13 to /app/data/sessions/1/2760ddae-5fe4-441f-89db-774cc444ea13/context.json
2025-04-23 03:19:26,548 - CtxMemMgr_User1 - INFO - Successfully saved context for session 2760ddae-5fe4-441f-89db-774cc444ea13
2025-04-23 03:19:26,548 - ActionHandler_User1 - INFO - Processing LLM response for session 2760ddae-5fe4-441f-89db-774cc444ea13, user 1
2025-04-23 03:19:26,548 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session 2760ddae-5fe4-441f-89db-774cc444ea13.
2025-04-23 03:19:26,549 - CtxMemMgr_User1 - INFO - Stored turn 30bb6c79-ca86-4390-98b5-090fbcb36e5b for active session 2760ddae-5fe4-441f-89db-774cc444ea13
2025-04-23 03:19:26,549 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 2760ddae-5fe4-441f-89db-774cc444ea13: '...'
2025-04-23 03:19:26,894 - CtxMemMgr_User1 - INFO - Session 2760ddae-5fe4-441f-89db-774cc444ea13: Active history token count ~233 / 30000
2025-04-23 03:19:26,894 - CtxMemMgr_User1 - INFO - Saving active session context for 2760ddae-5fe4-441f-89db-774cc444ea13 to /app/data/sessions/1/2760ddae-5fe4-441f-89db-774cc444ea13/context.json
2025-04-23 03:19:26,899 - CtxMemMgr_User1 - INFO - Successfully saved context for session 2760ddae-5fe4-441f-89db-774cc444ea13
2025-04-23 03:20:21,390 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 03:20:21,601 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 03:20:21,603 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 03:20:21,613 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 03:20:21,615 - managers.user_session_manager - INFO - Created new session ID: 603dd378-dd27-4dd6-b9af-0b96349d99ea for user: 1
2025-04-23 03:20:21,615 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 603dd378-dd27-4dd6-b9af-0b96349d99ea
2025-04-23 03:20:21,616 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 03:20:21,616 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 03:20:21,616 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 03:20:21,617 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 03:20:21,618 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 03:20:21,618 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 03:20:21,618 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:20:21,619 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 03:20:21,619 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 603dd378-dd27-4dd6-b9af-0b96349d99ea
2025-04-23 03:20:21,619 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:20:21,619 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 03:20:21,619 - managers.chat_file_manager - ERROR - Error listing sessions for user 1 from DB: '_GeneratorContextManager' object has no attribute 'query'
Traceback (most recent call last):
  File "/app/managers/chat_file_manager.py", line 87, in list_sessions
    sessions = db.query(
AttributeError: '_GeneratorContextManager' object has no attribute 'query'
2025-04-23 03:21:39,724 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 03:21:39,724 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 03:21:39,724 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 03:21:39,739 - core.database.connection - INFO - Database connection successful!
2025-04-23 03:21:39,740 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 03:21:39,742 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 03:21:39,748 - core.database.connection - INFO - Default user already exists.
2025-04-23 03:21:39,767 - app - INFO - Auth blueprint registered successfully
2025-04-23 03:21:39,778 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 03:21:39,778 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 03:21:39,779 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 03:21:39,779 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 03:21:39,779 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 03:21:39,779 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 03:21:39,779 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 03:21:39,779 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 03:21:39,784 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 03:21:39,784 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 03:21:39,784 - components.action_handler - INFO - Web search functionality is available
2025-04-23 03:21:39,785 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 03:21:39,785 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 03:21:39,786 - app - INFO - Chat blueprint registered successfully
2025-04-23 03:21:39,789 - app - INFO - Session blueprint registered successfully
2025-04-23 03:21:39,791 - app - INFO - Memory blueprint registered successfully
2025-04-23 03:21:39,792 - app - INFO - System Messages blueprint registered successfully
2025-04-23 03:21:39,792 - app - INFO - Basic endpoints registered successfully
2025-04-23 03:21:39,797 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 10:25:52,567 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 10:25:52,808 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 10:25:52,810 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 10:25:52,820 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 10:25:52,820 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 10:25:52,820 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 10:25:52,821 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 10:25:52,821 - managers.user_session_manager - INFO - Created new session ID: 681aeff7-7668-4a0e-832c-acba62f1294f for user: 1
2025-04-23 10:25:52,821 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 681aeff7-7668-4a0e-832c-acba62f1294f
2025-04-23 10:25:52,821 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 10:25:52,821 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 10:25:52,821 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 10:25:52,821 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 10:25:52,823 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:25:52,823 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 10:25:52,823 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 10:25:52,823 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:25:52,823 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:25:52,823 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 681aeff7-7668-4a0e-832c-acba62f1294f
2025-04-23 10:25:52,823 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:25:52,823 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:25:52,824 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 10:25:52,830 - managers.chat_file_manager - INFO - Retrieved 36 sessions for user 1 from DB.
2025-04-23 10:26:33,747 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 10:26:33,747 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 10:26:33,747 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 10:26:33,760 - core.database.connection - INFO - Database connection successful!
2025-04-23 10:26:33,760 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 10:26:33,762 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 10:26:33,766 - core.database.connection - INFO - Default user already exists.
2025-04-23 10:26:33,781 - app - INFO - Auth blueprint registered successfully
2025-04-23 10:26:33,791 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 10:26:33,791 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 10:26:33,791 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 10:26:33,791 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 10:26:33,791 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 10:26:33,791 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 10:26:33,792 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 10:26:33,792 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 10:26:33,796 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 10:26:33,796 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 10:26:33,796 - components.action_handler - INFO - Web search functionality is available
2025-04-23 10:26:33,797 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 10:26:33,797 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 10:26:33,797 - app - INFO - Chat blueprint registered successfully
2025-04-23 10:26:33,800 - app - INFO - Session blueprint registered successfully
2025-04-23 10:26:33,801 - app - INFO - Memory blueprint registered successfully
2025-04-23 10:26:33,802 - app - INFO - System Messages blueprint registered successfully
2025-04-23 10:26:33,803 - app - INFO - Basic endpoints registered successfully
2025-04-23 10:26:33,808 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 10:26:57,654 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 10:26:57,868 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 10:26:57,871 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 10:27:10,952 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 10:27:11,168 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 10:27:11,169 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 10:32:40,587 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 10:32:40,828 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 10:32:40,830 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 10:32:40,842 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 10:32:40,842 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 10:32:40,842 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 10:32:40,843 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 10:32:40,843 - managers.user_session_manager - INFO - Created new session ID: 8b349d8e-c8fa-416c-9cad-f0d967642a88 for user: 1
2025-04-23 10:32:40,843 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 8b349d8e-c8fa-416c-9cad-f0d967642a88
2025-04-23 10:32:40,843 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 10:32:40,844 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 10:32:40,844 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 10:32:40,844 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 10:32:40,846 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:32:40,847 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 10:32:40,847 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 10:32:40,847 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:32:40,847 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:32:40,848 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 8b349d8e-c8fa-416c-9cad-f0d967642a88
2025-04-23 10:32:40,848 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:32:40,848 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:32:40,849 - managers.chat_file_manager - WARNING - Transcript file not found: /app/data/sessions/1/session-1745237727905-0b194/transcript.json
2025-04-23 10:32:57,117 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 10:32:57,334 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 10:32:57,336 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 10:32:57,345 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 10:32:57,345 - api.endpoints.chat - INFO - Received chat message from user 1: Hello, this is a new test message...
2025-04-23 10:32:57,346 - managers.user_session_manager - INFO - Created new session ID: 378ce134-1559-44ad-bfa8-48dd3781a3e3 for user: 1
2025-04-23 10:32:57,346 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 378ce134-1559-44ad-bfa8-48dd3781a3e3
2025-04-23 10:32:57,346 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 10:32:57,346 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 10:32:57,346 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 10:32:57,347 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:32:57,348 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 10:32:57,348 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 10:32:57,348 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:32:57,348 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:32:57,348 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 378ce134-1559-44ad-bfa8-48dd3781a3e3
2025-04-23 10:32:57,348 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:32:57,348 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:32:57,349 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:32:57,349 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 10:32:57,349 - components.prompt_builder - INFO - Constructing prompt for session 378ce134-1559-44ad-bfa8-48dd3781a3e3, user 1, depth 0
2025-04-23 10:32:57,349 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 10:32:57,349 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Hello, this is a new test message'
2025-04-23 10:32:57,350 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 10:32:57,350 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 10:32:57,350 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 10:32:57,350 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 10:32:57,352 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:32:57,352 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 10:32:59,724 - CtxMemMgr_User1 - INFO - Loading session 378ce134-1559-44ad-bfa8-48dd3781a3e3 for processing assistant message
2025-04-23 10:32:59,724 - CtxMemMgr_User1 - INFO - Loading session context for 378ce134-1559-44ad-bfa8-48dd3781a3e3 from /app/data/sessions/1/378ce134-1559-44ad-bfa8-48dd3781a3e3/context.json
2025-04-23 10:32:59,724 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/378ce134-1559-44ad-bfa8-48dd3781a3e3/context.json not found. Initializing empty context for new session 378ce134-1559-44ad-bfa8-48dd3781a3e3.
2025-04-23 10:32:59,725 - CtxMemMgr_User1 - INFO - Stored turn 9e9defc7-66a5-4f28-9df5-58286d85305d for active session 378ce134-1559-44ad-bfa8-48dd3781a3e3
2025-04-23 10:32:59,725 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 378ce134-1559-44ad-bfa8-48dd3781a3e3: '...'
2025-04-23 10:32:59,725 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 10:32:59,725 - CtxMemMgr_User1 - INFO - Session 378ce134-1559-44ad-bfa8-48dd3781a3e3: Active history token count ~8 / 30000
2025-04-23 10:32:59,726 - CtxMemMgr_User1 - INFO - Saving active session context for 378ce134-1559-44ad-bfa8-48dd3781a3e3 to /app/data/sessions/1/378ce134-1559-44ad-bfa8-48dd3781a3e3/context.json
2025-04-23 10:32:59,726 - CtxMemMgr_User1 - INFO - Successfully saved context for session 378ce134-1559-44ad-bfa8-48dd3781a3e3
2025-04-23 10:32:59,726 - ActionHandler_User1 - INFO - Processing LLM response for session 378ce134-1559-44ad-bfa8-48dd3781a3e3, user 1
2025-04-23 10:32:59,727 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session 378ce134-1559-44ad-bfa8-48dd3781a3e3.
2025-04-23 10:32:59,727 - CtxMemMgr_User1 - INFO - Stored turn 3d6ec877-6407-48bd-90d3-75d454e41923 for active session 378ce134-1559-44ad-bfa8-48dd3781a3e3
2025-04-23 10:32:59,727 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 378ce134-1559-44ad-bfa8-48dd3781a3e3: '...'
2025-04-23 10:33:00,066 - CtxMemMgr_User1 - INFO - Session 378ce134-1559-44ad-bfa8-48dd3781a3e3: Active history token count ~209 / 30000
2025-04-23 10:33:00,067 - CtxMemMgr_User1 - INFO - Saving active session context for 378ce134-1559-44ad-bfa8-48dd3781a3e3 to /app/data/sessions/1/378ce134-1559-44ad-bfa8-48dd3781a3e3/context.json
2025-04-23 10:33:00,076 - CtxMemMgr_User1 - INFO - Successfully saved context for session 378ce134-1559-44ad-bfa8-48dd3781a3e3
2025-04-23 10:33:08,343 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 10:33:08,561 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 10:33:08,563 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 10:33:08,573 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 10:33:08,573 - managers.user_session_manager - INFO - Created new session ID: de34edc3-5e3a-46da-b91d-5df3c0024ff4 for user: 1
2025-04-23 10:33:08,573 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: de34edc3-5e3a-46da-b91d-5df3c0024ff4
2025-04-23 10:33:08,574 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 10:33:08,574 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 10:33:08,575 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 10:33:08,576 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:33:08,577 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 10:33:08,577 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 10:33:08,577 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:33:08,577 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:33:08,577 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: de34edc3-5e3a-46da-b91d-5df3c0024ff4
2025-04-23 10:33:08,578 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:33:08,578 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:33:08,579 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 10:33:08,586 - managers.chat_file_manager - INFO - Retrieved 36 sessions for user 1 from DB.
2025-04-23 10:37:12,713 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 10:37:12,714 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 10:37:12,714 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 10:37:12,727 - core.database.connection - INFO - Database connection successful!
2025-04-23 10:37:12,727 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 10:37:12,729 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 10:37:12,732 - core.database.connection - INFO - Default user already exists.
2025-04-23 10:37:12,746 - app - INFO - Auth blueprint registered successfully
2025-04-23 10:37:12,756 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 10:37:12,756 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 10:37:12,756 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 10:37:12,756 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 10:37:12,756 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 10:37:12,756 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 10:37:12,756 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 10:37:12,756 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 10:37:12,761 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 10:37:12,761 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 10:37:12,761 - components.action_handler - INFO - Web search functionality is available
2025-04-23 10:37:12,761 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 10:37:12,761 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 10:37:12,762 - app - INFO - Chat blueprint registered successfully
2025-04-23 10:37:12,763 - app - INFO - Session blueprint registered successfully
2025-04-23 10:37:12,764 - app - INFO - Memory blueprint registered successfully
2025-04-23 10:37:12,765 - app - INFO - System Messages blueprint registered successfully
2025-04-23 10:37:12,765 - app - INFO - Basic endpoints registered successfully
2025-04-23 10:37:12,769 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 10:40:00,538 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 10:40:00,821 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 10:40:00,827 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 10:40:00,840 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 10:40:00,840 - api.endpoints.chat - INFO - Received chat message from user 1: This is a test message for our fixed session manag...
2025-04-23 10:40:00,840 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 10:40:00,840 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 10:40:00,841 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 10:40:00,841 - managers.user_session_manager - INFO - Created new session ID: 88324185-bd6b-4af4-b35c-1256fd7a738e for user: 1
2025-04-23 10:40:00,841 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 88324185-bd6b-4af4-b35c-1256fd7a738e
2025-04-23 10:40:00,842 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 10:40:00,842 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 10:40:00,842 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 10:40:00,842 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 10:40:00,845 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:40:00,845 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 10:40:00,845 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 10:40:00,846 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:40:00,846 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:40:00,846 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 88324185-bd6b-4af4-b35c-1256fd7a738e
2025-04-23 10:40:00,846 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:40:00,846 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:40:00,848 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:40:00,849 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 10:40:00,849 - components.prompt_builder - INFO - Constructing prompt for session 88324185-bd6b-4af4-b35c-1256fd7a738e, user 1, depth 0
2025-04-23 10:40:00,849 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 10:40:00,849 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'This is a test message for our fixed session management system'
2025-04-23 10:40:00,849 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 10:40:00,849 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 10:40:00,849 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 10:40:00,849 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 10:40:00,852 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:40:00,852 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 10:40:03,118 - CtxMemMgr_User1 - INFO - Loading session 88324185-bd6b-4af4-b35c-1256fd7a738e for processing assistant message
2025-04-23 10:40:03,118 - CtxMemMgr_User1 - INFO - Loading session context for 88324185-bd6b-4af4-b35c-1256fd7a738e from /app/data/sessions/1/88324185-bd6b-4af4-b35c-1256fd7a738e/context.json
2025-04-23 10:40:03,118 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/88324185-bd6b-4af4-b35c-1256fd7a738e/context.json not found. Initializing empty context for new session 88324185-bd6b-4af4-b35c-1256fd7a738e.
2025-04-23 10:40:03,119 - CtxMemMgr_User1 - INFO - Stored turn 16763638-47e4-4b83-a513-35766108c238 for active session 88324185-bd6b-4af4-b35c-1256fd7a738e
2025-04-23 10:40:03,119 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 88324185-bd6b-4af4-b35c-1256fd7a738e: '...'
2025-04-23 10:40:03,121 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 10:40:03,121 - CtxMemMgr_User1 - INFO - Session 88324185-bd6b-4af4-b35c-1256fd7a738e: Active history token count ~15 / 30000
2025-04-23 10:40:03,122 - CtxMemMgr_User1 - INFO - Saving active session context for 88324185-bd6b-4af4-b35c-1256fd7a738e to /app/data/sessions/1/88324185-bd6b-4af4-b35c-1256fd7a738e/context.json
2025-04-23 10:40:03,124 - CtxMemMgr_User1 - INFO - Successfully saved context for session 88324185-bd6b-4af4-b35c-1256fd7a738e
2025-04-23 10:40:03,124 - ActionHandler_User1 - INFO - Processing LLM response for session 88324185-bd6b-4af4-b35c-1256fd7a738e, user 1
2025-04-23 10:40:03,125 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session 88324185-bd6b-4af4-b35c-1256fd7a738e.
2025-04-23 10:40:03,125 - CtxMemMgr_User1 - INFO - Stored turn 9bd36bee-e8b1-4a86-96a4-9519e2ea0f59 for active session 88324185-bd6b-4af4-b35c-1256fd7a738e
2025-04-23 10:40:03,125 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 88324185-bd6b-4af4-b35c-1256fd7a738e: '...'
2025-04-23 10:40:03,501 - CtxMemMgr_User1 - INFO - Session 88324185-bd6b-4af4-b35c-1256fd7a738e: Active history token count ~298 / 30000
2025-04-23 10:40:03,501 - CtxMemMgr_User1 - INFO - Saving active session context for 88324185-bd6b-4af4-b35c-1256fd7a738e to /app/data/sessions/1/88324185-bd6b-4af4-b35c-1256fd7a738e/context.json
2025-04-23 10:40:03,503 - CtxMemMgr_User1 - INFO - Successfully saved context for session 88324185-bd6b-4af4-b35c-1256fd7a738e
2025-04-23 10:40:31,949 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 10:40:32,173 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 10:40:32,174 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 10:40:32,186 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 10:40:32,187 - managers.user_session_manager - INFO - Created new session ID: 186f7518-e502-4306-9a75-d691833d04bc for user: 1
2025-04-23 10:40:32,187 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 186f7518-e502-4306-9a75-d691833d04bc
2025-04-23 10:40:32,188 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 10:40:32,188 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 10:40:32,188 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 10:40:32,189 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:40:32,190 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 10:40:32,190 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 10:40:32,191 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:40:32,191 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:40:32,191 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 186f7518-e502-4306-9a75-d691833d04bc
2025-04-23 10:40:32,191 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:40:32,191 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:40:32,193 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 10:40:32,201 - managers.chat_file_manager - INFO - Retrieved 36 sessions for user 1 from DB.
2025-04-23 10:42:38,016 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 10:42:38,017 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 10:42:38,017 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 10:42:38,029 - core.database.connection - INFO - Database connection successful!
2025-04-23 10:42:38,030 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 10:42:38,032 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 10:42:38,094 - core.database.connection - INFO - Default user already exists.
2025-04-23 10:42:38,115 - app - INFO - Auth blueprint registered successfully
2025-04-23 10:42:38,134 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 10:42:38,135 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 10:42:38,135 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 10:42:38,135 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 10:42:38,135 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 10:42:38,136 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 10:42:38,136 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 10:42:38,136 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 10:42:38,142 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 10:42:38,142 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 10:42:38,142 - components.action_handler - INFO - Web search functionality is available
2025-04-23 10:42:38,143 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 10:42:38,143 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 10:42:38,143 - app - INFO - Chat blueprint registered successfully
2025-04-23 10:42:38,145 - app - INFO - Session blueprint registered successfully
2025-04-23 10:42:38,146 - app - INFO - Memory blueprint registered successfully
2025-04-23 10:42:38,147 - app - INFO - System Messages blueprint registered successfully
2025-04-23 10:42:38,148 - app - INFO - Basic endpoints registered successfully
2025-04-23 10:42:38,153 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 10:51:03,625 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 10:51:03,842 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 10:51:03,845 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 10:51:03,856 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 10:51:03,856 - api.endpoints.chat - INFO - Received chat message from user 1: Testing the fixed session management system...
2025-04-23 10:51:03,856 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 10:51:03,857 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 10:51:03,857 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 10:51:03,857 - managers.user_session_manager - INFO - Created new session ID: 4764af0d-5dad-41bb-a25f-6142b4defda3 for user: 1
2025-04-23 10:51:03,857 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 4764af0d-5dad-41bb-a25f-6142b4defda3
2025-04-23 10:51:03,858 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 10:51:03,858 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 10:51:03,858 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 10:51:03,858 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 10:51:03,860 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:51:03,860 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 10:51:03,860 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 10:51:03,861 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:51:03,861 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 10:51:03,861 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 4764af0d-5dad-41bb-a25f-6142b4defda3
2025-04-23 10:51:03,861 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:51:03,861 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 10:51:03,862 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:51:03,862 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 10:51:03,862 - components.prompt_builder - INFO - Constructing prompt for session 4764af0d-5dad-41bb-a25f-6142b4defda3, user 1, depth 0
2025-04-23 10:51:03,862 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 10:51:03,862 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Testing the fixed session management system'
2025-04-23 10:51:03,862 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 10:51:03,862 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 10:51:03,862 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 10:51:03,862 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 10:51:03,863 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 10:51:03,863 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 10:51:05,941 - CtxMemMgr_User1 - INFO - Loading session 4764af0d-5dad-41bb-a25f-6142b4defda3 for processing assistant message
2025-04-23 10:51:05,941 - CtxMemMgr_User1 - INFO - Loading session context for 4764af0d-5dad-41bb-a25f-6142b4defda3 from /app/data/sessions/1/4764af0d-5dad-41bb-a25f-6142b4defda3/context.json
2025-04-23 10:51:05,942 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/4764af0d-5dad-41bb-a25f-6142b4defda3/context.json not found. Initializing empty context for new session 4764af0d-5dad-41bb-a25f-6142b4defda3.
2025-04-23 10:51:05,942 - CtxMemMgr_User1 - INFO - Stored turn 3a50903b-3f51-476f-8e4d-d1b0b7a4f4dc for active session 4764af0d-5dad-41bb-a25f-6142b4defda3
2025-04-23 10:51:05,942 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 4764af0d-5dad-41bb-a25f-6142b4defda3: '...'
2025-04-23 10:51:05,944 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 10:51:05,944 - CtxMemMgr_User1 - INFO - Session 4764af0d-5dad-41bb-a25f-6142b4defda3: Active history token count ~10 / 30000
2025-04-23 10:51:05,944 - CtxMemMgr_User1 - INFO - Saving active session context for 4764af0d-5dad-41bb-a25f-6142b4defda3 to /app/data/sessions/1/4764af0d-5dad-41bb-a25f-6142b4defda3/context.json
2025-04-23 10:51:05,946 - CtxMemMgr_User1 - INFO - Successfully saved context for session 4764af0d-5dad-41bb-a25f-6142b4defda3
2025-04-23 10:51:05,946 - ActionHandler_User1 - INFO - Processing LLM response for session 4764af0d-5dad-41bb-a25f-6142b4defda3, user 1
2025-04-23 10:51:05,946 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session 4764af0d-5dad-41bb-a25f-6142b4defda3.
2025-04-23 10:51:05,947 - CtxMemMgr_User1 - INFO - Stored turn 11ba57cb-bd7f-401a-ba4d-3ed050f00231 for active session 4764af0d-5dad-41bb-a25f-6142b4defda3
2025-04-23 10:51:05,947 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 4764af0d-5dad-41bb-a25f-6142b4defda3: '...'
2025-04-23 10:51:06,361 - CtxMemMgr_User1 - INFO - Session 4764af0d-5dad-41bb-a25f-6142b4defda3: Active history token count ~257 / 30000
2025-04-23 10:51:06,362 - CtxMemMgr_User1 - INFO - Saving active session context for 4764af0d-5dad-41bb-a25f-6142b4defda3 to /app/data/sessions/1/4764af0d-5dad-41bb-a25f-6142b4defda3/context.json
2025-04-23 10:51:06,363 - CtxMemMgr_User1 - INFO - Successfully saved context for session 4764af0d-5dad-41bb-a25f-6142b4defda3
2025-04-23 11:53:55,523 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 11:53:55,738 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 11:53:55,740 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 11:53:55,751 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 11:53:55,751 - managers.user_session_manager - INFO - Created new session ID: 3d862881-f303-4906-b961-08d6103ac088 for user: 1
2025-04-23 11:53:55,751 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 3d862881-f303-4906-b961-08d6103ac088
2025-04-23 11:53:55,752 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 11:53:55,752 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 11:53:55,752 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 11:53:55,754 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 11:53:55,754 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 11:53:55,754 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 11:53:55,754 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 11:53:55,755 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 11:53:55,755 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 3d862881-f303-4906-b961-08d6103ac088
2025-04-23 11:53:55,755 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 11:53:55,755 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 11:53:55,756 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 11:53:55,763 - managers.chat_file_manager - INFO - Retrieved 36 sessions for user 1 from DB.
2025-04-23 11:56:37,333 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 11:56:37,553 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 11:56:37,556 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 11:56:37,566 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 11:56:37,566 - api.endpoints.chat - INFO - Received chat message from user 1: Hi, how are you today?...
2025-04-23 11:56:37,567 - managers.user_session_manager - INFO - Created new session ID: d50b3417-7375-4c8a-8514-b686969f4d0f for user: 1
2025-04-23 11:56:37,567 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: d50b3417-7375-4c8a-8514-b686969f4d0f
2025-04-23 11:56:37,567 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 11:56:37,567 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 11:56:37,567 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 11:56:37,569 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 11:56:37,569 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 11:56:37,569 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 11:56:37,569 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 11:56:37,569 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 11:56:37,570 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: d50b3417-7375-4c8a-8514-b686969f4d0f
2025-04-23 11:56:37,570 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 11:56:37,570 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 11:56:37,571 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 11:56:37,571 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 11:56:37,571 - components.prompt_builder - INFO - Constructing prompt for session d50b3417-7375-4c8a-8514-b686969f4d0f, user 1, depth 0
2025-04-23 11:56:37,572 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 11:56:37,572 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Hi, how are you today?'
2025-04-23 11:56:37,572 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 11:56:37,572 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 11:56:37,572 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 11:56:37,572 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 11:56:37,573 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 11:56:37,573 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 11:56:39,885 - CtxMemMgr_User1 - INFO - Loading session d50b3417-7375-4c8a-8514-b686969f4d0f for processing assistant message
2025-04-23 11:56:39,885 - CtxMemMgr_User1 - INFO - Loading session context for d50b3417-7375-4c8a-8514-b686969f4d0f from /app/data/sessions/1/d50b3417-7375-4c8a-8514-b686969f4d0f/context.json
2025-04-23 11:56:39,886 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/d50b3417-7375-4c8a-8514-b686969f4d0f/context.json not found. Initializing empty context for new session d50b3417-7375-4c8a-8514-b686969f4d0f.
2025-04-23 11:56:39,886 - CtxMemMgr_User1 - INFO - Stored turn e0a02c97-414c-4bbb-9dd0-3353fa78d754 for active session d50b3417-7375-4c8a-8514-b686969f4d0f
2025-04-23 11:56:39,886 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session d50b3417-7375-4c8a-8514-b686969f4d0f: '...'
2025-04-23 11:56:39,887 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 11:56:39,887 - CtxMemMgr_User1 - INFO - Session d50b3417-7375-4c8a-8514-b686969f4d0f: Active history token count ~5 / 30000
2025-04-23 11:56:39,887 - CtxMemMgr_User1 - INFO - Saving active session context for d50b3417-7375-4c8a-8514-b686969f4d0f to /app/data/sessions/1/d50b3417-7375-4c8a-8514-b686969f4d0f/context.json
2025-04-23 11:56:39,889 - CtxMemMgr_User1 - INFO - Successfully saved context for session d50b3417-7375-4c8a-8514-b686969f4d0f
2025-04-23 11:56:39,889 - ActionHandler_User1 - INFO - Processing LLM response for session d50b3417-7375-4c8a-8514-b686969f4d0f, user 1
2025-04-23 11:56:39,889 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session d50b3417-7375-4c8a-8514-b686969f4d0f.
2025-04-23 11:56:39,889 - CtxMemMgr_User1 - INFO - Stored turn aa002532-2295-4a21-8255-125027054504 for active session d50b3417-7375-4c8a-8514-b686969f4d0f
2025-04-23 11:56:39,890 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session d50b3417-7375-4c8a-8514-b686969f4d0f: '...'
2025-04-23 11:56:40,398 - CtxMemMgr_User1 - INFO - Session d50b3417-7375-4c8a-8514-b686969f4d0f: Active history token count ~211 / 30000
2025-04-23 11:56:40,399 - CtxMemMgr_User1 - INFO - Saving active session context for d50b3417-7375-4c8a-8514-b686969f4d0f to /app/data/sessions/1/d50b3417-7375-4c8a-8514-b686969f4d0f/context.json
2025-04-23 11:56:40,401 - CtxMemMgr_User1 - INFO - Successfully saved context for session d50b3417-7375-4c8a-8514-b686969f4d0f
2025-04-23 11:57:54,191 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 11:57:54,442 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 11:57:54,446 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 11:57:54,457 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 11:57:54,457 - managers.user_session_manager - INFO - Created new session ID: c517dbc4-6aef-4c3a-9ede-a0b1b31e056e for user: 1
2025-04-23 11:57:54,458 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: c517dbc4-6aef-4c3a-9ede-a0b1b31e056e
2025-04-23 11:57:54,458 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 11:57:54,459 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 11:57:54,460 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 11:57:54,461 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 11:57:54,462 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 11:57:54,463 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 11:57:54,463 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 11:57:54,463 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 11:57:54,463 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: c517dbc4-6aef-4c3a-9ede-a0b1b31e056e
2025-04-23 11:57:54,463 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 11:57:54,464 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 11:57:54,466 - managers.chat_file_manager - INFO - Retrieved 36 sessions for user 1 from DB.
2025-04-23 12:01:51,761 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 12:01:51,761 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 12:01:51,761 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 12:01:51,775 - core.database.connection - INFO - Database connection successful!
2025-04-23 12:01:51,775 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 12:01:51,777 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 12:01:51,783 - core.database.connection - INFO - Default user already exists.
2025-04-23 12:01:51,798 - app - INFO - Auth blueprint registered successfully
2025-04-23 12:01:51,808 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 12:01:51,809 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 12:01:51,809 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 12:01:51,809 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 12:01:51,809 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 12:01:51,809 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 12:01:51,809 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 12:01:51,809 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 12:01:51,814 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 12:01:51,814 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 12:01:51,814 - components.action_handler - INFO - Web search functionality is available
2025-04-23 12:01:51,814 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 12:01:51,815 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 12:01:51,815 - app - INFO - Chat blueprint registered successfully
2025-04-23 12:01:51,818 - app - INFO - Session blueprint registered successfully
2025-04-23 12:01:51,819 - app - INFO - Memory blueprint registered successfully
2025-04-23 12:01:51,819 - app - INFO - System Messages blueprint registered successfully
2025-04-23 12:01:51,820 - app - INFO - Basic endpoints registered successfully
2025-04-23 12:01:51,825 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 12:03:54,018 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 12:03:54,237 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 12:03:54,239 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 12:03:54,250 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 12:03:54,250 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 12:03:54,250 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 12:03:54,250 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 12:03:54,250 - managers.user_session_manager - INFO - Created new session ID: ae72c372-d829-4d1f-8bda-fbe147205a7d for user: 1
2025-04-23 12:03:54,250 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: ae72c372-d829-4d1f-8bda-fbe147205a7d
2025-04-23 12:03:54,251 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 12:03:54,251 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 12:03:54,251 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 12:03:54,251 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 12:03:54,253 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 12:03:54,253 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 12:03:54,253 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 12:03:54,254 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:03:54,254 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:03:54,254 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: ae72c372-d829-4d1f-8bda-fbe147205a7d
2025-04-23 12:03:54,254 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:03:54,254 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:03:54,254 - api.endpoints.session - ERROR - Database error when creating session: name 'get_db' is not defined
2025-04-23 12:10:15,719 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 12:10:15,719 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 12:10:15,719 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 12:10:15,744 - core.database.connection - INFO - Database connection successful!
2025-04-23 12:10:15,745 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 12:10:15,747 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 12:10:15,752 - core.database.connection - INFO - Default user already exists.
2025-04-23 12:10:15,766 - app - INFO - Auth blueprint registered successfully
2025-04-23 12:10:15,777 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 12:10:15,778 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 12:10:15,778 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 12:10:15,778 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 12:10:15,778 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 12:10:15,778 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 12:10:15,778 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 12:10:15,778 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 12:10:15,783 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 12:10:15,783 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 12:10:15,783 - components.action_handler - INFO - Web search functionality is available
2025-04-23 12:10:15,784 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 12:10:15,784 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 12:10:15,784 - app - INFO - Chat blueprint registered successfully
2025-04-23 12:10:15,787 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 12:10:15,792 - app - INFO - Session blueprint registered successfully
2025-04-23 12:10:15,793 - app - INFO - Memory blueprint registered successfully
2025-04-23 12:10:15,794 - app - INFO - System Messages blueprint registered successfully
2025-04-23 12:10:15,795 - app - INFO - Basic endpoints registered successfully
2025-04-23 12:10:15,799 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 12:13:00,397 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 12:13:00,641 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 12:13:00,643 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 12:13:00,653 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 12:13:00,654 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 12:13:00,654 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 12:13:00,654 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 12:13:00,654 - managers.user_session_manager - INFO - Created new session ID: d2048a9a-6c8e-482d-949a-c46fbc366506 for user: 1
2025-04-23 12:13:00,654 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: d2048a9a-6c8e-482d-949a-c46fbc366506
2025-04-23 12:13:00,655 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 12:13:00,655 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 12:13:00,655 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 12:13:00,655 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 12:13:00,657 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 12:13:00,657 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 12:13:00,657 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 12:13:00,657 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:13:00,657 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:13:00,658 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: d2048a9a-6c8e-482d-949a-c46fbc366506
2025-04-23 12:13:00,658 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:13:00,658 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:13:00,658 - managers.chat_file_manager - INFO - Attempting to save transcript for user 1, session d2048a9a-6c8e-482d-949a-c46fbc366506 to /app/data/sessions/1/d2048a9a-6c8e-482d-949a-c46fbc366506/transcript.json
2025-04-23 12:13:00,659 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/1/d2048a9a-6c8e-482d-949a-c46fbc366506/transcript.json
2025-04-23 12:13:00,661 - managers.chat_file_manager - INFO - Session metadata for d2048a9a-6c8e-482d-949a-c46fbc366506 saved/updated in DB.
2025-04-23 12:14:36,154 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 12:14:36,397 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 12:14:36,399 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 12:14:36,409 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 12:14:36,409 - managers.user_session_manager - INFO - Created new session ID: 581aa2e2-9aae-49fd-bace-e7e36a5370ef for user: 1
2025-04-23 12:14:36,409 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 581aa2e2-9aae-49fd-bace-e7e36a5370ef
2025-04-23 12:14:36,410 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 12:14:36,410 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 12:14:36,410 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 12:14:36,411 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 12:14:36,412 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 12:14:36,412 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 12:14:36,412 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:14:36,412 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:14:36,412 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 581aa2e2-9aae-49fd-bace-e7e36a5370ef
2025-04-23 12:14:36,412 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:14:36,412 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:14:36,414 - managers.chat_file_manager - INFO - Retrieved 37 sessions for user 1 from DB.
2025-04-23 12:15:09,335 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 12:15:09,563 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 12:15:09,565 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 12:15:09,575 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 12:15:09,575 - managers.user_session_manager - INFO - Created new session ID: 8463085f-6c42-4ff1-bc33-d13536e4b619 for user: 1
2025-04-23 12:15:09,575 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 8463085f-6c42-4ff1-bc33-d13536e4b619
2025-04-23 12:15:09,575 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 12:15:09,575 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 12:15:09,576 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 12:15:09,577 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 12:15:09,577 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 12:15:09,577 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 12:15:09,577 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:15:09,578 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:15:09,578 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 8463085f-6c42-4ff1-bc33-d13536e4b619
2025-04-23 12:15:09,578 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:15:09,578 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:15:09,578 - managers.chat_file_manager - INFO - Successfully read transcript with 1 messages from /app/data/sessions/1/d2048a9a-6c8e-482d-949a-c46fbc366506/transcript.json
2025-04-23 12:42:40,616 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 12:42:40,834 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 12:42:40,836 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 12:42:40,846 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 12:42:40,847 - api.endpoints.chat - INFO - Received chat message from user 1: Hi, this is a test of the system messages...
2025-04-23 12:42:40,847 - managers.user_session_manager - INFO - Created new session ID: ec77d508-83a3-4e42-adfd-74051889e526 for user: 1
2025-04-23 12:42:40,847 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: ec77d508-83a3-4e42-adfd-74051889e526
2025-04-23 12:42:40,848 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 12:42:40,848 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 12:42:40,848 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 12:42:40,849 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 12:42:40,850 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 12:42:40,850 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 12:42:40,850 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:42:40,850 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:42:40,850 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: ec77d508-83a3-4e42-adfd-74051889e526
2025-04-23 12:42:40,850 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:42:40,851 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:42:40,852 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 12:42:40,852 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 12:42:40,852 - components.prompt_builder - INFO - Constructing prompt for session ec77d508-83a3-4e42-adfd-74051889e526, user 1, depth 0
2025-04-23 12:42:40,853 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 12:42:40,853 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Hi, this is a test of the system messages'
2025-04-23 12:42:40,853 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 12:42:40,853 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 12:42:40,853 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 12:42:40,853 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 12:42:40,854 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 12:42:40,854 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 12:42:43,127 - CtxMemMgr_User1 - INFO - Loading session ec77d508-83a3-4e42-adfd-74051889e526 for processing assistant message
2025-04-23 12:42:43,128 - CtxMemMgr_User1 - INFO - Loading session context for ec77d508-83a3-4e42-adfd-74051889e526 from /app/data/sessions/1/ec77d508-83a3-4e42-adfd-74051889e526/context.json
2025-04-23 12:42:43,129 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/ec77d508-83a3-4e42-adfd-74051889e526/context.json not found. Initializing empty context for new session ec77d508-83a3-4e42-adfd-74051889e526.
2025-04-23 12:42:43,129 - CtxMemMgr_User1 - INFO - Stored turn 35231b9f-f8c7-4c87-8d99-fbcb8d434842 for active session ec77d508-83a3-4e42-adfd-74051889e526
2025-04-23 12:42:43,129 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session ec77d508-83a3-4e42-adfd-74051889e526: '...'
2025-04-23 12:42:43,131 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 12:42:43,131 - CtxMemMgr_User1 - INFO - Session ec77d508-83a3-4e42-adfd-74051889e526: Active history token count ~10 / 30000
2025-04-23 12:42:43,132 - CtxMemMgr_User1 - INFO - Saving active session context for ec77d508-83a3-4e42-adfd-74051889e526 to /app/data/sessions/1/ec77d508-83a3-4e42-adfd-74051889e526/context.json
2025-04-23 12:42:43,134 - CtxMemMgr_User1 - INFO - Successfully saved context for session ec77d508-83a3-4e42-adfd-74051889e526
2025-04-23 12:42:43,134 - ActionHandler_User1 - INFO - Processing LLM response for session ec77d508-83a3-4e42-adfd-74051889e526, user 1
2025-04-23 12:42:43,135 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session ec77d508-83a3-4e42-adfd-74051889e526.
2025-04-23 12:42:43,135 - CtxMemMgr_User1 - INFO - Stored turn c2e5648b-abad-48ab-b880-627af692ae95 for active session ec77d508-83a3-4e42-adfd-74051889e526
2025-04-23 12:42:43,135 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session ec77d508-83a3-4e42-adfd-74051889e526: '...'
2025-04-23 12:42:43,640 - CtxMemMgr_User1 - INFO - Session ec77d508-83a3-4e42-adfd-74051889e526: Active history token count ~219 / 30000
2025-04-23 12:42:43,640 - CtxMemMgr_User1 - INFO - Saving active session context for ec77d508-83a3-4e42-adfd-74051889e526 to /app/data/sessions/1/ec77d508-83a3-4e42-adfd-74051889e526/context.json
2025-04-23 12:42:43,643 - CtxMemMgr_User1 - INFO - Successfully saved context for session ec77d508-83a3-4e42-adfd-74051889e526
2025-04-23 12:43:10,188 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 12:43:10,429 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 12:43:10,431 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 12:43:10,442 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 12:46:59,204 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 12:46:59,418 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 12:46:59,420 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 12:46:59,429 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 12:46:59,429 - api.endpoints.chat - INFO - Received chat message from user 1: Search the internet for the latest AI developments...
2025-04-23 12:46:59,429 - managers.user_session_manager - INFO - Created new session ID: dfa90a78-cfd2-4328-a2e2-13f7b961485a for user: 1
2025-04-23 12:46:59,430 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: dfa90a78-cfd2-4328-a2e2-13f7b961485a
2025-04-23 12:46:59,430 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 12:46:59,430 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 12:46:59,430 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 12:46:59,431 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 12:46:59,432 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 12:46:59,432 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 12:46:59,432 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:46:59,432 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 12:46:59,432 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: dfa90a78-cfd2-4328-a2e2-13f7b961485a
2025-04-23 12:46:59,432 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:46:59,432 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 12:46:59,433 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 12:46:59,433 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 12:46:59,433 - components.prompt_builder - INFO - Constructing prompt for session dfa90a78-cfd2-4328-a2e2-13f7b961485a, user 1, depth 0
2025-04-23 12:46:59,434 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 12:46:59,434 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Search the internet for the latest AI developments'
2025-04-23 12:46:59,434 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 12:46:59,434 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 12:46:59,434 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 12:46:59,434 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 12:46:59,435 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 12:46:59,435 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 12:47:01,696 - CtxMemMgr_User1 - INFO - Loading session dfa90a78-cfd2-4328-a2e2-13f7b961485a for processing assistant message
2025-04-23 12:47:01,697 - CtxMemMgr_User1 - INFO - Loading session context for dfa90a78-cfd2-4328-a2e2-13f7b961485a from /app/data/sessions/1/dfa90a78-cfd2-4328-a2e2-13f7b961485a/context.json
2025-04-23 12:47:01,698 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/dfa90a78-cfd2-4328-a2e2-13f7b961485a/context.json not found. Initializing empty context for new session dfa90a78-cfd2-4328-a2e2-13f7b961485a.
2025-04-23 12:47:01,698 - CtxMemMgr_User1 - INFO - Stored turn 17ed9839-8ab5-4421-9edb-968eb1ae59bc for active session dfa90a78-cfd2-4328-a2e2-13f7b961485a
2025-04-23 12:47:01,699 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session dfa90a78-cfd2-4328-a2e2-13f7b961485a: '...'
2025-04-23 12:47:01,700 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 12:47:01,701 - CtxMemMgr_User1 - INFO - Session dfa90a78-cfd2-4328-a2e2-13f7b961485a: Active history token count ~12 / 30000
2025-04-23 12:47:01,701 - CtxMemMgr_User1 - INFO - Saving active session context for dfa90a78-cfd2-4328-a2e2-13f7b961485a to /app/data/sessions/1/dfa90a78-cfd2-4328-a2e2-13f7b961485a/context.json
2025-04-23 12:47:01,705 - CtxMemMgr_User1 - INFO - Successfully saved context for session dfa90a78-cfd2-4328-a2e2-13f7b961485a
2025-04-23 12:47:01,705 - ActionHandler_User1 - INFO - Processing LLM response for session dfa90a78-cfd2-4328-a2e2-13f7b961485a, user 1
2025-04-23 12:47:01,705 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session dfa90a78-cfd2-4328-a2e2-13f7b961485a.
2025-04-23 12:47:01,705 - CtxMemMgr_User1 - INFO - Stored turn e15cb203-959c-4692-adc2-f62487c50d48 for active session dfa90a78-cfd2-4328-a2e2-13f7b961485a
2025-04-23 12:47:01,706 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session dfa90a78-cfd2-4328-a2e2-13f7b961485a: '...'
2025-04-23 12:47:02,081 - CtxMemMgr_User1 - INFO - Session dfa90a78-cfd2-4328-a2e2-13f7b961485a: Active history token count ~249 / 30000
2025-04-23 12:47:02,082 - CtxMemMgr_User1 - INFO - Saving active session context for dfa90a78-cfd2-4328-a2e2-13f7b961485a to /app/data/sessions/1/dfa90a78-cfd2-4328-a2e2-13f7b961485a/context.json
2025-04-23 12:47:02,083 - CtxMemMgr_User1 - INFO - Successfully saved context for session dfa90a78-cfd2-4328-a2e2-13f7b961485a
2025-04-23 13:02:17,119 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:02:17,340 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:02:17,342 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:02:59,939 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:03:00,182 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:03:00,184 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:03:00,194 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 13:03:11,187 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:03:11,445 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:03:11,447 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:03:11,458 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 13:03:11,458 - managers.user_session_manager - INFO - Created new session ID: 5ffff39f-6bbf-4653-8179-98ff357963e7 for user: 1
2025-04-23 13:03:11,458 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 5ffff39f-6bbf-4653-8179-98ff357963e7
2025-04-23 13:03:11,459 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 13:03:11,459 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 13:03:11,459 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 13:03:11,460 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 13:03:11,461 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 13:03:11,461 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 13:03:11,461 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 13:03:11,461 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 13:03:11,461 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 5ffff39f-6bbf-4653-8179-98ff357963e7
2025-04-23 13:03:11,461 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 13:03:11,461 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 13:03:11,461 - managers.chat_file_manager - INFO - Attempting to save transcript for user 1, session 5ffff39f-6bbf-4653-8179-98ff357963e7 to /app/data/sessions/1/5ffff39f-6bbf-4653-8179-98ff357963e7/transcript.json
2025-04-23 13:03:11,463 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/1/5ffff39f-6bbf-4653-8179-98ff357963e7/transcript.json
2025-04-23 13:03:11,464 - managers.chat_file_manager - INFO - Session metadata for 5ffff39f-6bbf-4653-8179-98ff357963e7 saved/updated in DB.
2025-04-23 13:03:21,364 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:03:21,578 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:03:21,580 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:03:21,590 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 13:03:21,590 - api.endpoints.chat - INFO - Received chat message from user 1: Tell me a short joke...
2025-04-23 13:03:21,591 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 13:03:21,592 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 13:03:21,592 - components.prompt_builder - INFO - Constructing prompt for session 5ffff39f-6bbf-4653-8179-98ff357963e7, user 1, depth 0
2025-04-23 13:03:21,592 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 13:03:21,592 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Tell me a short joke'
2025-04-23 13:03:21,592 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 13:03:21,592 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 13:03:21,593 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 13:03:21,593 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 13:03:21,594 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 13:03:21,594 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 13:03:23,903 - CtxMemMgr_User1 - INFO - Loading session 5ffff39f-6bbf-4653-8179-98ff357963e7 for processing assistant message
2025-04-23 13:03:23,903 - CtxMemMgr_User1 - INFO - Loading session context for 5ffff39f-6bbf-4653-8179-98ff357963e7 from /app/data/sessions/1/5ffff39f-6bbf-4653-8179-98ff357963e7/context.json
2025-04-23 13:03:23,904 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/5ffff39f-6bbf-4653-8179-98ff357963e7/context.json not found. Initializing empty context for new session 5ffff39f-6bbf-4653-8179-98ff357963e7.
2025-04-23 13:03:23,905 - CtxMemMgr_User1 - INFO - Stored turn e024d889-14cf-4d91-b883-cf3dbc2aa229 for active session 5ffff39f-6bbf-4653-8179-98ff357963e7
2025-04-23 13:03:23,905 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 5ffff39f-6bbf-4653-8179-98ff357963e7: '...'
2025-04-23 13:03:23,906 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 13:03:23,906 - CtxMemMgr_User1 - INFO - Session 5ffff39f-6bbf-4653-8179-98ff357963e7: Active history token count ~5 / 30000
2025-04-23 13:03:23,906 - CtxMemMgr_User1 - INFO - Saving active session context for 5ffff39f-6bbf-4653-8179-98ff357963e7 to /app/data/sessions/1/5ffff39f-6bbf-4653-8179-98ff357963e7/context.json
2025-04-23 13:03:23,908 - CtxMemMgr_User1 - INFO - Successfully saved context for session 5ffff39f-6bbf-4653-8179-98ff357963e7
2025-04-23 13:03:23,909 - ActionHandler_User1 - INFO - Processing LLM response for session 5ffff39f-6bbf-4653-8179-98ff357963e7, user 1
2025-04-23 13:03:23,909 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session 5ffff39f-6bbf-4653-8179-98ff357963e7.
2025-04-23 13:03:23,910 - CtxMemMgr_User1 - INFO - Stored turn 2e14375e-ee6a-42e3-8c15-c099bdf038f4 for active session 5ffff39f-6bbf-4653-8179-98ff357963e7
2025-04-23 13:03:23,911 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 5ffff39f-6bbf-4653-8179-98ff357963e7: '...'
2025-04-23 13:03:24,408 - CtxMemMgr_User1 - INFO - Session 5ffff39f-6bbf-4653-8179-98ff357963e7: Active history token count ~214 / 30000
2025-04-23 13:03:24,410 - CtxMemMgr_User1 - INFO - Saving active session context for 5ffff39f-6bbf-4653-8179-98ff357963e7 to /app/data/sessions/1/5ffff39f-6bbf-4653-8179-98ff357963e7/context.json
2025-04-23 13:03:24,422 - CtxMemMgr_User1 - INFO - Successfully saved context for session 5ffff39f-6bbf-4653-8179-98ff357963e7
2025-04-23 13:05:46,091 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 13:05:46,091 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 13:05:46,091 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 13:05:46,112 - core.database.connection - INFO - Database connection successful!
2025-04-23 13:05:46,113 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 13:05:46,115 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 13:05:46,121 - core.database.connection - INFO - Default user already exists.
2025-04-23 13:05:46,143 - app - INFO - Auth blueprint registered successfully
2025-04-23 13:05:46,159 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 13:05:46,160 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 13:05:46,160 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 13:05:46,160 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 13:05:46,160 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 13:05:46,160 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 13:05:46,160 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 13:05:46,160 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 13:05:46,165 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 13:05:46,165 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 13:05:46,165 - components.action_handler - INFO - Web search functionality is available
2025-04-23 13:05:46,166 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 13:05:46,166 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 13:05:46,166 - app - INFO - Chat blueprint registered successfully
2025-04-23 13:05:46,168 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 13:05:46,173 - app - INFO - Session blueprint registered successfully
2025-04-23 13:05:46,174 - app - INFO - Memory blueprint registered successfully
2025-04-23 13:05:46,174 - app - INFO - System Messages blueprint registered successfully
2025-04-23 13:05:46,175 - app - INFO - Basic endpoints registered successfully
2025-04-23 13:05:46,179 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 13:06:09,348 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:06:09,571 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:06:09,574 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:06:09,590 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 13:06:09,591 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 13:06:09,592 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 13:06:09,592 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 13:06:09,592 - managers.user_session_manager - INFO - Created new session ID: f3914f6b-fcfa-4e95-b3f8-dad44a2862f7 for user: 1
2025-04-23 13:06:09,593 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: f3914f6b-fcfa-4e95-b3f8-dad44a2862f7
2025-04-23 13:06:09,593 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 13:06:09,595 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 13:06:09,595 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 13:06:09,595 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 13:06:09,598 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 13:06:09,599 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 13:06:09,600 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 13:06:09,600 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 13:06:09,600 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 13:06:09,600 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: f3914f6b-fcfa-4e95-b3f8-dad44a2862f7
2025-04-23 13:06:09,600 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 13:06:09,600 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 13:06:09,602 - managers.chat_file_manager - INFO - Attempting to save transcript for user 1, session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7 to /app/data/sessions/1/f3914f6b-fcfa-4e95-b3f8-dad44a2862f7/transcript.json
2025-04-23 13:06:09,604 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/1/f3914f6b-fcfa-4e95-b3f8-dad44a2862f7/transcript.json
2025-04-23 13:06:09,607 - managers.chat_file_manager - INFO - Session metadata for f3914f6b-fcfa-4e95-b3f8-dad44a2862f7 saved/updated in DB.
2025-04-23 13:06:19,236 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:06:19,476 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:06:19,478 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:06:19,490 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 13:06:19,490 - api.endpoints.chat - INFO - Received chat message from user 1: Tell me a short joke...
2025-04-23 13:06:19,493 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 13:06:19,495 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 13:06:19,495 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 13:06:19,496 - components.prompt_builder - INFO - Constructing prompt for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7, user 1, depth 0
2025-04-23 13:06:19,496 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 13:06:19,496 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Tell me a short joke'
2025-04-23 13:06:19,496 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 13:06:19,496 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 13:06:19,496 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 13:06:19,496 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 13:06:19,497 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 13:06:19,497 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 13:06:21,860 - CtxMemMgr_User1 - INFO - Loading session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7 for processing assistant message
2025-04-23 13:06:21,860 - CtxMemMgr_User1 - INFO - Loading session context for f3914f6b-fcfa-4e95-b3f8-dad44a2862f7 from /app/data/sessions/1/f3914f6b-fcfa-4e95-b3f8-dad44a2862f7/context.json
2025-04-23 13:06:21,860 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/f3914f6b-fcfa-4e95-b3f8-dad44a2862f7/context.json not found. Initializing empty context for new session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7.
2025-04-23 13:06:21,861 - CtxMemMgr_User1 - INFO - Stored turn 6418eab7-9f5b-4dae-b583-00017f1726a4 for active session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7
2025-04-23 13:06:21,861 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7: '...'
2025-04-23 13:06:21,863 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 13:06:21,863 - CtxMemMgr_User1 - INFO - Session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7: Active history token count ~5 / 30000
2025-04-23 13:06:21,863 - CtxMemMgr_User1 - INFO - Saving active session context for f3914f6b-fcfa-4e95-b3f8-dad44a2862f7 to /app/data/sessions/1/f3914f6b-fcfa-4e95-b3f8-dad44a2862f7/context.json
2025-04-23 13:06:21,865 - CtxMemMgr_User1 - INFO - Successfully saved context for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7
2025-04-23 13:06:21,866 - ActionHandler_User1 - INFO - Processing LLM response for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7, user 1
2025-04-23 13:06:21,866 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7.
2025-04-23 13:06:21,866 - CtxMemMgr_User1 - INFO - Stored turn e69d23f8-f40b-4d4f-88ff-43be8f5484b2 for active session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7
2025-04-23 13:06:21,866 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7: '...'
2025-04-23 13:06:22,350 - CtxMemMgr_User1 - INFO - Session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7: Active history token count ~260 / 30000
2025-04-23 13:06:22,350 - CtxMemMgr_User1 - INFO - Saving active session context for f3914f6b-fcfa-4e95-b3f8-dad44a2862f7 to /app/data/sessions/1/f3914f6b-fcfa-4e95-b3f8-dad44a2862f7/context.json
2025-04-23 13:06:22,352 - CtxMemMgr_User1 - INFO - Successfully saved context for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7
2025-04-23 13:06:34,417 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:06:34,634 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:06:34,636 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:06:44,347 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:06:44,565 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:06:44,567 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:06:44,577 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 13:06:54,555 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:06:54,768 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:06:54,770 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:06:54,779 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 13:06:54,779 - api.endpoints.chat - INFO - Received chat message from user 1: Search the web for the latest AI developments...
2025-04-23 13:06:54,780 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 13:06:54,782 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 13:06:54,782 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 13:06:54,783 - components.prompt_builder - INFO - Constructing prompt for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7, user 1, depth 0
2025-04-23 13:06:54,783 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Search the web for the latest AI developments'
2025-04-23 13:06:54,783 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 13:06:54,783 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 13:06:54,783 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 13:06:54,784 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 13:06:54,784 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 13:06:56,670 - CtxMemMgr_User1 - INFO - Stored turn fd1bc940-82fe-4fd4-a8c4-e4e081315bc1 for active session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7
2025-04-23 13:06:56,670 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7: '...'
2025-04-23 13:06:56,671 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 13:06:56,671 - CtxMemMgr_User1 - INFO - Session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7: Active history token count ~271 / 30000
2025-04-23 13:06:56,672 - CtxMemMgr_User1 - INFO - Saving active session context for f3914f6b-fcfa-4e95-b3f8-dad44a2862f7 to /app/data/sessions/1/f3914f6b-fcfa-4e95-b3f8-dad44a2862f7/context.json
2025-04-23 13:06:56,674 - CtxMemMgr_User1 - INFO - Successfully saved context for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7
2025-04-23 13:06:56,675 - ActionHandler_User1 - INFO - Processing LLM response for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7, user 1
2025-04-23 13:06:56,675 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7.
2025-04-23 13:06:56,676 - CtxMemMgr_User1 - INFO - Stored turn 00d810cd-95fd-425b-8ec1-4c19f6e0895d for active session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7
2025-04-23 13:06:56,676 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7: '...'
2025-04-23 13:06:57,111 - CtxMemMgr_User1 - INFO - Session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7: Active history token count ~483 / 30000
2025-04-23 13:06:57,112 - CtxMemMgr_User1 - INFO - Saving active session context for f3914f6b-fcfa-4e95-b3f8-dad44a2862f7 to /app/data/sessions/1/f3914f6b-fcfa-4e95-b3f8-dad44a2862f7/context.json
2025-04-23 13:06:57,114 - CtxMemMgr_User1 - INFO - Successfully saved context for session f3914f6b-fcfa-4e95-b3f8-dad44a2862f7
2025-04-23 13:28:45,928 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 13:28:45,929 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 13:28:45,929 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 13:28:45,942 - core.database.connection - INFO - Database connection successful!
2025-04-23 13:28:45,942 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 13:28:45,944 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 13:28:45,948 - core.database.connection - INFO - Default user already exists.
2025-04-23 13:28:45,962 - app - INFO - Auth blueprint registered successfully
2025-04-23 13:28:45,975 - app - ERROR - Error registering blueprints: unmatched '}' (action_handler.py, line 501)
Traceback (most recent call last):
  File "/app/app.py", line 95, in register_blueprints
    import api.endpoints.chat
  File "/app/api/endpoints/chat.py", line 30, in <module>
    from managers.session import get_user_session_manager
  File "/app/managers/session.py", line 8, in <module>
    from .user_session_manager import UserSessionManager
  File "/app/managers/user_session_manager.py", line 13, in <module>
    from .conversation_manager import ConversationManager
  File "/app/managers/conversation_manager.py", line 23, in <module>
    from components.action_handler import ActionHandler
  File "/app/components/action_handler.py", line 501
    })
    ^
SyntaxError: unmatched '}'
2025-04-23 13:28:45,980 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 13:40:39,641 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:40:39,857 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:40:39,860 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:42:47,204 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:42:47,462 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:42:47,465 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:45:24,564 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 13:45:24,781 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 13:45:24,783 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 13:52:44,795 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 13:52:44,795 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 13:52:44,795 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 13:52:44,808 - core.database.connection - INFO - Database connection successful!
2025-04-23 13:52:44,808 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 13:52:44,810 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 13:52:44,814 - core.database.connection - INFO - Default user already exists.
2025-04-23 13:52:44,828 - app - INFO - Auth blueprint registered successfully
2025-04-23 13:52:44,841 - app - ERROR - Error registering blueprints: unmatched '}' (action_handler.py, line 501)
Traceback (most recent call last):
  File "/app/app.py", line 95, in register_blueprints
    import api.endpoints.chat
  File "/app/api/endpoints/chat.py", line 30, in <module>
    from managers.session import get_user_session_manager
  File "/app/managers/session.py", line 8, in <module>
    from .user_session_manager import UserSessionManager
  File "/app/managers/user_session_manager.py", line 13, in <module>
    from .conversation_manager import ConversationManager
  File "/app/managers/conversation_manager.py", line 23, in <module>
    from components.action_handler import ActionHandler
  File "/app/components/action_handler.py", line 501
    })
    ^
SyntaxError: unmatched '}'
2025-04-23 13:52:44,847 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 14:05:47,579 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:05:47,801 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:05:47,804 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:06:08,221 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:06:08,479 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:06:08,481 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:07:45,374 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 14:07:45,374 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 14:07:45,375 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 14:07:45,411 - core.database.connection - INFO - Database connection successful!
2025-04-23 14:07:45,412 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 14:07:45,414 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 14:07:45,420 - core.database.connection - INFO - Default user already exists.
2025-04-23 14:07:45,436 - app - INFO - Auth blueprint registered successfully
2025-04-23 14:07:45,454 - app - ERROR - Error registering blueprints: unmatched '}' (action_handler.py, line 501)
Traceback (most recent call last):
  File "/app/app.py", line 95, in register_blueprints
    import api.endpoints.chat
  File "/app/api/endpoints/chat.py", line 30, in <module>
    from managers.session import get_user_session_manager
  File "/app/managers/session.py", line 8, in <module>
    from .user_session_manager import UserSessionManager
  File "/app/managers/user_session_manager.py", line 13, in <module>
    from .conversation_manager import ConversationManager
  File "/app/managers/conversation_manager.py", line 23, in <module>
    from components.action_handler import ActionHandler
  File "/app/components/action_handler.py", line 501
    })
    ^
SyntaxError: unmatched '}'
2025-04-23 14:07:45,459 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 14:09:29,040 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:09:29,246 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:09:29,248 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:09:47,623 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:09:47,873 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:09:47,875 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:10:01,532 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:10:01,764 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:10:01,766 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:26:01,357 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 14:26:01,357 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 14:26:01,357 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 14:26:01,371 - core.database.connection - INFO - Database connection successful!
2025-04-23 14:26:01,371 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 14:26:01,373 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 14:26:01,378 - core.database.connection - INFO - Default user already exists.
2025-04-23 14:26:01,391 - app - INFO - Auth blueprint registered successfully
2025-04-23 14:26:01,407 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 14:26:01,407 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 14:26:01,407 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 14:26:01,407 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 14:26:01,407 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 14:26:01,407 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 14:26:01,408 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 14:26:01,408 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 14:26:01,412 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 14:26:01,413 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 14:26:01,413 - components.action_handler - INFO - Web search functionality is available
2025-04-23 14:26:01,413 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 14:26:01,413 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 14:26:01,414 - app - INFO - Chat blueprint registered successfully
2025-04-23 14:26:01,415 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 14:26:01,420 - app - INFO - Session blueprint registered successfully
2025-04-23 14:26:01,421 - app - INFO - Memory blueprint registered successfully
2025-04-23 14:26:01,424 - app - INFO - System Messages blueprint registered successfully
2025-04-23 14:26:01,425 - app - INFO - Basic endpoints registered successfully
2025-04-23 14:26:01,429 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 14:28:55,062 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:28:55,289 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:28:55,291 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:28:55,304 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:29:05,560 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:29:05,777 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:29:05,779 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:29:05,790 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:29:05,800 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:29:23,816 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:29:24,060 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:29:24,062 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:29:24,072 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:29:24,072 - api.endpoints.chat - INFO - Received chat message from user 1: Tell me a short joke...
2025-04-23 14:29:24,072 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 14:29:24,073 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 14:29:24,073 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 14:29:24,073 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: test-session-125
2025-04-23 14:29:24,074 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 14:29:24,074 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 14:29:24,074 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 14:29:24,074 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 14:29:24,076 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 14:29:24,076 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 14:29:24,076 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 14:29:24,076 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 14:29:24,076 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 14:29:24,077 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: test-session-125
2025-04-23 14:29:24,077 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 14:29:24,077 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 14:29:24,080 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:29:24,081 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 14:29:24,081 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 14:29:24,082 - components.prompt_builder - INFO - Constructing prompt for session test-session-125, user 1, depth 0
2025-04-23 14:29:24,082 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 14:29:24,082 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Tell me a short joke'
2025-04-23 14:29:24,082 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 14:29:24,082 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 14:29:24,082 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 14:29:24,082 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 14:29:24,083 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 14:29:24,083 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 14:29:26,718 - CtxMemMgr_User1 - INFO - Loading session test-session-125 for processing assistant message
2025-04-23 14:29:26,719 - CtxMemMgr_User1 - INFO - Loading session context for test-session-125 from /app/data/sessions/1/test-session-125/context.json
2025-04-23 14:29:26,723 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/test-session-125/context.json not found. Initializing empty context for new session test-session-125.
2025-04-23 14:29:26,726 - CtxMemMgr_User1 - INFO - Stored turn 8b1ee235-c738-4473-b40d-a9cf49547d6b for active session test-session-125
2025-04-23 14:29:26,729 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session test-session-125: '...'
2025-04-23 14:29:26,731 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 14:29:26,732 - CtxMemMgr_User1 - INFO - Session test-session-125: Active history token count ~5 / 30000
2025-04-23 14:29:26,733 - CtxMemMgr_User1 - INFO - Saving active session context for test-session-125 to /app/data/sessions/1/test-session-125/context.json
2025-04-23 14:29:26,745 - CtxMemMgr_User1 - INFO - Successfully saved context for session test-session-125
2025-04-23 14:29:26,747 - ActionHandler_User1 - INFO - Processing LLM response for session test-session-125, user 1
2025-04-23 14:29:26,749 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session test-session-125.
2025-04-23 14:29:26,751 - CtxMemMgr_User1 - INFO - Stored turn 05d857e7-98e3-44a1-bf9a-f1079806b35f for active session test-session-125
2025-04-23 14:29:26,751 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session test-session-125: '...'
2025-04-23 14:29:27,364 - CtxMemMgr_User1 - INFO - Session test-session-125: Active history token count ~277 / 30000
2025-04-23 14:29:27,365 - CtxMemMgr_User1 - INFO - Saving active session context for test-session-125 to /app/data/sessions/1/test-session-125/context.json
2025-04-23 14:29:27,370 - CtxMemMgr_User1 - INFO - Successfully saved context for session test-session-125
2025-04-23 14:35:37,629 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 14:35:37,629 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 14:35:37,629 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 14:35:37,642 - core.database.connection - INFO - Database connection successful!
2025-04-23 14:35:37,642 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 14:35:37,644 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 14:35:37,649 - core.database.connection - INFO - Default user already exists.
2025-04-23 14:35:37,664 - app - INFO - Auth blueprint registered successfully
2025-04-23 14:35:37,675 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 14:35:37,675 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 14:35:37,675 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 14:35:37,675 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 14:35:37,675 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 14:35:37,675 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 14:35:37,676 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 14:35:37,676 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 14:35:37,680 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 14:35:37,680 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 14:35:37,680 - components.action_handler - INFO - Web search functionality is available
2025-04-23 14:35:37,681 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 14:35:37,681 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 14:35:37,682 - app - INFO - Chat blueprint registered successfully
2025-04-23 14:35:37,683 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 14:35:37,687 - app - INFO - Session blueprint registered successfully
2025-04-23 14:35:37,688 - app - INFO - Memory blueprint registered successfully
2025-04-23 14:35:37,691 - app - INFO - System Messages blueprint registered successfully
2025-04-23 14:35:37,692 - app - INFO - Basic endpoints registered successfully
2025-04-23 14:35:37,696 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 14:37:26,173 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:37:26,392 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:37:26,396 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:37:26,407 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:37:26,408 - api.endpoints.system_messages - ERROR - Error creating system messages table: (sqlite3.OperationalError) near "INDEX": syntax error
[SQL: 
                CREATE TABLE IF NOT EXISTS system_messages (
                    id VARCHAR(255) PRIMARY KEY,
                    timestamp VARCHAR(255) NOT NULL,
                    session_id VARCHAR(255) NOT NULL,
                    message_type VARCHAR(255) NOT NULL,
                    content TEXT NOT NULL,
                    INDEX (session_id)
                )
            ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-23 14:39:09,717 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 14:39:09,718 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 14:39:09,718 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 14:39:09,750 - core.database.connection - INFO - Database connection successful!
2025-04-23 14:39:09,751 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 14:39:09,753 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 14:39:09,758 - core.database.connection - INFO - Default user already exists.
2025-04-23 14:39:09,774 - app - INFO - Auth blueprint registered successfully
2025-04-23 14:39:09,787 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 14:39:09,787 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 14:39:09,787 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 14:39:09,787 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 14:39:09,787 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 14:39:09,788 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 14:39:09,788 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 14:39:09,788 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 14:39:09,792 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 14:39:09,793 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 14:39:09,793 - components.action_handler - INFO - Web search functionality is available
2025-04-23 14:39:09,793 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 14:39:09,794 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 14:39:09,794 - app - INFO - Chat blueprint registered successfully
2025-04-23 14:39:09,796 - root - INFO - Docker environment detected, using standard Docker path.
2025-04-23 14:39:09,802 - app - INFO - Session blueprint registered successfully
2025-04-23 14:39:09,803 - app - INFO - Memory blueprint registered successfully
2025-04-23 14:39:09,806 - app - INFO - System Messages blueprint registered successfully
2025-04-23 14:39:09,807 - app - INFO - Basic endpoints registered successfully
2025-04-23 14:39:09,811 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 14:40:43,617 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:40:43,837 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:40:43,839 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:40:43,852 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:40:43,857 - api.endpoints.system_messages - ERROR - Error creating system messages table: (sqlite3.OperationalError) near "INDEX": syntax error
[SQL: 
                CREATE TABLE IF NOT EXISTS system_messages (
                    id VARCHAR(255) PRIMARY KEY,
                    timestamp VARCHAR(255) NOT NULL,
                    session_id VARCHAR(255) NOT NULL,
                    message_type VARCHAR(255) NOT NULL,
                    content TEXT NOT NULL,
                    INDEX idx_system_messages_session_id (session_id)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci
            ]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-04-23 14:44:39,987 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 14:44:39,988 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 14:44:39,988 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 14:44:40,001 - core.database.connection - INFO - Database connection successful!
2025-04-23 14:44:40,001 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 14:44:40,003 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 14:44:40,007 - core.database.connection - INFO - Default user already exists.
2025-04-23 14:44:40,020 - app - INFO - Auth blueprint registered successfully
2025-04-23 14:44:40,030 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 14:44:40,030 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 14:44:40,030 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 14:44:40,030 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 14:44:40,031 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 14:44:40,031 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 14:44:40,031 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 14:44:40,031 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 14:44:40,035 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 14:44:40,035 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 14:44:40,035 - components.action_handler - INFO - Web search functionality is available
2025-04-23 14:44:40,036 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 14:44:40,036 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 14:44:40,036 - app - INFO - Chat blueprint registered successfully
2025-04-23 14:44:40,039 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 14:44:40,040 - app - INFO - Session blueprint registered successfully
2025-04-23 14:44:40,041 - app - INFO - Memory blueprint registered successfully
2025-04-23 14:44:40,043 - app - INFO - System Messages blueprint registered successfully
2025-04-23 14:44:40,044 - app - INFO - Basic endpoints registered successfully
2025-04-23 14:44:40,047 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 14:45:55,324 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:45:55,565 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:45:55,567 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:45:55,579 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:49:34,128 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:49:34,346 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:49:34,348 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:49:34,358 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:49:34,362 - api.endpoints.system_messages - INFO - Stored system message sys_0cd706dc-76f7-468b-bb23-d442a6e84b0e in database
2025-04-23 14:49:34,372 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:49:54,007 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:49:54,008 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:49:54,008 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:49:54,011 - core.auth.strategies - WARNING - Authentication failed: User 'testuser1' not found
2025-04-23 14:49:54,016 - api.endpoints.auth - WARNING - Login failed for user testuser1
2025-04-23 14:49:54,027 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:49:54,232 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser3'
2025-04-23 14:49:54,233 - api.endpoints.auth - WARNING - Login failed for user testuser3
2025-04-23 14:49:54,234 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser2'
2025-04-23 14:49:54,234 - api.endpoints.auth - WARNING - Login failed for user testuser2
2025-04-23 14:49:54,244 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:49:54,244 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:49:54,245 - core.auth.strategies - INFO - Successfully registered new user: testuser1
2025-04-23 14:49:54,247 - api.endpoints.auth - ERROR - Error registering user: User with username 'testuser2' already exists
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    user = auth_service.register_user(user_data)
  File "/app/core/auth/service.py", line 64, in register_user
    raise ValueError(f"User with username '{user_data.username}' already exists")
ValueError: User with username 'testuser2' already exists
2025-04-23 14:49:54,247 - api.endpoints.auth - ERROR - Error registering user: User with username 'testuser3' already exists
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    user = auth_service.register_user(user_data)
  File "/app/core/auth/service.py", line 64, in register_user
    raise ValueError(f"User with username '{user_data.username}' already exists")
ValueError: User with username 'testuser3' already exists
2025-04-23 14:49:54,248 - api.endpoints.auth - INFO - User testuser1 registered successfully
2025-04-23 14:49:54,260 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:49:54,260 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:49:54,260 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:49:54,470 - core.auth.strategies - INFO - Authentication successful for user: testuser1
2025-04-23 14:49:54,470 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser3'
2025-04-23 14:49:54,470 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser2'
2025-04-23 14:49:54,472 - api.endpoints.auth - WARNING - Login failed for user testuser3
2025-04-23 14:49:54,472 - api.endpoints.auth - WARNING - Login failed for user testuser2
2025-04-23 14:49:54,473 - api.endpoints.auth - INFO - User testuser1 logged in successfully
2025-04-23 14:49:54,486 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:49:54,487 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:49:54,487 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:49:54,490 - api.endpoints.system_messages - INFO - Stored system message sys_da00bdad-848e-4a38-802b-5863aef7b750 in database
2025-04-23 14:49:54,491 - api.endpoints.system_messages - INFO - Stored system message sys_318f7b43-d508-4d75-8295-7f487acae973 in database
2025-04-23 14:49:54,491 - api.endpoints.system_messages - INFO - Stored system message sys_9fadf71b-4d4e-4f1c-94d6-4f6858afed3a in database
2025-04-23 14:49:56,514 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:49:56,515 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:49:56,515 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:49:56,525 - api.endpoints.system_messages - INFO - Updated system message sys_da00bdad-848e-4a38-802b-5863aef7b750 in database
2025-04-23 14:49:56,531 - api.endpoints.system_messages - INFO - Updated system message sys_318f7b43-d508-4d75-8295-7f487acae973 in database
2025-04-23 14:49:56,531 - api.endpoints.system_messages - INFO - Updated system message sys_9fadf71b-4d4e-4f1c-94d6-4f6858afed3a in database
2025-04-23 14:49:56,538 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:49:56,543 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:49:56,544 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:50:06,975 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:50:06,976 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:50:06,977 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:50:07,233 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser2'
2025-04-23 14:50:07,234 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser3'
2025-04-23 14:50:07,234 - api.endpoints.auth - WARNING - Login failed for user testuser2
2025-04-23 14:50:07,234 - api.endpoints.auth - WARNING - Login failed for user testuser3
2025-04-23 14:50:07,236 - core.auth.strategies - INFO - Authentication successful for user: testuser1
2025-04-23 14:50:07,238 - api.endpoints.auth - INFO - User testuser1 logged in successfully
2025-04-23 14:50:07,246 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:50:07,246 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:50:07,248 - api.endpoints.auth - ERROR - Error registering user: User with username 'testuser3' already exists
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    user = auth_service.register_user(user_data)
  File "/app/core/auth/service.py", line 64, in register_user
    raise ValueError(f"User with username '{user_data.username}' already exists")
ValueError: User with username 'testuser3' already exists
2025-04-23 14:50:07,248 - api.endpoints.auth - ERROR - Error registering user: User with username 'testuser2' already exists
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    user = auth_service.register_user(user_data)
  File "/app/core/auth/service.py", line 64, in register_user
    raise ValueError(f"User with username '{user_data.username}' already exists")
ValueError: User with username 'testuser2' already exists
2025-04-23 14:50:07,249 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:50:07,253 - api.endpoints.system_messages - INFO - Stored system message sys_a15c6c7d-3a79-4baa-8872-4c9d0b60db3a in database
2025-04-23 14:50:07,259 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:50:07,259 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:50:07,479 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser2'
2025-04-23 14:50:07,479 - api.endpoints.auth - WARNING - Login failed for user testuser2
2025-04-23 14:50:07,480 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser3'
2025-04-23 14:50:07,480 - api.endpoints.auth - WARNING - Login failed for user testuser3
2025-04-23 14:50:07,492 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:50:07,492 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:50:07,496 - api.endpoints.system_messages - INFO - Stored system message sys_1f120050-d9af-4225-a8ce-09420eedd813 in database
2025-04-23 14:50:07,497 - api.endpoints.system_messages - INFO - Stored system message sys_84136bb9-c37c-496b-ac64-31038848febd in database
2025-04-23 14:50:09,271 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:50:09,275 - api.endpoints.system_messages - INFO - Updated system message sys_a15c6c7d-3a79-4baa-8872-4c9d0b60db3a in database
2025-04-23 14:50:09,287 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:50:09,510 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:50:09,513 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:50:09,516 - api.endpoints.system_messages - INFO - Updated system message sys_84136bb9-c37c-496b-ac64-31038848febd in database
2025-04-23 14:50:09,518 - api.endpoints.system_messages - INFO - Updated system message sys_1f120050-d9af-4225-a8ce-09420eedd813 in database
2025-04-23 14:50:09,526 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:50:09,526 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:55:25,875 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:55:26,101 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:55:26,103 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:55:26,116 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:55:26,119 - api.endpoints.system_messages - INFO - Stored system message sys_b91c65e2-731a-4972-9082-0c7b46b4acb6 in database
2025-04-23 14:55:26,128 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:55:41,786 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:55:42,026 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:55:42,028 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:55:42,041 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:55:42,048 - api.endpoints.system_messages - INFO - Stored system message sys_6d3ab869-b130-48ad-adf3-ad58945c835d in database
2025-04-23 14:55:42,075 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:55:42,077 - api.endpoints.system_messages - INFO - Updated system message sys_6d3ab869-b130-48ad-adf3-ad58945c835d in database
2025-04-23 14:55:42,087 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:55:42,090 - api.endpoints.system_messages - INFO - Updated system message sys_6d3ab869-b130-48ad-adf3-ad58945c835d in database
2025-04-23 14:55:55,370 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:55:55,591 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:55:55,593 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:55:55,606 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:55:55,608 - api.endpoints.system_messages - INFO - Stored system message sys_93d937e9-0790-45cd-a99b-6c1db0f8acf7 in database
2025-04-23 14:55:55,617 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:55:55,619 - api.endpoints.system_messages - INFO - Stored system message sys_39da75d9-a1b7-42b2-8772-bb868f233f35 in database
2025-04-23 14:55:55,627 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:55:55,629 - api.endpoints.system_messages - INFO - Stored system message sys_59fe2769-7ba1-4692-834d-d907b6754c80 in database
2025-04-23 14:55:55,638 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:19,811 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:19,812 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:19,812 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:19,813 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:20,035 - core.auth.strategies - INFO - Authentication successful for user: testuser1
2025-04-23 14:56:20,035 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser3'
2025-04-23 14:56:20,036 - api.endpoints.auth - WARNING - Login failed for user testuser3
2025-04-23 14:56:20,037 - api.endpoints.auth - INFO - User testuser1 logged in successfully
2025-04-23 14:56:20,037 - core.auth.strategies - INFO - Authentication successful for user: testuser4
2025-04-23 14:56:20,039 - api.endpoints.auth - INFO - User testuser4 logged in successfully
2025-04-23 14:56:20,044 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser2'
2025-04-23 14:56:20,045 - api.endpoints.auth - WARNING - Login failed for user testuser2
2025-04-23 14:56:20,048 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:20,048 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:20,048 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:20,050 - api.endpoints.auth - ERROR - Error registering user: User with username 'testuser3' already exists
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    user = auth_service.register_user(user_data)
  File "/app/core/auth/service.py", line 64, in register_user
    raise ValueError(f"User with username '{user_data.username}' already exists")
ValueError: User with username 'testuser3' already exists
2025-04-23 14:56:20,053 - api.endpoints.system_messages - INFO - Stored system message sys_4053f7d6-c4f2-4d92-8df0-70cc28457554 in database
2025-04-23 14:56:20,054 - api.endpoints.system_messages - INFO - Stored system message sys_24c0883f-2985-4d56-be97-c2f24a9518f3 in database
2025-04-23 14:56:20,054 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:20,055 - api.endpoints.auth - ERROR - Error registering user: User with username 'testuser2' already exists
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    user = auth_service.register_user(user_data)
  File "/app/core/auth/service.py", line 64, in register_user
    raise ValueError(f"User with username '{user_data.username}' already exists")
ValueError: User with username 'testuser2' already exists
2025-04-23 14:56:20,059 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:20,063 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:20,268 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser3'
2025-04-23 14:56:20,269 - api.endpoints.auth - WARNING - Login failed for user testuser3
2025-04-23 14:56:20,272 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser2'
2025-04-23 14:56:20,273 - api.endpoints.auth - WARNING - Login failed for user testuser2
2025-04-23 14:56:20,279 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:20,282 - api.endpoints.system_messages - INFO - Stored system message sys_d29a5bd0-cb01-41bf-a642-6a51fd477bfb in database
2025-04-23 14:56:20,282 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:20,285 - api.endpoints.system_messages - INFO - Stored system message sys_5c8b7a3e-be3b-481a-ac12-52aee07784a9 in database
2025-04-23 14:56:22,070 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:22,075 - api.endpoints.system_messages - INFO - Updated system message sys_4053f7d6-c4f2-4d92-8df0-70cc28457554 in database
2025-04-23 14:56:23,303 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:23,308 - api.endpoints.system_messages - INFO - Updated system message sys_5c8b7a3e-be3b-481a-ac12-52aee07784a9 in database
2025-04-23 14:56:24,093 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:24,098 - api.endpoints.system_messages - INFO - Updated system message sys_4053f7d6-c4f2-4d92-8df0-70cc28457554 in database
2025-04-23 14:56:24,107 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:24,300 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:24,305 - api.endpoints.system_messages - INFO - Updated system message sys_d29a5bd0-cb01-41bf-a642-6a51fd477bfb in database
2025-04-23 14:56:25,076 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:25,083 - api.endpoints.system_messages - INFO - Updated system message sys_24c0883f-2985-4d56-be97-c2f24a9518f3 in database
2025-04-23 14:56:26,324 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:26,329 - api.endpoints.system_messages - INFO - Updated system message sys_5c8b7a3e-be3b-481a-ac12-52aee07784a9 in database
2025-04-23 14:56:26,340 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:28,322 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:28,333 - api.endpoints.system_messages - INFO - Updated system message sys_d29a5bd0-cb01-41bf-a642-6a51fd477bfb in database
2025-04-23 14:56:28,347 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:30,100 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:30,106 - api.endpoints.system_messages - INFO - Updated system message sys_24c0883f-2985-4d56-be97-c2f24a9518f3 in database
2025-04-23 14:56:30,115 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:37,186 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:37,187 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:37,187 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:37,188 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:37,415 - core.auth.strategies - INFO - Authentication successful for user: testuser4
2025-04-23 14:56:37,417 - api.endpoints.auth - INFO - User testuser4 logged in successfully
2025-04-23 14:56:37,417 - core.auth.strategies - INFO - Authentication successful for user: testuser1
2025-04-23 14:56:37,417 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser3'
2025-04-23 14:56:37,419 - api.endpoints.auth - WARNING - Login failed for user testuser3
2025-04-23 14:56:37,419 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser2'
2025-04-23 14:56:37,420 - api.endpoints.auth - INFO - User testuser1 logged in successfully
2025-04-23 14:56:37,420 - api.endpoints.auth - WARNING - Login failed for user testuser2
2025-04-23 14:56:37,428 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:37,428 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:37,430 - api.endpoints.auth - ERROR - Error registering user: User with username 'testuser3' already exists
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    user = auth_service.register_user(user_data)
  File "/app/core/auth/service.py", line 64, in register_user
    raise ValueError(f"User with username '{user_data.username}' already exists")
ValueError: User with username 'testuser3' already exists
2025-04-23 14:56:37,431 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:37,431 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:37,433 - api.endpoints.system_messages - INFO - Stored system message sys_cd0d607f-1832-489b-9807-1a19dfdb75b3 in database
2025-04-23 14:56:37,433 - api.endpoints.auth - ERROR - Error registering user: User with username 'testuser2' already exists
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    user = auth_service.register_user(user_data)
  File "/app/core/auth/service.py", line 64, in register_user
    raise ValueError(f"User with username '{user_data.username}' already exists")
ValueError: User with username 'testuser2' already exists
2025-04-23 14:56:37,434 - api.endpoints.system_messages - INFO - Stored system message sys_e3a08c44-05d9-4124-95f3-28e158f2f7b7 in database
2025-04-23 14:56:37,440 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:37,442 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:56:37,676 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser3'
2025-04-23 14:56:37,677 - api.endpoints.auth - WARNING - Login failed for user testuser3
2025-04-23 14:56:37,680 - core.auth.strategies - WARNING - Authentication failed: Invalid password for user 'testuser2'
2025-04-23 14:56:37,680 - api.endpoints.auth - WARNING - Login failed for user testuser2
2025-04-23 14:56:37,687 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:37,689 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:37,690 - api.endpoints.system_messages - INFO - Stored system message sys_da3b78fb-c27b-476f-a8bc-4529aa9fe0ad in database
2025-04-23 14:56:37,692 - api.endpoints.system_messages - INFO - Stored system message sys_3f7755fd-4e8d-4775-b3bf-2ad9eefec831 in database
2025-04-23 14:56:39,459 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:39,464 - api.endpoints.system_messages - INFO - Updated system message sys_e3a08c44-05d9-4124-95f3-28e158f2f7b7 in database
2025-04-23 14:56:40,711 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:40,719 - api.endpoints.system_messages - INFO - Updated system message sys_3f7755fd-4e8d-4775-b3bf-2ad9eefec831 in database
2025-04-23 14:56:41,480 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:41,491 - api.endpoints.system_messages - INFO - Updated system message sys_e3a08c44-05d9-4124-95f3-28e158f2f7b7 in database
2025-04-23 14:56:41,504 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:41,726 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:41,730 - api.endpoints.system_messages - INFO - Updated system message sys_da3b78fb-c27b-476f-a8bc-4529aa9fe0ad in database
2025-04-23 14:56:42,452 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:42,462 - api.endpoints.system_messages - INFO - Updated system message sys_cd0d607f-1832-489b-9807-1a19dfdb75b3 in database
2025-04-23 14:56:43,741 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:43,746 - api.endpoints.system_messages - INFO - Updated system message sys_3f7755fd-4e8d-4775-b3bf-2ad9eefec831 in database
2025-04-23 14:56:43,758 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:45,750 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:45,755 - api.endpoints.system_messages - INFO - Updated system message sys_da3b78fb-c27b-476f-a8bc-4529aa9fe0ad in database
2025-04-23 14:56:45,765 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:47,494 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:56:47,503 - api.endpoints.system_messages - INFO - Updated system message sys_cd0d607f-1832-489b-9807-1a19dfdb75b3 in database
2025-04-23 14:56:47,520 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:58:15,738 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:58:15,956 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:58:15,958 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:58:15,970 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:58:15,970 - api.endpoints.chat - INFO - Received chat message from user 1: What is the latest news about artificial intellige...
2025-04-23 14:58:15,970 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 14:58:15,971 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 14:58:15,971 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 14:58:15,971 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: chat-integration-test-1745420295
2025-04-23 14:58:15,972 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 14:58:15,972 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 14:58:15,972 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 14:58:15,972 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 14:58:15,974 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 14:58:15,974 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 14:58:15,974 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 14:58:15,974 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 14:58:15,974 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 14:58:15,974 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: chat-integration-test-1745420295
2025-04-23 14:58:15,975 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 14:58:15,975 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 14:58:15,977 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:58:15,980 - api.endpoints.system_messages - INFO - Stored system message sys_5e491377-5359-4417-8f36-0d7b67bf7d85 in database
2025-04-23 14:58:15,981 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 14:58:15,981 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 14:58:15,981 - components.prompt_builder - INFO - Constructing prompt for session chat-integration-test-1745420295, user 1, depth 0
2025-04-23 14:58:15,982 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 14:58:15,982 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'What is the latest news about artificial intelligence?'
2025-04-23 14:58:15,982 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 14:58:15,982 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 14:58:15,982 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 14:58:15,982 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 14:58:15,983 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 14:58:15,983 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 14:58:18,310 - CtxMemMgr_User1 - INFO - Loading session chat-integration-test-1745420295 for processing assistant message
2025-04-23 14:58:18,311 - CtxMemMgr_User1 - INFO - Loading session context for chat-integration-test-1745420295 from /app/data/sessions/1/chat-integration-test-1745420295/context.json
2025-04-23 14:58:18,312 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/chat-integration-test-1745420295/context.json not found. Initializing empty context for new session chat-integration-test-1745420295.
2025-04-23 14:58:18,313 - CtxMemMgr_User1 - INFO - Stored turn e288ce27-c76d-4f4b-afe3-c482728f44c8 for active session chat-integration-test-1745420295
2025-04-23 14:58:18,313 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session chat-integration-test-1745420295: '...'
2025-04-23 14:58:18,315 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 14:58:18,317 - CtxMemMgr_User1 - INFO - Session chat-integration-test-1745420295: Active history token count ~13 / 30000
2025-04-23 14:58:18,317 - CtxMemMgr_User1 - INFO - Saving active session context for chat-integration-test-1745420295 to /app/data/sessions/1/chat-integration-test-1745420295/context.json
2025-04-23 14:58:18,321 - CtxMemMgr_User1 - INFO - Successfully saved context for session chat-integration-test-1745420295
2025-04-23 14:58:18,321 - ActionHandler_User1 - INFO - Processing LLM response for session chat-integration-test-1745420295, user 1
2025-04-23 14:58:18,322 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session chat-integration-test-1745420295.
2025-04-23 14:58:18,322 - CtxMemMgr_User1 - INFO - Stored turn c3932fbd-36cb-4f4c-a44a-a3aa33dfdbb6 for active session chat-integration-test-1745420295
2025-04-23 14:58:18,323 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session chat-integration-test-1745420295: '...'
2025-04-23 14:58:19,016 - CtxMemMgr_User1 - INFO - Session chat-integration-test-1745420295: Active history token count ~260 / 30000
2025-04-23 14:58:19,016 - CtxMemMgr_User1 - INFO - Saving active session context for chat-integration-test-1745420295 to /app/data/sessions/1/chat-integration-test-1745420295/context.json
2025-04-23 14:58:19,019 - CtxMemMgr_User1 - INFO - Successfully saved context for session chat-integration-test-1745420295
2025-04-23 14:58:21,037 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:59:18,305 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 14:59:18,521 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 14:59:18,523 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 14:59:18,535 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:59:18,535 - api.endpoints.chat - INFO - Received chat message from user 1: Search the web for: latest AI developments 2025...
2025-04-23 14:59:18,535 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: tavily-search-test-1745420358
2025-04-23 14:59:18,536 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 14:59:18,536 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 14:59:18,536 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 14:59:18,537 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 14:59:18,537 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 14:59:18,538 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 14:59:18,538 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 14:59:18,538 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 14:59:18,538 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: tavily-search-test-1745420358
2025-04-23 14:59:18,538 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 14:59:18,538 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 14:59:18,540 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:59:18,542 - api.endpoints.system_messages - INFO - Stored system message sys_8e3adad4-9220-4663-ac69-fcbd14960d9d in database
2025-04-23 14:59:18,544 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 14:59:18,544 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 14:59:18,544 - components.prompt_builder - INFO - Constructing prompt for session tavily-search-test-1745420358, user 1, depth 0
2025-04-23 14:59:18,544 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 14:59:18,544 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Search the web for: latest AI developments 2025'
2025-04-23 14:59:18,544 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 14:59:18,544 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 14:59:18,544 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 14:59:18,544 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 14:59:18,545 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 14:59:18,545 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 14:59:20,695 - CtxMemMgr_User1 - INFO - Loading session tavily-search-test-1745420358 for processing assistant message
2025-04-23 14:59:20,696 - CtxMemMgr_User1 - INFO - Loading session context for tavily-search-test-1745420358 from /app/data/sessions/1/tavily-search-test-1745420358/context.json
2025-04-23 14:59:20,696 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/tavily-search-test-1745420358/context.json not found. Initializing empty context for new session tavily-search-test-1745420358.
2025-04-23 14:59:20,697 - CtxMemMgr_User1 - INFO - Stored turn 919e03c1-d95a-492e-a516-800c0ab1e833 for active session tavily-search-test-1745420358
2025-04-23 14:59:20,697 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session tavily-search-test-1745420358: '...'
2025-04-23 14:59:20,697 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 14:59:20,698 - CtxMemMgr_User1 - INFO - Session tavily-search-test-1745420358: Active history token count ~11 / 30000
2025-04-23 14:59:20,698 - CtxMemMgr_User1 - INFO - Saving active session context for tavily-search-test-1745420358 to /app/data/sessions/1/tavily-search-test-1745420358/context.json
2025-04-23 14:59:20,702 - CtxMemMgr_User1 - INFO - Successfully saved context for session tavily-search-test-1745420358
2025-04-23 14:59:20,702 - ActionHandler_User1 - INFO - Processing LLM response for session tavily-search-test-1745420358, user 1
2025-04-23 14:59:20,703 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session tavily-search-test-1745420358.
2025-04-23 14:59:20,703 - CtxMemMgr_User1 - INFO - Stored turn 24ef992d-d705-4188-8452-2c1c7995faac for active session tavily-search-test-1745420358
2025-04-23 14:59:20,703 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session tavily-search-test-1745420358: '...'
2025-04-23 14:59:21,182 - CtxMemMgr_User1 - INFO - Session tavily-search-test-1745420358: Active history token count ~242 / 30000
2025-04-23 14:59:21,184 - CtxMemMgr_User1 - INFO - Saving active session context for tavily-search-test-1745420358 to /app/data/sessions/1/tavily-search-test-1745420358/context.json
2025-04-23 14:59:21,193 - CtxMemMgr_User1 - INFO - Successfully saved context for session tavily-search-test-1745420358
2025-04-23 14:59:23,342 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 14:59:33,364 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:00:23,196 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:00:23,423 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:00:23,425 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:05:48,058 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:05:48,314 - core.auth.strategies - INFO - Successfully registered new user: testuser_1745420748
2025-04-23 15:05:48,316 - api.endpoints.auth - INFO - User testuser_1745420748 registered successfully
2025-04-23 15:08:50,176 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:08:50,401 - core.auth.strategies - INFO - Successfully registered new user: testuser_1745420930
2025-04-23 15:08:50,402 - api.endpoints.auth - INFO - User testuser_1745420930 registered successfully
2025-04-23 15:09:08,887 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:09:09,214 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:09:09,216 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:09:20,644 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:09:20,858 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:09:20,861 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:10:05,445 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:10:05,668 - core.auth.strategies - INFO - Successfully registered new user: testuser_1745421005
2025-04-23 15:10:05,669 - api.endpoints.auth - INFO - User testuser_1745421005 registered successfully
2025-04-23 15:10:05,679 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:10:05,888 - core.auth.strategies - INFO - Authentication successful for user: testuser_1745421005
2025-04-23 15:10:05,890 - api.endpoints.auth - INFO - User testuser_1745421005 logged in successfully
2025-04-23 15:10:27,888 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:10:28,115 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:10:28,117 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:10:28,130 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:10:28,130 - api.endpoints.chat - INFO - Received chat message from user 1: Search the web for: latest AI developments...
2025-04-23 15:10:28,130 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: web-search-test-1745421028
2025-04-23 15:10:28,131 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 15:10:28,131 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 15:10:28,132 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 15:10:28,133 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:10:28,133 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 15:10:28,133 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 15:10:28,133 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:10:28,134 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:10:28,134 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: web-search-test-1745421028
2025-04-23 15:10:28,134 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:10:28,134 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:10:28,136 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:10:28,138 - api.endpoints.system_messages - INFO - Stored system message sys_bb153ca4-91b5-4197-bcf4-191036f96f2f in database
2025-04-23 15:10:28,140 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:10:28,141 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 15:10:28,141 - components.prompt_builder - INFO - Constructing prompt for session web-search-test-1745421028, user 1, depth 0
2025-04-23 15:10:28,141 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 15:10:28,141 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Search the web for: latest AI developments'
2025-04-23 15:10:28,141 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 15:10:28,141 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 15:10:28,141 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 15:10:28,142 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 15:10:28,142 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:10:28,143 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 15:10:30,168 - CtxMemMgr_User1 - INFO - Loading session web-search-test-1745421028 for processing assistant message
2025-04-23 15:10:30,169 - CtxMemMgr_User1 - INFO - Loading session context for web-search-test-1745421028 from /app/data/sessions/1/web-search-test-1745421028/context.json
2025-04-23 15:10:30,170 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/web-search-test-1745421028/context.json not found. Initializing empty context for new session web-search-test-1745421028.
2025-04-23 15:10:30,170 - CtxMemMgr_User1 - INFO - Stored turn 517c8266-6129-4030-8cfd-bebfb4ee0394 for active session web-search-test-1745421028
2025-04-23 15:10:30,170 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session web-search-test-1745421028: '...'
2025-04-23 15:10:30,170 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 15:10:30,171 - CtxMemMgr_User1 - INFO - Session web-search-test-1745421028: Active history token count ~10 / 30000
2025-04-23 15:10:30,171 - CtxMemMgr_User1 - INFO - Saving active session context for web-search-test-1745421028 to /app/data/sessions/1/web-search-test-1745421028/context.json
2025-04-23 15:10:30,173 - CtxMemMgr_User1 - INFO - Successfully saved context for session web-search-test-1745421028
2025-04-23 15:10:30,173 - ActionHandler_User1 - INFO - Processing LLM response for session web-search-test-1745421028, user 1
2025-04-23 15:10:30,174 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session web-search-test-1745421028.
2025-04-23 15:10:30,174 - CtxMemMgr_User1 - INFO - Stored turn c76a2559-fc69-434a-b51d-5c0806fc4dcc for active session web-search-test-1745421028
2025-04-23 15:10:30,174 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session web-search-test-1745421028: '...'
2025-04-23 15:10:30,692 - CtxMemMgr_User1 - INFO - Session web-search-test-1745421028: Active history token count ~242 / 30000
2025-04-23 15:10:30,693 - CtxMemMgr_User1 - INFO - Saving active session context for web-search-test-1745421028 to /app/data/sessions/1/web-search-test-1745421028/context.json
2025-04-23 15:10:30,714 - CtxMemMgr_User1 - INFO - Successfully saved context for session web-search-test-1745421028
2025-04-23 15:10:33,736 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:11:15,107 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:11:15,327 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:11:15,329 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:11:15,341 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:11:15,341 - api.endpoints.chat - INFO - Received chat message from user 1: Search the web for: latest generative AI tools 202...
2025-04-23 15:11:15,341 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: web-search-test-1745421075
2025-04-23 15:11:15,342 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 15:11:15,342 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 15:11:15,342 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 15:11:15,343 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:11:15,344 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 15:11:15,344 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 15:11:15,344 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:11:15,344 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:11:15,344 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: web-search-test-1745421075
2025-04-23 15:11:15,344 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:11:15,344 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:11:15,346 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:11:15,348 - api.endpoints.system_messages - INFO - Stored system message sys_0477ad12-0d3f-4dd2-8b6b-9fc86267ffa2 in database
2025-04-23 15:11:15,350 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:11:15,350 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 15:11:15,351 - components.prompt_builder - INFO - Constructing prompt for session web-search-test-1745421075, user 1, depth 0
2025-04-23 15:11:15,351 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 15:11:15,351 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Search the web for: latest generative AI tools 2025'
2025-04-23 15:11:15,351 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 15:11:15,351 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 15:11:15,351 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 15:11:15,351 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 15:11:15,352 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:11:15,352 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 15:11:17,544 - CtxMemMgr_User1 - INFO - Loading session web-search-test-1745421075 for processing assistant message
2025-04-23 15:11:17,545 - CtxMemMgr_User1 - INFO - Loading session context for web-search-test-1745421075 from /app/data/sessions/1/web-search-test-1745421075/context.json
2025-04-23 15:11:17,546 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/web-search-test-1745421075/context.json not found. Initializing empty context for new session web-search-test-1745421075.
2025-04-23 15:11:17,546 - CtxMemMgr_User1 - INFO - Stored turn 844a584f-3eca-418d-ae0c-ddee79751032 for active session web-search-test-1745421075
2025-04-23 15:11:17,546 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session web-search-test-1745421075: '...'
2025-04-23 15:11:17,546 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 15:11:17,547 - CtxMemMgr_User1 - INFO - Session web-search-test-1745421075: Active history token count ~12 / 30000
2025-04-23 15:11:17,547 - CtxMemMgr_User1 - INFO - Saving active session context for web-search-test-1745421075 to /app/data/sessions/1/web-search-test-1745421075/context.json
2025-04-23 15:11:17,549 - CtxMemMgr_User1 - INFO - Successfully saved context for session web-search-test-1745421075
2025-04-23 15:11:17,550 - ActionHandler_User1 - INFO - Processing LLM response for session web-search-test-1745421075, user 1
2025-04-23 15:11:17,550 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session web-search-test-1745421075.
2025-04-23 15:11:17,550 - CtxMemMgr_User1 - INFO - Stored turn 1317eb9d-877c-48a9-aadd-604431f8f4fa for active session web-search-test-1745421075
2025-04-23 15:11:17,551 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session web-search-test-1745421075: '...'
2025-04-23 15:11:18,097 - CtxMemMgr_User1 - INFO - Session web-search-test-1745421075: Active history token count ~246 / 30000
2025-04-23 15:11:18,098 - CtxMemMgr_User1 - INFO - Saving active session context for web-search-test-1745421075 to /app/data/sessions/1/web-search-test-1745421075/context.json
2025-04-23 15:11:18,103 - CtxMemMgr_User1 - INFO - Successfully saved context for session web-search-test-1745421075
2025-04-23 15:11:20,126 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:11:30,152 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:11:42,884 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:11:43,108 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:11:43,109 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:11:43,122 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:11:43,122 - api.endpoints.chat - INFO - Received chat message from user 1: Search the web for: latest AI research papers 2025...
2025-04-23 15:11:43,122 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: web-search-test-1745421103
2025-04-23 15:11:43,122 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 15:11:43,122 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 15:11:43,123 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 15:11:43,124 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:11:43,124 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 15:11:43,124 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 15:11:43,124 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:11:43,124 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:11:43,124 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: web-search-test-1745421103
2025-04-23 15:11:43,124 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:11:43,125 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:11:43,127 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:11:43,129 - api.endpoints.system_messages - INFO - Stored system message sys_cde53e94-aaec-46d7-9093-98736dd4c887 in database
2025-04-23 15:11:43,131 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:11:43,131 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 15:11:43,131 - components.prompt_builder - INFO - Constructing prompt for session web-search-test-1745421103, user 1, depth 0
2025-04-23 15:11:43,132 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 15:11:43,132 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Search the web for: latest AI research papers 2025'
2025-04-23 15:11:43,132 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 15:11:43,132 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 15:11:43,132 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 15:11:43,132 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 15:11:43,133 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:11:43,133 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 15:11:45,281 - CtxMemMgr_User1 - INFO - Loading session web-search-test-1745421103 for processing assistant message
2025-04-23 15:11:45,282 - CtxMemMgr_User1 - INFO - Loading session context for web-search-test-1745421103 from /app/data/sessions/1/web-search-test-1745421103/context.json
2025-04-23 15:11:45,282 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/web-search-test-1745421103/context.json not found. Initializing empty context for new session web-search-test-1745421103.
2025-04-23 15:11:45,282 - CtxMemMgr_User1 - INFO - Stored turn b8e56d12-9111-4d5a-b3ff-6b3b9dcafcb1 for active session web-search-test-1745421103
2025-04-23 15:11:45,283 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session web-search-test-1745421103: '...'
2025-04-23 15:11:45,283 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 15:11:45,283 - CtxMemMgr_User1 - INFO - Session web-search-test-1745421103: Active history token count ~12 / 30000
2025-04-23 15:11:45,283 - CtxMemMgr_User1 - INFO - Saving active session context for web-search-test-1745421103 to /app/data/sessions/1/web-search-test-1745421103/context.json
2025-04-23 15:11:45,285 - CtxMemMgr_User1 - INFO - Successfully saved context for session web-search-test-1745421103
2025-04-23 15:11:45,285 - ActionHandler_User1 - INFO - Processing LLM response for session web-search-test-1745421103, user 1
2025-04-23 15:11:45,286 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session web-search-test-1745421103.
2025-04-23 15:11:45,286 - CtxMemMgr_User1 - INFO - Stored turn 603aa357-ff8c-43c4-9dfe-2c3b3cbda56f for active session web-search-test-1745421103
2025-04-23 15:11:45,286 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session web-search-test-1745421103: '...'
2025-04-23 15:11:48,248 - CtxMemMgr_User1 - INFO - Session web-search-test-1745421103: Active history token count ~252 / 30000
2025-04-23 15:11:48,249 - CtxMemMgr_User1 - INFO - Saving active session context for web-search-test-1745421103 to /app/data/sessions/1/web-search-test-1745421103/context.json
2025-04-23 15:11:48,249 - CtxMemMgr_User1 - INFO - Successfully saved context for session web-search-test-1745421103
2025-04-23 15:11:50,267 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:12:05,290 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:13:35,704 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:13:35,928 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:13:35,930 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:13:35,945 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:13:35,946 - api.endpoints.chat - INFO - Received chat message from user 1: Who is Dan Martell?...
2025-04-23 15:13:35,947 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: dan-martell-test-1745421215
2025-04-23 15:13:35,947 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 15:13:35,947 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 15:13:35,949 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 15:13:35,950 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:13:35,951 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 15:13:35,952 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 15:13:35,952 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:13:35,952 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:13:35,952 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: dan-martell-test-1745421215
2025-04-23 15:13:35,952 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:13:35,953 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:13:35,955 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:13:35,959 - api.endpoints.system_messages - INFO - Stored system message sys_7b87a34f-aa6d-47fd-ac5c-1e0b6b9d0ffc in database
2025-04-23 15:13:35,962 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:13:35,962 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 15:13:35,962 - components.prompt_builder - INFO - Constructing prompt for session dan-martell-test-1745421215, user 1, depth 0
2025-04-23 15:13:35,962 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 15:13:35,963 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'Who is Dan Martell?'
2025-04-23 15:13:35,964 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 15:13:35,964 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 15:13:35,964 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 15:13:35,964 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 15:13:35,964 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:13:35,965 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 15:13:38,190 - CtxMemMgr_User1 - INFO - Loading session dan-martell-test-1745421215 for processing assistant message
2025-04-23 15:13:38,191 - CtxMemMgr_User1 - INFO - Loading session context for dan-martell-test-1745421215 from /app/data/sessions/1/dan-martell-test-1745421215/context.json
2025-04-23 15:13:38,192 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/dan-martell-test-1745421215/context.json not found. Initializing empty context for new session dan-martell-test-1745421215.
2025-04-23 15:13:38,192 - CtxMemMgr_User1 - INFO - Stored turn 167d137b-f905-4964-8e72-63ba4bfc271c for active session dan-martell-test-1745421215
2025-04-23 15:13:38,193 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session dan-martell-test-1745421215: '...'
2025-04-23 15:13:38,193 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 15:13:38,194 - CtxMemMgr_User1 - INFO - Session dan-martell-test-1745421215: Active history token count ~4 / 30000
2025-04-23 15:13:38,194 - CtxMemMgr_User1 - INFO - Saving active session context for dan-martell-test-1745421215 to /app/data/sessions/1/dan-martell-test-1745421215/context.json
2025-04-23 15:13:38,198 - CtxMemMgr_User1 - INFO - Successfully saved context for session dan-martell-test-1745421215
2025-04-23 15:13:38,199 - ActionHandler_User1 - INFO - Processing LLM response for session dan-martell-test-1745421215, user 1
2025-04-23 15:13:38,199 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session dan-martell-test-1745421215.
2025-04-23 15:13:38,200 - CtxMemMgr_User1 - INFO - Stored turn a1ccf3b0-f6ad-4e5d-aad8-45139069d548 for active session dan-martell-test-1745421215
2025-04-23 15:13:38,200 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session dan-martell-test-1745421215: '...'
2025-04-23 15:13:38,807 - CtxMemMgr_User1 - INFO - Session dan-martell-test-1745421215: Active history token count ~233 / 30000
2025-04-23 15:13:38,808 - CtxMemMgr_User1 - INFO - Saving active session context for dan-martell-test-1745421215 to /app/data/sessions/1/dan-martell-test-1745421215/context.json
2025-04-23 15:13:38,813 - CtxMemMgr_User1 - INFO - Successfully saved context for session dan-martell-test-1745421215
2025-04-23 15:13:41,835 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:16:43,599 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:16:43,841 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:16:43,843 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:16:43,856 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:17:23,640 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:17:23,860 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:17:23,862 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:17:23,875 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:17:23,875 - api.endpoints.chat - INFO - Received chat message from user 1: [SEARCH: Dan Martell]...
2025-04-23 15:17:23,875 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: explicit-search-test-1745421443
2025-04-23 15:17:23,876 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 15:17:23,876 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 15:17:23,876 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 15:17:23,877 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:17:23,878 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 15:17:23,878 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 15:17:23,878 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:17:23,878 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:17:23,878 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: explicit-search-test-1745421443
2025-04-23 15:17:23,878 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:17:23,878 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:17:23,881 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:17:23,883 - api.endpoints.system_messages - INFO - Stored system message sys_7a5e274c-03a0-4f5a-be4e-c8d14bb0ecbb in database
2025-04-23 15:17:23,885 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:17:23,885 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 15:17:23,885 - components.prompt_builder - INFO - Constructing prompt for session explicit-search-test-1745421443, user 1, depth 0
2025-04-23 15:17:23,886 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 15:17:23,886 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: '[SEARCH: Dan Martell]'
2025-04-23 15:17:23,886 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 15:17:23,886 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 15:17:23,886 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 15:17:23,886 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 15:17:23,887 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:17:23,887 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 15:17:26,025 - CtxMemMgr_User1 - INFO - Loading session explicit-search-test-1745421443 for processing assistant message
2025-04-23 15:17:26,026 - CtxMemMgr_User1 - INFO - Loading session context for explicit-search-test-1745421443 from /app/data/sessions/1/explicit-search-test-1745421443/context.json
2025-04-23 15:17:26,028 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/explicit-search-test-1745421443/context.json not found. Initializing empty context for new session explicit-search-test-1745421443.
2025-04-23 15:17:26,028 - CtxMemMgr_User1 - INFO - Stored turn 5fd9e015-7553-44c3-8082-2ce029a70062 for active session explicit-search-test-1745421443
2025-04-23 15:17:26,030 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session explicit-search-test-1745421443: '...'
2025-04-23 15:17:26,030 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 15:17:26,030 - CtxMemMgr_User1 - INFO - Session explicit-search-test-1745421443: Active history token count ~5 / 30000
2025-04-23 15:17:26,031 - CtxMemMgr_User1 - INFO - Saving active session context for explicit-search-test-1745421443 to /app/data/sessions/1/explicit-search-test-1745421443/context.json
2025-04-23 15:17:26,033 - CtxMemMgr_User1 - INFO - Successfully saved context for session explicit-search-test-1745421443
2025-04-23 15:17:26,033 - ActionHandler_User1 - INFO - Processing LLM response for session explicit-search-test-1745421443, user 1
2025-04-23 15:17:26,033 - ActionHandler_User1 - ERROR - LLM response structure valid, but tier3 content missing for session explicit-search-test-1745421443.
2025-04-23 15:17:26,033 - CtxMemMgr_User1 - INFO - Stored turn 1ffbaed4-a2aa-4a84-b56b-713907acf2d7 for active session explicit-search-test-1745421443
2025-04-23 15:17:26,034 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session explicit-search-test-1745421443: '...'
2025-04-23 15:17:26,523 - CtxMemMgr_User1 - INFO - Session explicit-search-test-1745421443: Active history token count ~241 / 30000
2025-04-23 15:17:26,524 - CtxMemMgr_User1 - INFO - Saving active session context for explicit-search-test-1745421443 to /app/data/sessions/1/explicit-search-test-1745421443/context.json
2025-04-23 15:17:26,534 - CtxMemMgr_User1 - INFO - Successfully saved context for session explicit-search-test-1745421443
2025-04-23 15:17:29,553 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:33:48,362 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 15:33:48,362 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 15:33:48,362 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 15:33:48,376 - core.database.connection - INFO - Database connection successful!
2025-04-23 15:33:48,376 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 15:33:48,378 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 15:33:48,382 - core.database.connection - INFO - Default user already exists.
2025-04-23 15:33:48,396 - app - INFO - Auth blueprint registered successfully
2025-04-23 15:33:48,408 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 15:33:48,408 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 15:33:48,408 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 15:33:48,408 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 15:33:48,409 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 15:33:48,409 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 15:33:48,409 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 15:33:48,409 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 15:33:48,413 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 15:33:48,414 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 15:33:48,414 - components.action_handler - INFO - Web search functionality is available
2025-04-23 15:33:48,414 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 15:33:48,414 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 15:33:48,415 - app - INFO - Chat blueprint registered successfully
2025-04-23 15:33:48,416 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 15:33:48,418 - app - INFO - Session blueprint registered successfully
2025-04-23 15:33:48,418 - app - INFO - Memory blueprint registered successfully
2025-04-23 15:33:48,421 - app - INFO - System Messages blueprint registered successfully
2025-04-23 15:33:48,422 - app - INFO - Basic endpoints registered successfully
2025-04-23 15:33:48,425 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 15:38:53,278 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:38:53,499 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:38:53,501 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:38:53,517 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:38:53,517 - api.endpoints.chat - INFO - Received chat message from user 1: [SEARCH: Dan Martell founder]...
2025-04-23 15:38:53,517 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 15:38:53,517 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 15:38:53,517 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 15:38:53,517 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: fixed-search-test-1745422733
2025-04-23 15:38:53,518 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 15:38:53,518 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 15:38:53,518 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 15:38:53,518 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 15:38:53,520 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:38:53,520 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 15:38:53,520 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 15:38:53,521 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:38:53,521 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 15:38:53,521 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: fixed-search-test-1745422733
2025-04-23 15:38:53,521 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:38:53,521 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 15:38:53,524 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:38:53,529 - api.endpoints.system_messages - INFO - Stored system message sys_8334ba76-bab6-479f-a99f-255f5b6faccb in database
2025-04-23 15:38:53,530 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:38:53,530 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 15:38:53,531 - components.prompt_builder - INFO - Constructing prompt for session fixed-search-test-1745422733, user 1, depth 0
2025-04-23 15:38:53,531 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 15:38:53,531 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: '[SEARCH: Dan Martell founder]'
2025-04-23 15:38:53,531 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 15:38:53,531 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 15:38:53,531 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 15:38:53,531 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 15:38:53,531 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 15:38:53,532 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 15:38:55,893 - CtxMemMgr_User1 - INFO - Loading session fixed-search-test-1745422733 for processing assistant message
2025-04-23 15:38:55,894 - CtxMemMgr_User1 - INFO - Loading session context for fixed-search-test-1745422733 from /app/data/sessions/1/fixed-search-test-1745422733/context.json
2025-04-23 15:38:55,895 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/fixed-search-test-1745422733/context.json not found. Initializing empty context for new session fixed-search-test-1745422733.
2025-04-23 15:38:55,895 - CtxMemMgr_User1 - INFO - Stored turn 174964c9-cded-4062-9635-da8f4df38a4d for active session fixed-search-test-1745422733
2025-04-23 15:38:55,896 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session fixed-search-test-1745422733: '...'
2025-04-23 15:38:55,898 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 15:38:55,898 - CtxMemMgr_User1 - INFO - Session fixed-search-test-1745422733: Active history token count ~7 / 30000
2025-04-23 15:38:55,898 - CtxMemMgr_User1 - INFO - Saving active session context for fixed-search-test-1745422733 to /app/data/sessions/1/fixed-search-test-1745422733/context.json
2025-04-23 15:38:55,902 - CtxMemMgr_User1 - INFO - Successfully saved context for session fixed-search-test-1745422733
2025-04-23 15:38:55,902 - ActionHandler_User1 - INFO - Processing LLM response for session fixed-search-test-1745422733, user 1
2025-04-23 15:38:55,903 - ActionHandler_User1 - WARNING - tier3 content missing for session fixed-search-test-1745422733, falling back to main response.
2025-04-23 15:38:55,903 - ActionHandler_User1 - ERROR - Could not extract useful content from LLM response for session fixed-search-test-1745422733
2025-04-23 15:38:55,903 - CtxMemMgr_User1 - INFO - Stored turn 02bee993-92d4-4add-8fcf-7a309dfc43cb for active session fixed-search-test-1745422733
2025-04-23 15:38:55,904 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session fixed-search-test-1745422733: '...'
2025-04-23 15:38:56,406 - CtxMemMgr_User1 - INFO - Session fixed-search-test-1745422733: Active history token count ~239 / 30000
2025-04-23 15:38:56,407 - CtxMemMgr_User1 - INFO - Saving active session context for fixed-search-test-1745422733 to /app/data/sessions/1/fixed-search-test-1745422733/context.json
2025-04-23 15:38:56,410 - CtxMemMgr_User1 - INFO - Successfully saved context for session fixed-search-test-1745422733
2025-04-23 15:38:59,431 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:39:48,617 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:39:48,837 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:39:48,839 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:41:14,643 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:41:14,861 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:41:14,863 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:41:23,449 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:41:23,664 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:41:23,666 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:41:29,226 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:41:29,443 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:41:29,445 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:41:35,841 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:41:36,057 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:41:36,059 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:41:43,464 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:41:43,689 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:41:43,690 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:42:44,733 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:42:44,739 - api.endpoints.system_messages - INFO - Stored system message sys_c4214460-8a3a-4255-9d72-9556b072c9c2 in database
2025-04-23 15:45:18,914 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:45:19,132 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:45:19,133 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:46:12,652 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:46:12,874 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:46:12,877 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:46:20,368 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:46:20,592 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:46:20,594 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:46:31,621 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:46:31,837 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:46:31,838 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:46:31,881 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 15:46:31,883 - api.endpoints.system_messages - INFO - Stored system message sys_9bb143c0-ba32-4083-b619-6644ca3a841c in database
2025-04-23 15:47:34,023 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:47:34,251 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:47:34,253 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:58:25,512 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:58:25,741 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:58:25,742 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 15:59:01,682 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 15:59:01,900 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 15:59:01,902 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 16:17:52,796 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 16:17:52,801 - api.endpoints.auth - ERROR - Error registering user: User with username 'testuser5' already exists
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    user = auth_service.register_user(user_data)
  File "/app/core/auth/service.py", line 64, in register_user
    raise ValueError(f"User with username '{user_data.username}' already exists")
ValueError: User with username 'testuser5' already exists
2025-04-23 16:17:52,811 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 16:17:53,028 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 16:17:53,030 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 16:17:53,032 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 16:18:34,282 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 16:18:34,285 - api.endpoints.auth - ERROR - Error registering user: User with username 'testuser5' already exists
Traceback (most recent call last):
  File "/app/api/endpoints/auth.py", line 62, in register_user
    user = auth_service.register_user(user_data)
  File "/app/core/auth/service.py", line 64, in register_user
    raise ValueError(f"User with username '{user_data.username}' already exists")
ValueError: User with username 'testuser5' already exists
2025-04-23 16:18:34,289 - core.auth.service - INFO - AuthService initialized with default strategy: local
2025-04-23 16:18:34,506 - core.auth.strategies - INFO - Authentication successful for user: testuser5
2025-04-23 16:18:34,508 - api.endpoints.auth - INFO - User testuser5 logged in successfully
2025-04-23 16:18:34,513 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 16:18:34,514 - managers.user_session_manager - INFO - Created new session ID: 997336d9-a67a-499e-be7d-ff8b74a21a58 for user: 1
2025-04-23 16:18:34,514 - managers.user_session_manager - INFO - Creating new conversation manager for user: 1, session: 997336d9-a67a-499e-be7d-ff8b74a21a58
2025-04-23 16:18:34,515 - EpisodicMemMgr_User1 - INFO - Summary index file not found for user 1. Initialized empty index.
2025-04-23 16:18:34,515 - EpisodicMemMgr_User1 - INFO - EpisodicMemoryManager initialized for user 1. Episodic path: /app/data/1/episodic
2025-04-23 16:18:34,515 - CtxMemMgr_User1 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 16:18:34,517 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 16:18:34,517 - CtxMemMgr_User1 - INFO - ContextualMemoryManager initialized for user 1.
2025-04-23 16:18:34,518 - components.prompt_builder - INFO - PromptBuilder initialized for user 1
2025-04-23 16:18:34,518 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 16:18:34,518 - components.action_handler - INFO - ActionHandler initialized for user 1
2025-04-23 16:18:34,518 - ConvMgr_User1 - INFO - ConversationManager initialized for User ID: 1, Session ID: 997336d9-a67a-499e-be7d-ff8b74a21a58
2025-04-23 16:18:34,518 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 16:18:34,518 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 16:18:34,518 - managers.chat_file_manager - INFO - Attempting to save transcript for user 1, session 997336d9-a67a-499e-be7d-ff8b74a21a58 to /app/data/sessions/1/997336d9-a67a-499e-be7d-ff8b74a21a58/transcript.json
2025-04-23 16:18:34,520 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/1/997336d9-a67a-499e-be7d-ff8b74a21a58/transcript.json
2025-04-23 16:18:34,522 - managers.chat_file_manager - INFO - Session metadata for 997336d9-a67a-499e-be7d-ff8b74a21a58 saved/updated in DB.
2025-04-23 16:18:34,529 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 16:18:34,529 - api.endpoints.chat - INFO - Received chat message from user 1: My name is Jordan and I love programming in Python...
2025-04-23 16:18:34,531 - core.auth.utils - WARNING - Docker environment - auto-authenticating request without token
2025-04-23 16:18:34,534 - api.endpoints.system_messages - INFO - Stored system message sys_80da2600-61d5-4bab-a4e4-933a7801d968 in database
2025-04-23 16:18:34,536 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 16:18:34,536 - ConvMgr_User1 - INFO - Loaded remembered facts from database for user 1
2025-04-23 16:18:34,536 - components.prompt_builder - INFO - Constructing prompt for session 997336d9-a67a-499e-be7d-ff8b74a21a58, user 1, depth 0
2025-04-23 16:18:34,536 - CtxMemMgr_User1 - WARNING - Cannot get context summary: No active session.
2025-04-23 16:18:34,536 - EpisodicMemMgr_User1 - INFO - Searching all episodic summaries for user 1, query: 'My name is Jordan and I love programming in Python. I also like to go hiking on weekends.'
2025-04-23 16:18:34,536 - EpisodicMemMgr_User1 - INFO - No relevant summaries found across all sessions for user 1.
2025-04-23 16:18:34,536 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 16:18:34,537 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 16:18:34,537 - CtxMemMgr_User1 - WARNING - Cannot get formatted history: No active session.
2025-04-23 16:18:34,537 - CtxMemMgr_User1 - INFO - No remembered facts found in DB for user 1.
2025-04-23 16:18:34,537 - CtxMemMgr_User1 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 16:18:37,178 - CtxMemMgr_User1 - INFO - Loading session 997336d9-a67a-499e-be7d-ff8b74a21a58 for processing assistant message
2025-04-23 16:18:37,180 - CtxMemMgr_User1 - INFO - Loading session context for 997336d9-a67a-499e-be7d-ff8b74a21a58 from /app/data/sessions/1/997336d9-a67a-499e-be7d-ff8b74a21a58/context.json
2025-04-23 16:18:37,181 - CtxMemMgr_User1 - INFO - Context file /app/data/sessions/1/997336d9-a67a-499e-be7d-ff8b74a21a58/context.json not found. Initializing empty context for new session 997336d9-a67a-499e-be7d-ff8b74a21a58.
2025-04-23 16:18:37,181 - CtxMemMgr_User1 - INFO - Stored turn 4a6ce78d-07ec-45f1-ad57-9194bf5b2f8a for active session 997336d9-a67a-499e-be7d-ff8b74a21a58
2025-04-23 16:18:37,182 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 997336d9-a67a-499e-be7d-ff8b74a21a58: '...'
2025-04-23 16:18:37,182 - CtxMemMgr_User1 - INFO - Rule-based extraction found name: Jordan
2025-04-23 16:18:37,182 - CtxMemMgr_User1 - INFO - Added name fact to user memory: User's name is Jordan.
2025-04-23 16:18:37,187 - CtxMemMgr_User1 - INFO - Updated remembered_facts in DB for user 1 (1 facts). Pending commit.
2025-04-23 16:18:37,193 - CtxMemMgr_User1 - INFO - Successfully saved name fact to database.
2025-04-23 16:18:37,193 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 16:18:37,193 - CtxMemMgr_User1 - INFO - Session 997336d9-a67a-499e-be7d-ff8b74a21a58: Active history token count ~22 / 30000
2025-04-23 16:18:37,194 - CtxMemMgr_User1 - INFO - Saving active session context for 997336d9-a67a-499e-be7d-ff8b74a21a58 to /app/data/sessions/1/997336d9-a67a-499e-be7d-ff8b74a21a58/context.json
2025-04-23 16:18:37,195 - CtxMemMgr_User1 - INFO - Successfully saved context for session 997336d9-a67a-499e-be7d-ff8b74a21a58
2025-04-23 16:18:37,195 - ActionHandler_User1 - INFO - Processing LLM response for session 997336d9-a67a-499e-be7d-ff8b74a21a58, user 1
2025-04-23 16:18:37,195 - ActionHandler_User1 - WARNING - tier3 content missing for session 997336d9-a67a-499e-be7d-ff8b74a21a58, falling back to main response.
2025-04-23 16:18:37,195 - ActionHandler_User1 - ERROR - Could not extract useful content from LLM response for session 997336d9-a67a-499e-be7d-ff8b74a21a58
2025-04-23 16:18:37,195 - CtxMemMgr_User1 - INFO - Stored turn 30552834-61f9-4474-834c-b56ffee76f1d for active session 997336d9-a67a-499e-be7d-ff8b74a21a58
2025-04-23 16:18:37,196 - CtxMemMgr_User1 - INFO - Updated current_context_summary for session 997336d9-a67a-499e-be7d-ff8b74a21a58: '...'
2025-04-23 16:18:37,196 - CtxMemMgr_User1 - INFO - Rule-based extraction found name: Jordan
2025-04-23 16:18:37,196 - CtxMemMgr_User1 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 16:18:37,196 - CtxMemMgr_User1 - INFO - Session 997336d9-a67a-499e-be7d-ff8b74a21a58: Active history token count ~336 / 30000
2025-04-23 16:18:37,196 - CtxMemMgr_User1 - INFO - Saving active session context for 997336d9-a67a-499e-be7d-ff8b74a21a58 to /app/data/sessions/1/997336d9-a67a-499e-be7d-ff8b74a21a58/context.json
2025-04-23 16:18:37,197 - CtxMemMgr_User1 - INFO - Successfully saved context for session 997336d9-a67a-499e-be7d-ff8b74a21a58
2025-04-23 17:58:27,494 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 17:58:27,494 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 17:58:27,495 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 17:58:27,527 - core.database.connection - INFO - Database connection successful!
2025-04-23 17:58:27,527 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 17:58:27,560 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 17:58:27,569 - core.database.connection - ERROR - Error creating default user: cannot import name 'get_db' from partially initialized module 'core.database.connection' (most likely due to a circular import) (/app/core/database/connection.py)
2025-04-23 17:58:27,586 - app - INFO - Auth blueprint registered successfully
2025-04-23 17:58:27,649 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 17:58:27,649 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 17:58:27,649 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 17:58:27,649 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 17:58:27,649 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 17:58:27,650 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 17:58:27,650 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 17:58:27,650 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 17:58:27,657 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 17:58:27,657 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 17:58:27,657 - components.action_handler - INFO - Web search functionality is available
2025-04-23 17:58:27,658 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 17:58:27,658 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 17:58:27,659 - app - INFO - Chat blueprint registered successfully
2025-04-23 17:58:27,662 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 17:58:27,663 - app - INFO - Session blueprint registered successfully
2025-04-23 17:58:27,665 - app - INFO - Memory blueprint registered successfully
2025-04-23 17:58:27,668 - app - INFO - System Messages blueprint registered successfully
2025-04-23 17:58:27,669 - app - INFO - Basic endpoints registered successfully
2025-04-23 17:58:27,673 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 17:59:44,717 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 17:59:44,718 - app - ERROR - Exception on /api/memory/ [GET]
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 2528, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1825, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python3.10/site-packages/flask_cors/extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1823, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python3.10/site-packages/flask/app.py", line 1799, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
  File "/app/core/auth/utils.py", line 134, in decorated
    return f(*args, **kwargs)
  File "/app/api/endpoints/memory.py", line 57, in get_memory
    logger.error(f"Error getting memory for user {g.user_id}: {e}", exc_info=True)
  File "/usr/local/lib/python3.10/site-packages/flask/ctx.py", line 52, in __getattr__
    raise AttributeError(name) from None
AttributeError: user_id
2025-04-23 18:20:15,136 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:20:15,137 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 18:20:15,138 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 18:20:15,139 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 18:20:15,139 - managers.user_session_manager - INFO - Created new session ID: 5c55854b-31e1-487a-9604-4a255eba3fe8 for user: 123
2025-04-23 18:20:15,139 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 5c55854b-31e1-487a-9604-4a255eba3fe8
2025-04-23 18:20:15,140 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 18:20:15,141 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 18:20:15,141 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 18:20:15,141 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 18:20:15,146 - CtxMemMgr_User123 - ERROR - User 123 not found in DB during fact loading.
2025-04-23 18:20:15,147 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 18:20:15,147 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 18:20:15,147 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:20:15,147 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:20:15,148 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 5c55854b-31e1-487a-9604-4a255eba3fe8
2025-04-23 18:20:15,148 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:20:15,148 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:20:15,148 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 5c55854b-31e1-487a-9604-4a255eba3fe8 to /app/data/sessions/123/5c55854b-31e1-487a-9604-4a255eba3fe8/transcript.json
2025-04-23 18:20:15,150 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/5c55854b-31e1-487a-9604-4a255eba3fe8/transcript.json
2025-04-23 18:20:15,157 - managers.chat_file_manager - INFO - Session metadata for 5c55854b-31e1-487a-9604-4a255eba3fe8 saved/updated in DB.
2025-04-23 18:20:15,162 - api.endpoints.session - ERROR - Database error when creating session: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`sessions`, CONSTRAINT `sessions_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`))')
[SQL: INSERT INTO sessions (session_id, user_id, title, created_at, last_activity_at) VALUES (%(session_id)s, %(user_id)s, %(title)s, %(created_at)s, %(last_activity_at)s)]
[parameters: {'session_id': '5c55854b-31e1-487a-9604-4a255eba3fe8', 'user_id': 123, 'title': 'Test Session', 'created_at': datetime.datetime(2025, 4, 23, 18, 20, 15, 157703), 'last_activity_at': datetime.datetime(2025, 4, 23, 18, 20, 15, 150417)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-23 18:27:15,646 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:27:15,648 - managers.user_session_manager - INFO - Created new session ID: 42f388b6-fe38-4891-a454-1e2e4f4f26da for user: 123
2025-04-23 18:27:15,649 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 42f388b6-fe38-4891-a454-1e2e4f4f26da
2025-04-23 18:27:15,651 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 18:27:15,652 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 18:27:15,652 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 18:27:15,654 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:27:15,655 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 18:27:15,655 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 18:27:15,655 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:27:15,655 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:27:15,655 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 42f388b6-fe38-4891-a454-1e2e4f4f26da
2025-04-23 18:27:15,656 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:27:15,656 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:27:15,656 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 42f388b6-fe38-4891-a454-1e2e4f4f26da to /app/data/sessions/123/42f388b6-fe38-4891-a454-1e2e4f4f26da/transcript.json
2025-04-23 18:27:15,658 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/42f388b6-fe38-4891-a454-1e2e4f4f26da/transcript.json
2025-04-23 18:27:15,660 - managers.chat_file_manager - INFO - Session metadata for 42f388b6-fe38-4891-a454-1e2e4f4f26da saved/updated in DB.
2025-04-23 18:42:13,705 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:42:13,705 - managers.user_session_manager - INFO - Created new session ID: 4d056626-b7bb-417f-90cd-dd50dac92254 for user: 123
2025-04-23 18:42:13,705 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 4d056626-b7bb-417f-90cd-dd50dac92254
2025-04-23 18:42:13,706 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 18:42:13,706 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 18:42:13,706 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 18:42:13,710 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:42:13,711 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 18:42:13,711 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 18:42:13,711 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:42:13,711 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:42:13,711 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 4d056626-b7bb-417f-90cd-dd50dac92254
2025-04-23 18:42:13,711 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:42:13,711 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:42:13,712 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 4d056626-b7bb-417f-90cd-dd50dac92254 to /app/data/sessions/123/4d056626-b7bb-417f-90cd-dd50dac92254/transcript.json
2025-04-23 18:42:13,712 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/4d056626-b7bb-417f-90cd-dd50dac92254/transcript.json
2025-04-23 18:42:13,713 - managers.chat_file_manager - INFO - Session metadata for 4d056626-b7bb-417f-90cd-dd50dac92254 saved/updated in DB.
2025-04-23 18:44:41,438 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:44:41,439 - managers.user_session_manager - INFO - Created new session ID: d2083acb-6aae-4d9f-8e54-fe5d45405240 for user: 123
2025-04-23 18:44:41,439 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: d2083acb-6aae-4d9f-8e54-fe5d45405240
2025-04-23 18:44:41,440 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 18:44:41,440 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 18:44:41,441 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 18:44:41,444 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:44:41,444 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 18:44:41,445 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 18:44:41,445 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:44:41,445 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:44:41,445 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: d2083acb-6aae-4d9f-8e54-fe5d45405240
2025-04-23 18:44:41,446 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:44:41,446 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:44:41,446 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session d2083acb-6aae-4d9f-8e54-fe5d45405240 to /app/data/sessions/123/d2083acb-6aae-4d9f-8e54-fe5d45405240/transcript.json
2025-04-23 18:44:41,448 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/d2083acb-6aae-4d9f-8e54-fe5d45405240/transcript.json
2025-04-23 18:44:41,449 - managers.chat_file_manager - INFO - Session metadata for d2083acb-6aae-4d9f-8e54-fe5d45405240 saved/updated in DB.
2025-04-23 18:44:41,457 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:44:41,457 - api.endpoints.chat - INFO - Received chat message from user 123: Hello, can you tell me about yourself? What is RAI...
2025-04-23 18:44:41,464 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 18:44:41,466 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_a00e8f36-0d9b-4b4c-9a24-2c39ecf00bf4', 'timestamp': '2025-04-23T18:44:41.465097', 'session_id': 'd2083acb-6aae-4d9f-8e54-fe5d45405240', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-23T18:44:41.458064"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 18:44:41,468 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:44:41,468 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 18:44:41,469 - components.prompt_builder - INFO - Constructing prompt for session d2083acb-6aae-4d9f-8e54-fe5d45405240, user 123, depth 0
2025-04-23 18:44:41,469 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 18:44:41,469 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Hello, can you tell me about yourself? What is RAI Chat?'
2025-04-23 18:44:41,469 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 18:44:41,469 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 18:44:41,469 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 18:44:41,469 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 18:44:41,470 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:44:41,470 - CtxMemMgr_User123 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 18:44:44,317 - CtxMemMgr_User123 - INFO - Loading session d2083acb-6aae-4d9f-8e54-fe5d45405240 for processing assistant message
2025-04-23 18:44:44,318 - CtxMemMgr_User123 - INFO - Loading session context for d2083acb-6aae-4d9f-8e54-fe5d45405240 from /app/data/sessions/123/d2083acb-6aae-4d9f-8e54-fe5d45405240/context.json
2025-04-23 18:44:44,319 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/d2083acb-6aae-4d9f-8e54-fe5d45405240/context.json not found. Initializing empty context for new session d2083acb-6aae-4d9f-8e54-fe5d45405240.
2025-04-23 18:44:44,319 - CtxMemMgr_User123 - INFO - Stored turn b125cbda-796f-4ef9-a87e-28414163e1b1 for active session d2083acb-6aae-4d9f-8e54-fe5d45405240
2025-04-23 18:44:44,320 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d2083acb-6aae-4d9f-8e54-fe5d45405240: '...'
2025-04-23 18:44:44,322 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:44:44,322 - CtxMemMgr_User123 - INFO - Session d2083acb-6aae-4d9f-8e54-fe5d45405240: Active history token count ~14 / 30000
2025-04-23 18:44:44,323 - CtxMemMgr_User123 - INFO - Saving active session context for d2083acb-6aae-4d9f-8e54-fe5d45405240 to /app/data/sessions/123/d2083acb-6aae-4d9f-8e54-fe5d45405240/context.json
2025-04-23 18:44:44,326 - CtxMemMgr_User123 - INFO - Successfully saved context for session d2083acb-6aae-4d9f-8e54-fe5d45405240
2025-04-23 18:44:44,326 - ActionHandler_User123 - INFO - Processing LLM response for session d2083acb-6aae-4d9f-8e54-fe5d45405240, user 123
2025-04-23 18:44:44,327 - ActionHandler_User123 - WARNING - tier3 content missing for session d2083acb-6aae-4d9f-8e54-fe5d45405240, falling back to main response.
2025-04-23 18:44:44,327 - ActionHandler_User123 - ERROR - Could not extract useful content from LLM response for session d2083acb-6aae-4d9f-8e54-fe5d45405240
2025-04-23 18:44:44,327 - CtxMemMgr_User123 - INFO - Stored turn c70aa8a9-db80-4243-a556-a2c2d99da590 for active session d2083acb-6aae-4d9f-8e54-fe5d45405240
2025-04-23 18:44:44,327 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d2083acb-6aae-4d9f-8e54-fe5d45405240: '...'
2025-04-23 18:44:44,687 - CtxMemMgr_User123 - INFO - Session d2083acb-6aae-4d9f-8e54-fe5d45405240: Active history token count ~383 / 30000
2025-04-23 18:44:44,687 - CtxMemMgr_User123 - INFO - Saving active session context for d2083acb-6aae-4d9f-8e54-fe5d45405240 to /app/data/sessions/123/d2083acb-6aae-4d9f-8e54-fe5d45405240/context.json
2025-04-23 18:44:44,690 - CtxMemMgr_User123 - INFO - Successfully saved context for session d2083acb-6aae-4d9f-8e54-fe5d45405240
2025-04-23 18:51:06,669 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 18:51:06,670 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 18:51:06,670 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 18:51:06,683 - core.database.connection - INFO - Database connection successful!
2025-04-23 18:51:06,683 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 18:51:06,685 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 18:51:06,690 - core.database.connection - INFO - Default user already exists.
2025-04-23 18:51:06,703 - app - INFO - Auth blueprint registered successfully
2025-04-23 18:51:06,716 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 18:51:06,716 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 18:51:06,716 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 18:51:06,716 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 18:51:06,716 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 18:51:06,716 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 18:51:06,716 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 18:51:06,716 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 18:51:06,721 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 18:51:06,721 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 18:51:06,721 - components.action_handler - INFO - Web search functionality is available
2025-04-23 18:51:06,721 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 18:51:06,721 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 18:51:06,722 - app - INFO - Chat blueprint registered successfully
2025-04-23 18:51:06,723 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 18:51:06,724 - app - INFO - Session blueprint registered successfully
2025-04-23 18:51:06,725 - app - INFO - Memory blueprint registered successfully
2025-04-23 18:51:06,727 - app - INFO - System Messages blueprint registered successfully
2025-04-23 18:51:06,728 - app - INFO - Basic endpoints registered successfully
2025-04-23 18:51:06,732 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 18:51:29,530 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:51:29,532 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 18:51:29,533 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 18:51:29,533 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 18:51:29,535 - managers.user_session_manager - INFO - Created new session ID: 775db2c4-c2bc-478c-b3e9-abfc30fa2d15 for user: 123
2025-04-23 18:51:29,535 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 775db2c4-c2bc-478c-b3e9-abfc30fa2d15
2025-04-23 18:51:29,541 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 18:51:29,543 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 18:51:29,544 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 18:51:29,544 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 18:51:29,550 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:51:29,552 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 18:51:29,553 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 18:51:29,553 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:51:29,553 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:51:29,553 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 775db2c4-c2bc-478c-b3e9-abfc30fa2d15
2025-04-23 18:51:29,554 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:51:29,554 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:51:29,554 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15 to /app/data/sessions/123/775db2c4-c2bc-478c-b3e9-abfc30fa2d15/transcript.json
2025-04-23 18:51:29,556 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/775db2c4-c2bc-478c-b3e9-abfc30fa2d15/transcript.json
2025-04-23 18:51:29,564 - managers.chat_file_manager - INFO - Session metadata for 775db2c4-c2bc-478c-b3e9-abfc30fa2d15 saved/updated in DB.
2025-04-23 18:51:29,573 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:51:29,573 - api.endpoints.chat - INFO - Received chat message from user 123: Hello, can you tell me about yourself? What is RAI...
2025-04-23 18:51:29,579 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 18:51:29,584 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_7e5c9e5e-9bfb-4c1b-9188-462375919768', 'timestamp': '2025-04-23T18:51:29.580376', 'session_id': '775db2c4-c2bc-478c-b3e9-abfc30fa2d15', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-23T18:51:29.574041"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 18:51:29,588 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:51:29,589 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 18:51:29,589 - components.prompt_builder - INFO - Constructing prompt for session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15, user 123, depth 0
2025-04-23 18:51:29,589 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 18:51:29,589 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Hello, can you tell me about yourself? What is RAI Chat?'
2025-04-23 18:51:29,590 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 18:51:29,590 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 18:51:29,590 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 18:51:29,590 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 18:51:29,591 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:51:29,591 - CtxMemMgr_User123 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 18:51:32,365 - CtxMemMgr_User123 - INFO - Loading session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15 for processing assistant message
2025-04-23 18:51:32,366 - CtxMemMgr_User123 - INFO - Loading session context for 775db2c4-c2bc-478c-b3e9-abfc30fa2d15 from /app/data/sessions/123/775db2c4-c2bc-478c-b3e9-abfc30fa2d15/context.json
2025-04-23 18:51:32,366 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/775db2c4-c2bc-478c-b3e9-abfc30fa2d15/context.json not found. Initializing empty context for new session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15.
2025-04-23 18:51:32,367 - CtxMemMgr_User123 - INFO - Stored turn 176cd4fb-1754-467c-9237-f11424a543cb for active session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15
2025-04-23 18:51:32,367 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15: '...'
2025-04-23 18:51:32,369 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:51:32,370 - CtxMemMgr_User123 - INFO - Session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15: Active history token count ~14 / 30000
2025-04-23 18:51:32,370 - CtxMemMgr_User123 - INFO - Saving active session context for 775db2c4-c2bc-478c-b3e9-abfc30fa2d15 to /app/data/sessions/123/775db2c4-c2bc-478c-b3e9-abfc30fa2d15/context.json
2025-04-23 18:51:32,373 - CtxMemMgr_User123 - INFO - Successfully saved context for session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15
2025-04-23 18:51:32,374 - ActionHandler_User123 - INFO - Processing LLM response for session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15, user 123
2025-04-23 18:51:32,375 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: 775db2c4-c2bc-478c-b3e9-abfc30fa2d15).
2025-04-23 18:51:32,376 - CtxMemMgr_User123 - INFO - Stored turn 67cc525a-33e9-4f6b-9993-fe94ce22756f for active session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15
2025-04-23 18:51:32,376 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15: '...'
2025-04-23 18:51:32,376 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:51:32,377 - CtxMemMgr_User123 - INFO - Session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15: Active history token count ~28 / 30000
2025-04-23 18:51:32,377 - CtxMemMgr_User123 - INFO - Saving active session context for 775db2c4-c2bc-478c-b3e9-abfc30fa2d15 to /app/data/sessions/123/775db2c4-c2bc-478c-b3e9-abfc30fa2d15/context.json
2025-04-23 18:51:32,383 - CtxMemMgr_User123 - INFO - Successfully saved context for session 775db2c4-c2bc-478c-b3e9-abfc30fa2d15
2025-04-23 18:51:32,383 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-23 18:52:43,021 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:52:43,021 - managers.user_session_manager - INFO - Created new session ID: 9c5ad286-123f-4e8e-80dc-a8e7583316b9 for user: 123
2025-04-23 18:52:43,022 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 9c5ad286-123f-4e8e-80dc-a8e7583316b9
2025-04-23 18:52:43,022 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 18:52:43,022 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 18:52:43,022 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 18:52:43,023 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:52:43,024 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 18:52:43,024 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 18:52:43,024 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:52:43,024 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:52:43,024 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 9c5ad286-123f-4e8e-80dc-a8e7583316b9
2025-04-23 18:52:43,024 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:52:43,024 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:52:43,024 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 9c5ad286-123f-4e8e-80dc-a8e7583316b9 to /app/data/sessions/123/9c5ad286-123f-4e8e-80dc-a8e7583316b9/transcript.json
2025-04-23 18:52:43,025 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/9c5ad286-123f-4e8e-80dc-a8e7583316b9/transcript.json
2025-04-23 18:52:43,026 - managers.chat_file_manager - INFO - Session metadata for 9c5ad286-123f-4e8e-80dc-a8e7583316b9 saved/updated in DB.
2025-04-23 18:52:43,034 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:52:43,034 - api.endpoints.chat - INFO - Received chat message from user 123: Hello, can you tell me about yourself? What is RAI...
2025-04-23 18:52:43,036 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 18:52:43,038 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_cb711ddd-cb4b-463e-b1ff-41bc3aa48ded', 'timestamp': '2025-04-23T18:52:43.037400', 'session_id': '9c5ad286-123f-4e8e-80dc-a8e7583316b9', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-23T18:52:43.034347"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 18:52:43,041 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:52:43,041 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 18:52:43,042 - components.prompt_builder - INFO - Constructing prompt for session 9c5ad286-123f-4e8e-80dc-a8e7583316b9, user 123, depth 0
2025-04-23 18:52:43,042 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 18:52:43,042 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Hello, can you tell me about yourself? What is RAI Chat?'
2025-04-23 18:52:43,042 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 18:52:43,043 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 18:52:43,043 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 18:52:43,043 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 18:52:43,044 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:52:43,045 - CtxMemMgr_User123 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 18:52:46,529 - CtxMemMgr_User123 - INFO - Loading session 9c5ad286-123f-4e8e-80dc-a8e7583316b9 for processing assistant message
2025-04-23 18:52:46,530 - CtxMemMgr_User123 - INFO - Loading session context for 9c5ad286-123f-4e8e-80dc-a8e7583316b9 from /app/data/sessions/123/9c5ad286-123f-4e8e-80dc-a8e7583316b9/context.json
2025-04-23 18:52:46,530 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/9c5ad286-123f-4e8e-80dc-a8e7583316b9/context.json not found. Initializing empty context for new session 9c5ad286-123f-4e8e-80dc-a8e7583316b9.
2025-04-23 18:52:46,530 - CtxMemMgr_User123 - INFO - Stored turn 705e48d4-5245-4c42-8743-225bfd5f0d25 for active session 9c5ad286-123f-4e8e-80dc-a8e7583316b9
2025-04-23 18:52:46,531 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 9c5ad286-123f-4e8e-80dc-a8e7583316b9: '...'
2025-04-23 18:52:46,531 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:52:46,532 - CtxMemMgr_User123 - INFO - Session 9c5ad286-123f-4e8e-80dc-a8e7583316b9: Active history token count ~14 / 30000
2025-04-23 18:52:46,532 - CtxMemMgr_User123 - INFO - Saving active session context for 9c5ad286-123f-4e8e-80dc-a8e7583316b9 to /app/data/sessions/123/9c5ad286-123f-4e8e-80dc-a8e7583316b9/context.json
2025-04-23 18:52:46,534 - CtxMemMgr_User123 - INFO - Successfully saved context for session 9c5ad286-123f-4e8e-80dc-a8e7583316b9
2025-04-23 18:52:46,535 - ActionHandler_User123 - INFO - Processing LLM response for session 9c5ad286-123f-4e8e-80dc-a8e7583316b9, user 123
2025-04-23 18:52:46,535 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: 9c5ad286-123f-4e8e-80dc-a8e7583316b9).
2025-04-23 18:52:46,535 - CtxMemMgr_User123 - INFO - Stored turn ae11924f-e670-47c3-b4f2-13a92a796d26 for active session 9c5ad286-123f-4e8e-80dc-a8e7583316b9
2025-04-23 18:52:46,535 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 9c5ad286-123f-4e8e-80dc-a8e7583316b9: '...'
2025-04-23 18:52:46,536 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:52:46,536 - CtxMemMgr_User123 - INFO - Session 9c5ad286-123f-4e8e-80dc-a8e7583316b9: Active history token count ~28 / 30000
2025-04-23 18:52:46,536 - CtxMemMgr_User123 - INFO - Saving active session context for 9c5ad286-123f-4e8e-80dc-a8e7583316b9 to /app/data/sessions/123/9c5ad286-123f-4e8e-80dc-a8e7583316b9/context.json
2025-04-23 18:52:46,538 - CtxMemMgr_User123 - INFO - Successfully saved context for session 9c5ad286-123f-4e8e-80dc-a8e7583316b9
2025-04-23 18:52:46,538 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-23 18:54:59,325 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:54:59,325 - managers.user_session_manager - INFO - Created new session ID: cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0 for user: 123
2025-04-23 18:54:59,326 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0
2025-04-23 18:54:59,326 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 18:54:59,327 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 18:54:59,327 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 18:54:59,329 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:54:59,330 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 18:54:59,331 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 18:54:59,331 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:54:59,331 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:54:59,331 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0
2025-04-23 18:54:59,332 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:54:59,332 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:54:59,332 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0 to /app/data/sessions/123/cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0/transcript.json
2025-04-23 18:54:59,334 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0/transcript.json
2025-04-23 18:54:59,336 - managers.chat_file_manager - INFO - Session metadata for cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0 saved/updated in DB.
2025-04-23 18:54:59,342 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:54:59,343 - api.endpoints.chat - INFO - Received chat message from user 123: Hello, can you tell me about yourself? What is RAI...
2025-04-23 18:54:59,347 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 18:54:59,350 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_52011df8-8d27-47a4-b3af-f81cea2a05b8', 'timestamp': '2025-04-23T18:54:59.348485', 'session_id': 'cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-23T18:54:59.343884"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 18:54:59,353 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:54:59,354 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 18:54:59,355 - components.prompt_builder - INFO - Constructing prompt for session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0, user 123, depth 0
2025-04-23 18:54:59,355 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 18:54:59,355 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Hello, can you tell me about yourself? What is RAI Chat?'
2025-04-23 18:54:59,356 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 18:54:59,356 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 18:54:59,356 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 18:54:59,356 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 18:54:59,358 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:54:59,358 - CtxMemMgr_User123 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 18:55:02,079 - CtxMemMgr_User123 - INFO - Loading session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0 for processing assistant message
2025-04-23 18:55:02,079 - CtxMemMgr_User123 - INFO - Loading session context for cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0 from /app/data/sessions/123/cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0/context.json
2025-04-23 18:55:02,081 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0/context.json not found. Initializing empty context for new session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0.
2025-04-23 18:55:02,083 - CtxMemMgr_User123 - INFO - Stored turn 1b0a130e-a058-46a5-ac17-fac78d0424b1 for active session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0
2025-04-23 18:55:02,083 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0: '...'
2025-04-23 18:55:02,085 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:02,085 - CtxMemMgr_User123 - INFO - Session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0: Active history token count ~14 / 30000
2025-04-23 18:55:02,087 - CtxMemMgr_User123 - INFO - Saving active session context for cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0 to /app/data/sessions/123/cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0/context.json
2025-04-23 18:55:02,093 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0
2025-04-23 18:55:02,094 - ActionHandler_User123 - INFO - Processing LLM response for session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0, user 123
2025-04-23 18:55:02,096 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0).
2025-04-23 18:55:02,096 - CtxMemMgr_User123 - INFO - Stored turn bf8e9915-75cb-4a8f-a759-1a1e7784f984 for active session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0
2025-04-23 18:55:02,098 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0: '...'
2025-04-23 18:55:02,099 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:02,100 - CtxMemMgr_User123 - INFO - Session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0: Active history token count ~28 / 30000
2025-04-23 18:55:02,102 - CtxMemMgr_User123 - INFO - Saving active session context for cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0 to /app/data/sessions/123/cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0/context.json
2025-04-23 18:55:02,109 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc57cddc-1f69-4f4a-b5dc-0e7b6ded2bf0
2025-04-23 18:55:02,109 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-23 18:55:02,120 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:55:02,122 - managers.user_session_manager - INFO - Created new session ID: 8a5643e6-da11-424e-acaf-da0f9d35a5af for user: 123
2025-04-23 18:55:02,122 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:02,124 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 18:55:02,126 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 18:55:02,127 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 18:55:02,130 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:55:02,131 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 18:55:02,132 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 18:55:02,132 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:55:02,132 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:55:02,132 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:02,133 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:55:02,133 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:55:02,133 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 8a5643e6-da11-424e-acaf-da0f9d35a5af to /app/data/sessions/123/8a5643e6-da11-424e-acaf-da0f9d35a5af/transcript.json
2025-04-23 18:55:02,136 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/8a5643e6-da11-424e-acaf-da0f9d35a5af/transcript.json
2025-04-23 18:55:02,139 - managers.chat_file_manager - INFO - Session metadata for 8a5643e6-da11-424e-acaf-da0f9d35a5af saved/updated in DB.
2025-04-23 18:55:02,150 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:55:02,151 - api.endpoints.chat - INFO - Received chat message from user 123: My name is Jordan. Remember that for later....
2025-04-23 18:55:02,153 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 18:55:02,154 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_2ae13bb0-5ad0-4046-a234-69987bd5c025', 'timestamp': '2025-04-23T18:55:02.153804', 'session_id': '8a5643e6-da11-424e-acaf-da0f9d35a5af', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-23T18:55:02.151380"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 18:55:02,156 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:55:02,156 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 18:55:02,157 - components.prompt_builder - INFO - Constructing prompt for session 8a5643e6-da11-424e-acaf-da0f9d35a5af, user 123, depth 0
2025-04-23 18:55:02,157 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 18:55:02,157 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'My name is Jordan. Remember that for later.'
2025-04-23 18:55:02,157 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 18:55:02,157 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 18:55:02,157 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 18:55:02,158 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 18:55:02,158 - CtxMemMgr_User123 - INFO - No remembered facts found in DB for user 123.
2025-04-23 18:55:02,158 - CtxMemMgr_User123 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-23 18:55:04,028 - CtxMemMgr_User123 - INFO - Loading session 8a5643e6-da11-424e-acaf-da0f9d35a5af for processing assistant message
2025-04-23 18:55:04,028 - CtxMemMgr_User123 - INFO - Loading session context for 8a5643e6-da11-424e-acaf-da0f9d35a5af from /app/data/sessions/123/8a5643e6-da11-424e-acaf-da0f9d35a5af/context.json
2025-04-23 18:55:04,029 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/8a5643e6-da11-424e-acaf-da0f9d35a5af/context.json not found. Initializing empty context for new session 8a5643e6-da11-424e-acaf-da0f9d35a5af.
2025-04-23 18:55:04,029 - CtxMemMgr_User123 - INFO - Stored turn 5af207f9-74ea-451e-82e0-8552aa746249 for active session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:04,030 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 8a5643e6-da11-424e-acaf-da0f9d35a5af: '...'
2025-04-23 18:55:04,030 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: Jordan
2025-04-23 18:55:04,030 - CtxMemMgr_User123 - INFO - Added name fact to user memory: User's name is Jordan.
2025-04-23 18:55:04,032 - CtxMemMgr_User123 - INFO - Updated remembered_facts in DB for user 123 (1 facts). Pending commit.
2025-04-23 18:55:04,038 - CtxMemMgr_User123 - INFO - Successfully saved name fact to database.
2025-04-23 18:55:04,038 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:04,039 - CtxMemMgr_User123 - INFO - Session 8a5643e6-da11-424e-acaf-da0f9d35a5af: Active history token count ~10 / 30000
2025-04-23 18:55:04,039 - CtxMemMgr_User123 - INFO - Saving active session context for 8a5643e6-da11-424e-acaf-da0f9d35a5af to /app/data/sessions/123/8a5643e6-da11-424e-acaf-da0f9d35a5af/context.json
2025-04-23 18:55:04,041 - CtxMemMgr_User123 - INFO - Successfully saved context for session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:04,041 - ActionHandler_User123 - INFO - Processing LLM response for session 8a5643e6-da11-424e-acaf-da0f9d35a5af, user 123
2025-04-23 18:55:04,042 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: 8a5643e6-da11-424e-acaf-da0f9d35a5af).
2025-04-23 18:55:04,042 - CtxMemMgr_User123 - INFO - Stored turn f4bd15d3-2fee-47b3-be90-1f8d6ee25db9 for active session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:04,042 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 8a5643e6-da11-424e-acaf-da0f9d35a5af: '...'
2025-04-23 18:55:04,043 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: Jordan
2025-04-23 18:55:04,043 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:04,043 - CtxMemMgr_User123 - INFO - Session 8a5643e6-da11-424e-acaf-da0f9d35a5af: Active history token count ~20 / 30000
2025-04-23 18:55:04,043 - CtxMemMgr_User123 - INFO - Saving active session context for 8a5643e6-da11-424e-acaf-da0f9d35a5af to /app/data/sessions/123/8a5643e6-da11-424e-acaf-da0f9d35a5af/context.json
2025-04-23 18:55:04,045 - CtxMemMgr_User123 - INFO - Successfully saved context for session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:04,045 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-23 18:55:06,055 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:55:06,056 - api.endpoints.chat - INFO - Received chat message from user 123: What's my name?...
2025-04-23 18:55:06,064 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 18:55:06,069 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_7aaeb993-e55e-4c6d-9c3e-da6ccbad87f5', 'timestamp': '2025-04-23T18:55:06.065279', 'session_id': '8a5643e6-da11-424e-acaf-da0f9d35a5af', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-23T18:55:06.057603"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 18:55:06,076 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 18:55:06,076 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 18:55:06,078 - components.prompt_builder - INFO - Constructing prompt for session 8a5643e6-da11-424e-acaf-da0f9d35a5af, user 123, depth 0
2025-04-23 18:55:06,079 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'What's my name?'
2025-04-23 18:55:06,079 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 18:55:06,079 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 18:55:06,080 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 18:55:06,082 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 18:55:06,083 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 18:55:06,085 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 18:55:07,940 - CtxMemMgr_User123 - INFO - Stored turn 6bf5fbe1-3082-49b1-9510-6d72e893bcee for active session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:07,940 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 8a5643e6-da11-424e-acaf-da0f9d35a5af: '...'
2025-04-23 18:55:07,941 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:07,941 - CtxMemMgr_User123 - INFO - Session 8a5643e6-da11-424e-acaf-da0f9d35a5af: Active history token count ~23 / 30000
2025-04-23 18:55:07,942 - CtxMemMgr_User123 - INFO - Saving active session context for 8a5643e6-da11-424e-acaf-da0f9d35a5af to /app/data/sessions/123/8a5643e6-da11-424e-acaf-da0f9d35a5af/context.json
2025-04-23 18:55:07,945 - CtxMemMgr_User123 - INFO - Successfully saved context for session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:07,946 - ActionHandler_User123 - INFO - Processing LLM response for session 8a5643e6-da11-424e-acaf-da0f9d35a5af, user 123
2025-04-23 18:55:07,946 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: 8a5643e6-da11-424e-acaf-da0f9d35a5af).
2025-04-23 18:55:07,947 - CtxMemMgr_User123 - INFO - Stored turn 7f1a4385-5c24-400c-8488-fbe8b0b7ac4c for active session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:07,947 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 8a5643e6-da11-424e-acaf-da0f9d35a5af: '...'
2025-04-23 18:55:07,947 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:07,947 - CtxMemMgr_User123 - INFO - Session 8a5643e6-da11-424e-acaf-da0f9d35a5af: Active history token count ~26 / 30000
2025-04-23 18:55:07,948 - CtxMemMgr_User123 - INFO - Saving active session context for 8a5643e6-da11-424e-acaf-da0f9d35a5af to /app/data/sessions/123/8a5643e6-da11-424e-acaf-da0f9d35a5af/context.json
2025-04-23 18:55:07,950 - CtxMemMgr_User123 - INFO - Successfully saved context for session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:07,950 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-23 18:55:07,960 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:55:07,960 - api.endpoints.chat - INFO - Received chat message from user 123: What did I just ask you to remember?...
2025-04-23 18:55:07,968 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 18:55:07,973 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_c93d95ba-9c9c-4b0d-9479-2a476dbda41e', 'timestamp': '2025-04-23T18:55:07.969255', 'session_id': '8a5643e6-da11-424e-acaf-da0f9d35a5af', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-23T18:55:07.961846"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 18:55:07,978 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 18:55:07,979 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 18:55:07,980 - components.prompt_builder - INFO - Constructing prompt for session 8a5643e6-da11-424e-acaf-da0f9d35a5af, user 123, depth 0
2025-04-23 18:55:07,981 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'What did I just ask you to remember?'
2025-04-23 18:55:07,981 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 18:55:07,981 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 18:55:07,982 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 18:55:07,983 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 18:55:07,984 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 18:55:07,984 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 18:55:10,046 - CtxMemMgr_User123 - INFO - Stored turn ca56f26e-5e74-4a74-8059-a3ebe7f1139a for active session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:10,046 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 8a5643e6-da11-424e-acaf-da0f9d35a5af: '...'
2025-04-23 18:55:10,047 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:10,047 - CtxMemMgr_User123 - INFO - Session 8a5643e6-da11-424e-acaf-da0f9d35a5af: Active history token count ~35 / 30000
2025-04-23 18:55:10,047 - CtxMemMgr_User123 - INFO - Saving active session context for 8a5643e6-da11-424e-acaf-da0f9d35a5af to /app/data/sessions/123/8a5643e6-da11-424e-acaf-da0f9d35a5af/context.json
2025-04-23 18:55:10,049 - CtxMemMgr_User123 - INFO - Successfully saved context for session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:10,049 - ActionHandler_User123 - INFO - Processing LLM response for session 8a5643e6-da11-424e-acaf-da0f9d35a5af, user 123
2025-04-23 18:55:10,050 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: 8a5643e6-da11-424e-acaf-da0f9d35a5af).
2025-04-23 18:55:10,050 - CtxMemMgr_User123 - INFO - Stored turn 5cc5d430-d274-44e8-aab6-d7b7928a3e87 for active session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:10,050 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 8a5643e6-da11-424e-acaf-da0f9d35a5af: '...'
2025-04-23 18:55:10,051 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:10,051 - CtxMemMgr_User123 - INFO - Session 8a5643e6-da11-424e-acaf-da0f9d35a5af: Active history token count ~44 / 30000
2025-04-23 18:55:10,051 - CtxMemMgr_User123 - INFO - Saving active session context for 8a5643e6-da11-424e-acaf-da0f9d35a5af to /app/data/sessions/123/8a5643e6-da11-424e-acaf-da0f9d35a5af/context.json
2025-04-23 18:55:10,055 - CtxMemMgr_User123 - INFO - Successfully saved context for session 8a5643e6-da11-424e-acaf-da0f9d35a5af
2025-04-23 18:55:10,056 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-23 18:55:10,061 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:55:10,062 - managers.user_session_manager - INFO - Created new session ID: 6754c40f-a219-4124-b0c9-b0407fc298bb for user: 123
2025-04-23 18:55:10,062 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 6754c40f-a219-4124-b0c9-b0407fc298bb
2025-04-23 18:55:10,064 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 18:55:10,065 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 18:55:10,065 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 18:55:10,068 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 18:55:10,069 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 18:55:10,070 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 18:55:10,070 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:55:10,070 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:55:10,070 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 6754c40f-a219-4124-b0c9-b0407fc298bb
2025-04-23 18:55:10,070 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:55:10,071 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:55:10,071 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 6754c40f-a219-4124-b0c9-b0407fc298bb to /app/data/sessions/123/6754c40f-a219-4124-b0c9-b0407fc298bb/transcript.json
2025-04-23 18:55:10,073 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/6754c40f-a219-4124-b0c9-b0407fc298bb/transcript.json
2025-04-23 18:55:10,075 - managers.chat_file_manager - INFO - Session metadata for 6754c40f-a219-4124-b0c9-b0407fc298bb saved/updated in DB.
2025-04-23 18:55:10,083 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:55:10,083 - api.endpoints.chat - INFO - Received chat message from user 123: What is the capital of France? Use web search....
2025-04-23 18:55:10,086 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 18:55:10,088 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_a14a461d-7f9f-4a48-a7eb-e523434c5342', 'timestamp': '2025-04-23T18:55:10.086372', 'session_id': '6754c40f-a219-4124-b0c9-b0407fc298bb', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-23T18:55:10.084077"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 18:55:10,090 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 18:55:10,090 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 18:55:10,090 - components.prompt_builder - INFO - Constructing prompt for session 6754c40f-a219-4124-b0c9-b0407fc298bb, user 123, depth 0
2025-04-23 18:55:10,090 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 18:55:10,090 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'What is the capital of France? Use web search.'
2025-04-23 18:55:10,091 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 18:55:10,091 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 18:55:10,091 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 18:55:10,091 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 18:55:10,092 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 18:55:10,092 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 18:55:10,092 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 18:55:11,878 - CtxMemMgr_User123 - INFO - Loading session 6754c40f-a219-4124-b0c9-b0407fc298bb for processing assistant message
2025-04-23 18:55:11,879 - CtxMemMgr_User123 - INFO - Loading session context for 6754c40f-a219-4124-b0c9-b0407fc298bb from /app/data/sessions/123/6754c40f-a219-4124-b0c9-b0407fc298bb/context.json
2025-04-23 18:55:11,880 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/6754c40f-a219-4124-b0c9-b0407fc298bb/context.json not found. Initializing empty context for new session 6754c40f-a219-4124-b0c9-b0407fc298bb.
2025-04-23 18:55:11,881 - CtxMemMgr_User123 - INFO - Stored turn 4f6cf871-1056-4535-94b3-5ac0e216174f for active session 6754c40f-a219-4124-b0c9-b0407fc298bb
2025-04-23 18:55:11,881 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 6754c40f-a219-4124-b0c9-b0407fc298bb: '...'
2025-04-23 18:55:11,882 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:11,882 - CtxMemMgr_User123 - INFO - Session 6754c40f-a219-4124-b0c9-b0407fc298bb: Active history token count ~11 / 30000
2025-04-23 18:55:11,882 - CtxMemMgr_User123 - INFO - Saving active session context for 6754c40f-a219-4124-b0c9-b0407fc298bb to /app/data/sessions/123/6754c40f-a219-4124-b0c9-b0407fc298bb/context.json
2025-04-23 18:55:11,885 - CtxMemMgr_User123 - INFO - Successfully saved context for session 6754c40f-a219-4124-b0c9-b0407fc298bb
2025-04-23 18:55:11,886 - ActionHandler_User123 - INFO - Processing LLM response for session 6754c40f-a219-4124-b0c9-b0407fc298bb, user 123
2025-04-23 18:55:11,886 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: 'capital of France' (Session: 6754c40f-a219-4124-b0c9-b0407fc298bb)
2025-04-23 18:55:11,887 - CtxMemMgr_User123 - INFO - Stored turn 1fcf5aa1-7376-483f-9a27-b9398dc8c502 for active session 6754c40f-a219-4124-b0c9-b0407fc298bb
2025-04-23 18:55:11,887 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 6754c40f-a219-4124-b0c9-b0407fc298bb: '...'
2025-04-23 18:55:11,887 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:11,889 - CtxMemMgr_User123 - INFO - Session 6754c40f-a219-4124-b0c9-b0407fc298bb: Active history token count ~22 / 30000
2025-04-23 18:55:11,889 - CtxMemMgr_User123 - INFO - Saving active session context for 6754c40f-a219-4124-b0c9-b0407fc298bb to /app/data/sessions/123/6754c40f-a219-4124-b0c9-b0407fc298bb/context.json
2025-04-23 18:55:11,891 - CtxMemMgr_User123 - INFO - Successfully saved context for session 6754c40f-a219-4124-b0c9-b0407fc298bb
2025-04-23 18:55:11,892 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745434511-6754c40f) ***
2025-04-23 18:55:11,892 - ActionHandler_User123 - INFO - Storing search status for session 6754c40f-a219-4124-b0c9-b0407fc298bb: active
2025-04-23 18:55:11,900 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 18:55:11,901 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_4fdb9ae8-8e5e-4e3c-b62d-cf9db0d34992', 'timestamp': '2025-04-23T18:55:11.900471', 'session_id': '6754c40f-a219-4124-b0c9-b0407fc298bb', 'message_type': 'web_search', 'content': '{"status": "active", "message": "Searching the web for: capital of France", "search_id": "search-1745434511-6754c40f", "timestamp": "2025-04-23T18:55:11.892452"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 18:55:11,902 - ActionHandler_User123 - INFO - Stored system message ID sys_4fdb9ae8-8e5e-4e3c-b62d-cf9db0d34992 for search ID search-1745434511-6754c40f
2025-04-23 18:55:11,902 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session 6754c40f-a219-4124-b0c9-b0407fc298bb
2025-04-23 18:55:11,902 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: 'capital of France'
2025-04-23 18:55:11,902 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-23 18:55:11,902 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-23 18:55:11,903 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-23 18:55:11,903 - ActionHandler_User123 - INFO - Calling perform_search function for query: 'capital of France'
2025-04-23 18:55:11,903 - components.action_handler - INFO - Performing Tavily search for query: 'capital of France'
2025-04-23 18:55:11,903 - components.action_handler - INFO - Calling Tavily search API with query: 'capital of France'
2025-04-23 18:55:15,182 - components.action_handler - INFO - Tavily search response: {'query': 'capital of France', 'follow_up_questions': None, 'answer': 'The capital of France is Paris. It is the largest city in the country and a major center of culture and commerce. Paris is locate...
2025-04-23 18:55:15,182 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: capital of France

Summary: The capital of France is Paris. It is the largest city in the country and a major center of culture and commerce. Paris is located in the north-central ...
2025-04-23 18:55:15,183 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-23 18:55:15,183 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-23 18:55:15,184 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1779
2025-04-23 18:55:15,184 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: capital of France

Summary: The capital of France is Paris. It is the largest ci...
2025-04-23 18:55:15,184 - ActionHandler_User123 - INFO - Updating system message sys_4fdb9ae8-8e5e-4e3c-b62d-cf9db0d34992 for search ID search-1745434511-6754c40f
2025-04-23 18:55:15,187 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 18:55:15,192 - api.endpoints.system_messages - ERROR - Database error updating system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: UPDATE system_messages 
                          SET content = %(content)s, timestamp = %(timestamp)s 
                          WHERE id = %(id)s]
[parameters: {'content': '{"status": "complete", "message": "Searched the web for: capital of France", "timestamp": "2025-04-23T18:55:15.184589"}', 'timestamp': '2025-04-23T18:55:15.188146', 'id': 'sys_4fdb9ae8-8e5e-4e3c-b62d-cf9db0d34992'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 18:55:15,193 - ActionHandler_User123 - INFO - Successfully updated system message sys_4fdb9ae8-8e5e-4e3c-b62d-cf9db0d34992
2025-04-23 18:55:15,198 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:55:15,198 - managers.user_session_manager - INFO - Created new session ID: 7213f80d-5c44-495e-a045-be2225538cf3 for user: 123
2025-04-23 18:55:15,199 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 7213f80d-5c44-495e-a045-be2225538cf3
2025-04-23 18:55:15,199 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 18:55:15,200 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 18:55:15,200 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 18:55:15,202 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 18:55:15,203 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 18:55:15,204 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 18:55:15,204 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:55:15,204 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 18:55:15,205 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 7213f80d-5c44-495e-a045-be2225538cf3
2025-04-23 18:55:15,205 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:55:15,205 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 18:55:15,205 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 7213f80d-5c44-495e-a045-be2225538cf3 to /app/data/sessions/123/7213f80d-5c44-495e-a045-be2225538cf3/transcript.json
2025-04-23 18:55:15,207 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/7213f80d-5c44-495e-a045-be2225538cf3/transcript.json
2025-04-23 18:55:15,210 - managers.chat_file_manager - INFO - Session metadata for 7213f80d-5c44-495e-a045-be2225538cf3 saved/updated in DB.
2025-04-23 18:55:15,214 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 18:55:15,215 - api.endpoints.chat - INFO - Received chat message from user 123: Can you explain how a three-tier memory system wor...
2025-04-23 18:55:15,217 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 18:55:15,218 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_502ee750-b0da-4178-bf62-85ac3fe15b94', 'timestamp': '2025-04-23T18:55:15.217354', 'session_id': '7213f80d-5c44-495e-a045-be2225538cf3', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-23T18:55:15.215386"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 18:55:15,220 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 18:55:15,220 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 18:55:15,220 - components.prompt_builder - INFO - Constructing prompt for session 7213f80d-5c44-495e-a045-be2225538cf3, user 123, depth 0
2025-04-23 18:55:15,221 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 18:55:15,221 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Can you explain how a three-tier memory system works in an AI assistant?'
2025-04-23 18:55:15,221 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 18:55:15,221 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 18:55:15,221 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 18:55:15,221 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 18:55:15,222 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 18:55:15,222 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 18:55:15,222 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 18:55:19,399 - CtxMemMgr_User123 - INFO - Loading session 7213f80d-5c44-495e-a045-be2225538cf3 for processing assistant message
2025-04-23 18:55:19,400 - CtxMemMgr_User123 - INFO - Loading session context for 7213f80d-5c44-495e-a045-be2225538cf3 from /app/data/sessions/123/7213f80d-5c44-495e-a045-be2225538cf3/context.json
2025-04-23 18:55:19,400 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/7213f80d-5c44-495e-a045-be2225538cf3/context.json not found. Initializing empty context for new session 7213f80d-5c44-495e-a045-be2225538cf3.
2025-04-23 18:55:19,401 - CtxMemMgr_User123 - INFO - Stored turn c2a8420b-1263-4d90-a035-d077ce0a1f9a for active session 7213f80d-5c44-495e-a045-be2225538cf3
2025-04-23 18:55:19,401 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 7213f80d-5c44-495e-a045-be2225538cf3: '...'
2025-04-23 18:55:19,402 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:19,403 - CtxMemMgr_User123 - INFO - Session 7213f80d-5c44-495e-a045-be2225538cf3: Active history token count ~18 / 30000
2025-04-23 18:55:19,403 - CtxMemMgr_User123 - INFO - Saving active session context for 7213f80d-5c44-495e-a045-be2225538cf3 to /app/data/sessions/123/7213f80d-5c44-495e-a045-be2225538cf3/context.json
2025-04-23 18:55:19,407 - CtxMemMgr_User123 - INFO - Successfully saved context for session 7213f80d-5c44-495e-a045-be2225538cf3
2025-04-23 18:55:19,407 - ActionHandler_User123 - INFO - Processing LLM response for session 7213f80d-5c44-495e-a045-be2225538cf3, user 123
2025-04-23 18:55:19,408 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: 7213f80d-5c44-495e-a045-be2225538cf3).
2025-04-23 18:55:19,408 - CtxMemMgr_User123 - INFO - Stored turn 3c24ee50-5c31-40de-8dad-e562c0e3e537 for active session 7213f80d-5c44-495e-a045-be2225538cf3
2025-04-23 18:55:19,408 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 7213f80d-5c44-495e-a045-be2225538cf3: '...'
2025-04-23 18:55:19,409 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 18:55:19,409 - CtxMemMgr_User123 - INFO - Session 7213f80d-5c44-495e-a045-be2225538cf3: Active history token count ~36 / 30000
2025-04-23 18:55:19,409 - CtxMemMgr_User123 - INFO - Saving active session context for 7213f80d-5c44-495e-a045-be2225538cf3 to /app/data/sessions/123/7213f80d-5c44-495e-a045-be2225538cf3/context.json
2025-04-23 18:55:19,413 - CtxMemMgr_User123 - INFO - Successfully saved context for session 7213f80d-5c44-495e-a045-be2225538cf3
2025-04-23 18:55:19,413 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-23 19:13:41,112 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 19:13:41,113 - managers.user_session_manager - INFO - Created new session ID: 60378ebf-bcc8-4e5a-bc2c-a5e24579db64 for user: 123
2025-04-23 19:13:41,113 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 60378ebf-bcc8-4e5a-bc2c-a5e24579db64
2025-04-23 19:13:41,114 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 19:13:41,114 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 19:13:41,115 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 19:13:41,118 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 19:13:41,119 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 19:13:41,119 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 19:13:41,119 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 19:13:41,119 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 19:13:41,120 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 60378ebf-bcc8-4e5a-bc2c-a5e24579db64
2025-04-23 19:13:41,120 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 19:13:41,120 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 19:13:41,120 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64 to /app/data/sessions/123/60378ebf-bcc8-4e5a-bc2c-a5e24579db64/transcript.json
2025-04-23 19:13:41,122 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/60378ebf-bcc8-4e5a-bc2c-a5e24579db64/transcript.json
2025-04-23 19:13:41,124 - managers.chat_file_manager - INFO - Session metadata for 60378ebf-bcc8-4e5a-bc2c-a5e24579db64 saved/updated in DB.
2025-04-23 19:13:41,133 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 19:13:41,134 - api.endpoints.chat - INFO - Received chat message from user 123: I need information about Paris. Please do a web se...
2025-04-23 19:13:41,140 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 19:13:41,143 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_047c28e7-043f-4d34-be7f-0795a1b6f0f6', 'timestamp': '2025-04-23T19:13:41.140693', 'session_id': '60378ebf-bcc8-4e5a-bc2c-a5e24579db64', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-23T19:13:41.135618"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 19:13:41,145 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 19:13:41,145 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 19:13:41,145 - components.prompt_builder - INFO - Constructing prompt for session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64, user 123, depth 0
2025-04-23 19:13:41,145 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 19:13:41,146 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I need information about Paris. Please do a web search with the exact search term [SEARCH: What is Paris famous for]'
2025-04-23 19:13:41,146 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 19:13:41,146 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 19:13:41,146 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 19:13:41,146 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 19:13:41,147 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 19:13:41,147 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 19:13:41,147 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 19:13:43,447 - CtxMemMgr_User123 - INFO - Loading session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64 for processing assistant message
2025-04-23 19:13:43,447 - CtxMemMgr_User123 - INFO - Loading session context for 60378ebf-bcc8-4e5a-bc2c-a5e24579db64 from /app/data/sessions/123/60378ebf-bcc8-4e5a-bc2c-a5e24579db64/context.json
2025-04-23 19:13:43,450 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/60378ebf-bcc8-4e5a-bc2c-a5e24579db64/context.json not found. Initializing empty context for new session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64.
2025-04-23 19:13:43,451 - CtxMemMgr_User123 - INFO - Stored turn aafe7e99-3342-4d6b-9229-36144c5047de for active session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64
2025-04-23 19:13:43,452 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64: '...'
2025-04-23 19:13:43,453 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 19:13:43,455 - CtxMemMgr_User123 - INFO - Session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64: Active history token count ~29 / 30000
2025-04-23 19:13:43,455 - CtxMemMgr_User123 - INFO - Saving active session context for 60378ebf-bcc8-4e5a-bc2c-a5e24579db64 to /app/data/sessions/123/60378ebf-bcc8-4e5a-bc2c-a5e24579db64/context.json
2025-04-23 19:13:43,461 - CtxMemMgr_User123 - INFO - Successfully saved context for session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64
2025-04-23 19:13:43,463 - ActionHandler_User123 - INFO - Processing LLM response for session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64, user 123
2025-04-23 19:13:43,463 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: 'What is Paris famous for' (Session: 60378ebf-bcc8-4e5a-bc2c-a5e24579db64)
2025-04-23 19:13:43,465 - CtxMemMgr_User123 - INFO - Stored turn 829d5966-8533-41f6-b987-e9072c57188b for active session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64
2025-04-23 19:13:43,465 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64: '...'
2025-04-23 19:13:43,466 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 19:13:43,467 - CtxMemMgr_User123 - INFO - Session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64: Active history token count ~58 / 30000
2025-04-23 19:13:43,467 - CtxMemMgr_User123 - INFO - Saving active session context for 60378ebf-bcc8-4e5a-bc2c-a5e24579db64 to /app/data/sessions/123/60378ebf-bcc8-4e5a-bc2c-a5e24579db64/context.json
2025-04-23 19:13:43,473 - CtxMemMgr_User123 - INFO - Successfully saved context for session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64
2025-04-23 19:13:43,475 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745435623-60378ebf) ***
2025-04-23 19:13:43,477 - ActionHandler_User123 - INFO - Storing search status for session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64: active
2025-04-23 19:13:43,483 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 19:13:43,487 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_6bda311d-bb47-4a39-b3cf-5a18b9970d95', 'timestamp': '2025-04-23T19:13:43.484431', 'session_id': '60378ebf-bcc8-4e5a-bc2c-a5e24579db64', 'message_type': 'web_search', 'content': '{"status": "active", "message": "Searching the web for: What is Paris famous for", "search_id": "search-1745435623-60378ebf", "timestamp": "2025-04-23T19:13:43.477281"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 19:13:43,488 - ActionHandler_User123 - INFO - Stored system message ID sys_6bda311d-bb47-4a39-b3cf-5a18b9970d95 for search ID search-1745435623-60378ebf
2025-04-23 19:13:43,488 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session 60378ebf-bcc8-4e5a-bc2c-a5e24579db64
2025-04-23 19:13:43,490 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: 'What is Paris famous for'
2025-04-23 19:13:43,490 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-23 19:13:43,490 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-23 19:13:43,490 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-23 19:13:43,491 - ActionHandler_User123 - INFO - Calling perform_search function for query: 'What is Paris famous for'
2025-04-23 19:13:43,492 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for'
2025-04-23 19:13:43,492 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for'
2025-04-23 19:13:48,637 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is known as the City of Love and ...
2025-04-23 19:13:48,637 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is known as the City of Love and the City of Light.

1. ...
2025-04-23 19:13:48,638 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-23 19:13:48,640 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-23 19:13:48,641 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1831
2025-04-23 19:13:48,642 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Lou...
2025-04-23 19:13:48,642 - ActionHandler_User123 - INFO - Updating system message sys_6bda311d-bb47-4a39-b3cf-5a18b9970d95 for search ID search-1745435623-60378ebf
2025-04-23 19:13:48,647 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 19:13:48,656 - api.endpoints.system_messages - ERROR - Database error updating system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: UPDATE system_messages 
                          SET content = %(content)s, timestamp = %(timestamp)s 
                          WHERE id = %(id)s]
[parameters: {'content': '{"status": "complete", "message": "Searched the web for: What is Paris famous for", "timestamp": "2025-04-23T19:13:48.642759"}', 'timestamp': '2025-04-23T19:13:48.650859', 'id': 'sys_6bda311d-bb47-4a39-b3cf-5a18b9970d95'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 19:13:48,659 - ActionHandler_User123 - INFO - Successfully updated system message sys_6bda311d-bb47-4a39-b3cf-5a18b9970d95
2025-04-23 19:17:53,363 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 19:17:53,364 - managers.user_session_manager - INFO - Created new session ID: 4e3ac155-af65-4934-93ad-838f7314a09f for user: 123
2025-04-23 19:17:53,364 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 4e3ac155-af65-4934-93ad-838f7314a09f
2025-04-23 19:17:53,365 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 19:17:53,365 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 19:17:53,366 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 19:17:53,368 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 19:17:53,369 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 19:17:53,370 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 19:17:53,370 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 19:17:53,370 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 19:17:53,370 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 4e3ac155-af65-4934-93ad-838f7314a09f
2025-04-23 19:17:53,371 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 19:17:53,371 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 19:17:53,371 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 4e3ac155-af65-4934-93ad-838f7314a09f to /app/data/sessions/123/4e3ac155-af65-4934-93ad-838f7314a09f/transcript.json
2025-04-23 19:17:53,374 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/4e3ac155-af65-4934-93ad-838f7314a09f/transcript.json
2025-04-23 19:17:53,376 - managers.chat_file_manager - INFO - Session metadata for 4e3ac155-af65-4934-93ad-838f7314a09f saved/updated in DB.
2025-04-23 19:17:53,386 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 19:17:53,386 - api.endpoints.chat - INFO - Received chat message from user 123: I need information about Paris. Please do a web se...
2025-04-23 19:17:53,390 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 19:17:53,393 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_49016523-5602-4566-ba96-e30bc3aae120', 'timestamp': '2025-04-23T19:17:53.391177', 'session_id': '4e3ac155-af65-4934-93ad-838f7314a09f', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-23T19:17:53.387000"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 19:17:53,395 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 19:17:53,395 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 19:17:53,395 - components.prompt_builder - INFO - Constructing prompt for session 4e3ac155-af65-4934-93ad-838f7314a09f, user 123, depth 0
2025-04-23 19:17:53,395 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 19:17:53,395 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I need information about Paris. Please do a web search with the exact search term [SEARCH: What is Paris famous for]'
2025-04-23 19:17:53,396 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 19:17:53,396 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 19:17:53,396 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 19:17:53,396 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 19:17:53,397 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 19:17:53,397 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 19:17:53,398 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 19:17:55,780 - CtxMemMgr_User123 - INFO - Loading session 4e3ac155-af65-4934-93ad-838f7314a09f for processing assistant message
2025-04-23 19:17:55,781 - CtxMemMgr_User123 - INFO - Loading session context for 4e3ac155-af65-4934-93ad-838f7314a09f from /app/data/sessions/123/4e3ac155-af65-4934-93ad-838f7314a09f/context.json
2025-04-23 19:17:55,786 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/4e3ac155-af65-4934-93ad-838f7314a09f/context.json not found. Initializing empty context for new session 4e3ac155-af65-4934-93ad-838f7314a09f.
2025-04-23 19:17:55,788 - CtxMemMgr_User123 - INFO - Stored turn 1dabb562-13e1-4baf-af3b-5e8c2bc68fbf for active session 4e3ac155-af65-4934-93ad-838f7314a09f
2025-04-23 19:17:55,792 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 4e3ac155-af65-4934-93ad-838f7314a09f: '...'
2025-04-23 19:17:55,793 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 19:17:55,796 - CtxMemMgr_User123 - INFO - Session 4e3ac155-af65-4934-93ad-838f7314a09f: Active history token count ~29 / 30000
2025-04-23 19:17:55,796 - CtxMemMgr_User123 - INFO - Saving active session context for 4e3ac155-af65-4934-93ad-838f7314a09f to /app/data/sessions/123/4e3ac155-af65-4934-93ad-838f7314a09f/context.json
2025-04-23 19:17:55,811 - CtxMemMgr_User123 - INFO - Successfully saved context for session 4e3ac155-af65-4934-93ad-838f7314a09f
2025-04-23 19:17:55,812 - ActionHandler_User123 - INFO - Processing LLM response for session 4e3ac155-af65-4934-93ad-838f7314a09f, user 123
2025-04-23 19:17:55,813 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: 'What is Paris famous for' (Session: 4e3ac155-af65-4934-93ad-838f7314a09f)
2025-04-23 19:17:55,813 - CtxMemMgr_User123 - INFO - Stored turn 8e968658-8488-4f2e-bdf0-0cfb6a754b6f for active session 4e3ac155-af65-4934-93ad-838f7314a09f
2025-04-23 19:17:55,814 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 4e3ac155-af65-4934-93ad-838f7314a09f: '...'
2025-04-23 19:17:55,814 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 19:17:55,815 - CtxMemMgr_User123 - INFO - Session 4e3ac155-af65-4934-93ad-838f7314a09f: Active history token count ~58 / 30000
2025-04-23 19:17:55,815 - CtxMemMgr_User123 - INFO - Saving active session context for 4e3ac155-af65-4934-93ad-838f7314a09f to /app/data/sessions/123/4e3ac155-af65-4934-93ad-838f7314a09f/context.json
2025-04-23 19:17:55,821 - CtxMemMgr_User123 - INFO - Successfully saved context for session 4e3ac155-af65-4934-93ad-838f7314a09f
2025-04-23 19:17:55,822 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745435875-4e3ac155) ***
2025-04-23 19:17:55,823 - ActionHandler_User123 - INFO - Storing search status for session 4e3ac155-af65-4934-93ad-838f7314a09f: active
2025-04-23 19:17:55,834 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 19:17:55,836 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_cf36226b-4c87-4feb-9fff-e3903b040b73', 'timestamp': '2025-04-23T19:17:55.835173', 'session_id': '4e3ac155-af65-4934-93ad-838f7314a09f', 'message_type': 'web_search', 'content': '{"status": "active", "message": "Searching the web for: What is Paris famous for", "search_id": "search-1745435875-4e3ac155", "timestamp": "2025-04-23T19:17:55.823671"}'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 19:17:55,837 - ActionHandler_User123 - INFO - Stored system message ID sys_cf36226b-4c87-4feb-9fff-e3903b040b73 for search ID search-1745435875-4e3ac155
2025-04-23 19:17:55,837 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session 4e3ac155-af65-4934-93ad-838f7314a09f
2025-04-23 19:17:55,837 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: 'What is Paris famous for'
2025-04-23 19:17:55,837 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-23 19:17:55,837 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-23 19:17:55,837 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-23 19:17:55,837 - ActionHandler_User123 - INFO - Calling perform_search function for query: 'What is Paris famous for'
2025-04-23 19:17:55,838 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for'
2025-04-23 19:17:55,838 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for'
2025-04-23 19:17:58,873 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is known as the City of Love and ...
2025-04-23 19:17:58,873 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is known as the City of Love and the City of Light.

1. ...
2025-04-23 19:17:58,874 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-23 19:17:58,875 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-23 19:17:58,875 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1831
2025-04-23 19:17:58,875 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Lou...
2025-04-23 19:17:58,876 - ActionHandler_User123 - INFO - Updating system message sys_cf36226b-4c87-4feb-9fff-e3903b040b73 for search ID search-1745435875-4e3ac155
2025-04-23 19:17:58,881 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 19:17:58,889 - api.endpoints.system_messages - ERROR - Database error updating system message: (pymysql.err.ProgrammingError) (1146, "Table 'rai_chat.system_messages' doesn't exist")
[SQL: UPDATE system_messages 
                          SET content = %(content)s, timestamp = %(timestamp)s 
                          WHERE id = %(id)s]
[parameters: {'content': '{"status": "complete", "message": "Searched the web for: What is Paris famous for", "timestamp": "2025-04-23T19:17:58.876347"}', 'timestamp': '2025-04-23T19:17:58.882649', 'id': 'sys_cf36226b-4c87-4feb-9fff-e3903b040b73'}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-23 19:17:58,892 - ActionHandler_User123 - INFO - Successfully updated system message sys_cf36226b-4c87-4feb-9fff-e3903b040b73
2025-04-23 19:42:02,965 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 19:42:02,965 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 19:42:02,965 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 19:42:02,999 - core.database.connection - INFO - Database connection successful!
2025-04-23 19:42:02,999 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 19:42:03,026 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 19:42:03,032 - core.database.connection - INFO - Default user already exists.
2025-04-23 19:42:03,045 - app - INFO - Auth blueprint registered successfully
2025-04-23 19:42:03,058 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 19:42:03,058 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 19:42:03,059 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 19:42:03,059 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 19:42:03,059 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 19:42:03,059 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 19:42:03,059 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 19:42:03,059 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 19:42:03,067 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 19:42:03,067 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 19:42:03,067 - components.action_handler - INFO - Web search functionality is available
2025-04-23 19:42:03,068 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 19:42:03,068 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 19:42:03,068 - app - INFO - Chat blueprint registered successfully
2025-04-23 19:42:03,069 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 19:42:03,070 - app - INFO - Session blueprint registered successfully
2025-04-23 19:42:03,071 - app - INFO - Memory blueprint registered successfully
2025-04-23 19:42:03,073 - app - INFO - System Messages blueprint registered successfully
2025-04-23 19:42:03,073 - app - INFO - Basic endpoints registered successfully
2025-04-23 19:42:03,077 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 19:45:42,380 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 19:45:42,381 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 19:45:42,384 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 19:45:42,387 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 19:45:42,390 - managers.user_session_manager - INFO - Created new session ID: 2ddb13db-6b7a-45f7-8063-f05c81fe6c27 for user: 123
2025-04-23 19:45:42,393 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 2ddb13db-6b7a-45f7-8063-f05c81fe6c27
2025-04-23 19:45:42,415 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 19:45:42,417 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 19:45:42,417 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 19:45:42,417 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 19:45:42,424 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 19:45:42,425 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 19:45:42,425 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 19:45:42,426 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 19:45:42,426 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 19:45:42,426 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 2ddb13db-6b7a-45f7-8063-f05c81fe6c27
2025-04-23 19:45:42,426 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 19:45:42,426 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 19:45:42,426 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27 to /app/data/sessions/123/2ddb13db-6b7a-45f7-8063-f05c81fe6c27/transcript.json
2025-04-23 19:45:42,427 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/2ddb13db-6b7a-45f7-8063-f05c81fe6c27/transcript.json
2025-04-23 19:45:42,432 - managers.chat_file_manager - INFO - Session metadata for 2ddb13db-6b7a-45f7-8063-f05c81fe6c27 saved/updated in DB.
2025-04-23 19:45:42,447 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 19:45:42,447 - api.endpoints.chat - INFO - Received chat message from user 123: I need information about Paris. Please do a web se...
2025-04-23 19:45:42,451 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 19:45:42,454 - api.endpoints.system_messages - INFO - Stored system message sys_23e6e030-dbfa-4e9a-90c1-c2507472e6a3 in database
2025-04-23 19:45:42,456 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 19:45:42,457 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 19:45:42,457 - components.prompt_builder - INFO - Constructing prompt for session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27, user 123, depth 0
2025-04-23 19:45:42,457 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 19:45:42,457 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I need information about Paris. Please do a web search with the exact search term [SEARCH: What is Paris famous for]'
2025-04-23 19:45:42,457 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 19:45:42,457 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 19:45:42,457 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 19:45:42,458 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 19:45:42,458 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 19:45:42,459 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 19:45:42,459 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 19:45:44,546 - CtxMemMgr_User123 - INFO - Loading session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27 for processing assistant message
2025-04-23 19:45:44,549 - CtxMemMgr_User123 - INFO - Loading session context for 2ddb13db-6b7a-45f7-8063-f05c81fe6c27 from /app/data/sessions/123/2ddb13db-6b7a-45f7-8063-f05c81fe6c27/context.json
2025-04-23 19:45:44,549 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/2ddb13db-6b7a-45f7-8063-f05c81fe6c27/context.json not found. Initializing empty context for new session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27.
2025-04-23 19:45:44,549 - CtxMemMgr_User123 - INFO - Stored turn f33e4bd7-9e44-40b7-8921-9c02ccbd5886 for active session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27
2025-04-23 19:45:44,550 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27: '...'
2025-04-23 19:45:44,551 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 19:45:44,552 - CtxMemMgr_User123 - INFO - Session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27: Active history token count ~29 / 30000
2025-04-23 19:45:44,552 - CtxMemMgr_User123 - INFO - Saving active session context for 2ddb13db-6b7a-45f7-8063-f05c81fe6c27 to /app/data/sessions/123/2ddb13db-6b7a-45f7-8063-f05c81fe6c27/context.json
2025-04-23 19:45:44,554 - CtxMemMgr_User123 - INFO - Successfully saved context for session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27
2025-04-23 19:45:44,554 - ActionHandler_User123 - INFO - Processing LLM response for session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27, user 123
2025-04-23 19:45:44,555 - ActionHandler_User123 - INFO - Web search detected with pattern: \[SEARCH:\s*(.+?)\s*\]
2025-04-23 19:45:44,555 - ActionHandler_User123 - INFO - Extracted query: 'What is Paris famous for'
2025-04-23 19:45:44,555 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: 'What is Paris famous for' (Session: 2ddb13db-6b7a-45f7-8063-f05c81fe6c27)
2025-04-23 19:45:44,556 - CtxMemMgr_User123 - INFO - Stored turn 98f98ffd-f57c-41f8-983d-547cf9dc1143 for active session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27
2025-04-23 19:45:44,556 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27: '...'
2025-04-23 19:45:44,556 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 19:45:44,556 - CtxMemMgr_User123 - INFO - Session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27: Active history token count ~58 / 30000
2025-04-23 19:45:44,556 - CtxMemMgr_User123 - INFO - Saving active session context for 2ddb13db-6b7a-45f7-8063-f05c81fe6c27 to /app/data/sessions/123/2ddb13db-6b7a-45f7-8063-f05c81fe6c27/context.json
2025-04-23 19:45:44,558 - CtxMemMgr_User123 - INFO - Successfully saved context for session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27
2025-04-23 19:45:44,558 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745437544-2ddb13db) ***
2025-04-23 19:45:44,558 - ActionHandler_User123 - INFO - Storing search status for session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27: active
2025-04-23 19:45:44,562 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 19:45:44,565 - api.endpoints.system_messages - INFO - Stored system message sys_c1a1f1ef-e4a8-45e9-b857-e57706545742 in database
2025-04-23 19:45:44,566 - ActionHandler_User123 - INFO - Stored system message ID sys_c1a1f1ef-e4a8-45e9-b857-e57706545742 for search ID search-1745437544-2ddb13db
2025-04-23 19:45:44,566 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session 2ddb13db-6b7a-45f7-8063-f05c81fe6c27
2025-04-23 19:45:44,567 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: 'What is Paris famous for'
2025-04-23 19:45:44,567 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-23 19:45:44,567 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-23 19:45:44,567 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-23 19:45:44,567 - ActionHandler_User123 - INFO - Calling perform_search function for query: 'What is Paris famous for'
2025-04-23 19:45:44,567 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for'
2025-04-23 19:45:44,568 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for'
2025-04-23 19:45:46,895 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is known as the City of Love and ...
2025-04-23 19:45:46,896 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is known as the City of Love and the City of Light.

1. ...
2025-04-23 19:45:46,896 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-23 19:45:46,896 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-23 19:45:46,896 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1831
2025-04-23 19:45:46,896 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Lou...
2025-04-23 19:45:46,897 - ActionHandler_User123 - INFO - Updating system message sys_c1a1f1ef-e4a8-45e9-b857-e57706545742 for search ID search-1745437544-2ddb13db
2025-04-23 19:45:46,899 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 19:45:46,904 - api.endpoints.system_messages - INFO - Updated system message sys_c1a1f1ef-e4a8-45e9-b857-e57706545742 in database
2025-04-23 19:45:46,905 - ActionHandler_User123 - INFO - Successfully updated system message sys_c1a1f1ef-e4a8-45e9-b857-e57706545742
2025-04-23 20:00:29,363 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 20:00:29,363 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 20:00:29,363 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 20:00:29,376 - core.database.connection - INFO - Database connection successful!
2025-04-23 20:00:29,376 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 20:00:29,378 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 20:00:29,383 - core.database.connection - INFO - Default user already exists.
2025-04-23 20:00:29,396 - app - INFO - Auth blueprint registered successfully
2025-04-23 20:00:29,408 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 20:00:29,408 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 20:00:29,408 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 20:00:29,408 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 20:00:29,408 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 20:00:29,408 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 20:00:29,408 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 20:00:29,408 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 20:00:29,412 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 20:00:29,412 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 20:00:29,412 - components.action_handler - INFO - Web search functionality is available
2025-04-23 20:00:29,413 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 20:00:29,413 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 20:00:29,413 - app - INFO - Chat blueprint registered successfully
2025-04-23 20:00:29,414 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 20:00:29,415 - app - INFO - Session blueprint registered successfully
2025-04-23 20:00:29,416 - app - INFO - Memory blueprint registered successfully
2025-04-23 20:00:29,418 - app - INFO - System Messages blueprint registered successfully
2025-04-23 20:00:29,419 - app - INFO - Basic endpoints registered successfully
2025-04-23 20:00:29,422 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 20:06:28,000 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:06:28,001 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 20:06:28,001 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 20:06:28,002 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 20:06:28,002 - managers.user_session_manager - INFO - Created new session ID: ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a for user: 123
2025-04-23 20:06:28,002 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a
2025-04-23 20:06:28,003 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 20:06:28,004 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 20:06:28,004 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 20:06:28,004 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 20:06:28,009 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:06:28,010 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 20:06:28,010 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 20:06:28,011 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:06:28,011 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:06:28,012 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a
2025-04-23 20:06:28,012 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:06:28,012 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:06:28,013 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a to /app/data/sessions/123/ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a/transcript.json
2025-04-23 20:06:28,015 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a/transcript.json
2025-04-23 20:06:28,022 - managers.chat_file_manager - INFO - Session metadata for ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a saved/updated in DB.
2025-04-23 20:06:28,032 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:06:28,033 - api.endpoints.chat - INFO - Received chat message from user 123: I need information about Paris. Please do a web se...
2025-04-23 20:06:28,035 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:06:28,038 - api.endpoints.system_messages - INFO - Stored system message sys_498d8c44-8c1c-40b8-83bf-10363d1e36d2 in database
2025-04-23 20:06:28,040 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:06:28,040 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 20:06:28,040 - components.prompt_builder - INFO - Constructing prompt for session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a, user 123, depth 0
2025-04-23 20:06:28,040 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 20:06:28,041 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I need information about Paris. Please do a web search with the exact search term [SEARCH: What is Paris famous for]'
2025-04-23 20:06:28,041 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 20:06:28,041 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 20:06:28,041 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 20:06:28,041 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 20:06:28,042 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:06:28,042 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 20:06:28,042 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 20:06:30,350 - CtxMemMgr_User123 - INFO - Loading session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a for processing assistant message
2025-04-23 20:06:30,350 - CtxMemMgr_User123 - INFO - Loading session context for ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a from /app/data/sessions/123/ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a/context.json
2025-04-23 20:06:30,351 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a/context.json not found. Initializing empty context for new session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a.
2025-04-23 20:06:30,351 - CtxMemMgr_User123 - INFO - Stored turn 2d62b1b5-0da8-4943-8525-621bc9e00310 for active session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a
2025-04-23 20:06:30,351 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a: '...'
2025-04-23 20:06:30,352 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 20:06:30,352 - CtxMemMgr_User123 - INFO - Session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a: Active history token count ~29 / 30000
2025-04-23 20:06:30,352 - CtxMemMgr_User123 - INFO - Saving active session context for ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a to /app/data/sessions/123/ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a/context.json
2025-04-23 20:06:30,352 - CtxMemMgr_User123 - INFO - Successfully saved context for session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a
2025-04-23 20:06:30,353 - ActionHandler_User123 - INFO - Processing LLM response for session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a, user 123
2025-04-23 20:06:30,353 - ActionHandler_User123 - INFO - Web search detected with pattern: \[SEARCH:\s*(.+?)\s*\]
2025-04-23 20:06:30,353 - ActionHandler_User123 - INFO - Extracted query: 'What is Paris famous for'
2025-04-23 20:06:30,353 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: 'What is Paris famous for' (Session: ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a)
2025-04-23 20:06:30,353 - CtxMemMgr_User123 - INFO - Stored turn 18486dda-42e6-484b-abdb-a127c1d2d31a for active session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a
2025-04-23 20:06:30,353 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a: '...'
2025-04-23 20:06:30,353 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 20:06:30,353 - CtxMemMgr_User123 - INFO - Session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a: Active history token count ~58 / 30000
2025-04-23 20:06:30,353 - CtxMemMgr_User123 - INFO - Saving active session context for ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a to /app/data/sessions/123/ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a/context.json
2025-04-23 20:06:30,354 - CtxMemMgr_User123 - INFO - Successfully saved context for session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a
2025-04-23 20:06:30,354 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745438790-ef5dc8cb) ***
2025-04-23 20:06:30,354 - ActionHandler_User123 - INFO - Storing search status for session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a: active
2025-04-23 20:06:30,356 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:06:30,358 - api.endpoints.system_messages - INFO - Stored system message sys_43a6d68a-48c2-4bb7-8524-5db1475bf5ff in database
2025-04-23 20:06:30,358 - ActionHandler_User123 - INFO - Stored system message ID sys_43a6d68a-48c2-4bb7-8524-5db1475bf5ff for search ID search-1745438790-ef5dc8cb
2025-04-23 20:06:30,358 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session ef5dc8cb-e6f0-4c36-a20c-efa7cdc2287a
2025-04-23 20:06:30,359 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: 'What is Paris famous for'
2025-04-23 20:06:30,359 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-23 20:06:30,359 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-23 20:06:30,359 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-23 20:06:30,359 - ActionHandler_User123 - INFO - Calling perform_search function for query: 'What is Paris famous for'
2025-04-23 20:06:30,359 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for'
2025-04-23 20:06:30,359 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for'
2025-04-23 20:06:32,997 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is known as the City of Love and ...
2025-04-23 20:06:32,997 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is known as the City of Love and the City of Light.

1. ...
2025-04-23 20:06:32,998 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-23 20:06:32,998 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-23 20:06:32,998 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1831
2025-04-23 20:06:32,999 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Lou...
2025-04-23 20:06:32,999 - ActionHandler_User123 - INFO - Updating system message sys_43a6d68a-48c2-4bb7-8524-5db1475bf5ff for search ID search-1745438790-ef5dc8cb
2025-04-23 20:06:33,003 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:06:33,007 - api.endpoints.system_messages - INFO - Updated system message sys_43a6d68a-48c2-4bb7-8524-5db1475bf5ff in database
2025-04-23 20:06:33,009 - ActionHandler_User123 - INFO - Successfully updated system message sys_43a6d68a-48c2-4bb7-8524-5db1475bf5ff
2025-04-23 20:06:33,013 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:06:33,018 - api.endpoints.system_messages - INFO - Stored system message sys_9ab548b6-6e00-47c3-b506-e4d13b62bb53 in database
2025-04-23 20:07:31,608 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 20:07:31,609 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 20:07:31,609 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 20:07:31,622 - core.database.connection - INFO - Database connection successful!
2025-04-23 20:07:31,622 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 20:07:31,624 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 20:07:31,629 - core.database.connection - INFO - Default user already exists.
2025-04-23 20:07:31,641 - app - INFO - Auth blueprint registered successfully
2025-04-23 20:07:31,649 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 20:07:31,649 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 20:07:31,649 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 20:07:31,650 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 20:07:31,650 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 20:07:31,650 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 20:07:31,650 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 20:07:31,650 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 20:07:31,654 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 20:07:31,654 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 20:07:31,654 - components.action_handler - INFO - Web search functionality is available
2025-04-23 20:07:31,654 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 20:07:31,655 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 20:07:31,655 - app - INFO - Chat blueprint registered successfully
2025-04-23 20:07:31,656 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 20:07:31,657 - app - INFO - Session blueprint registered successfully
2025-04-23 20:07:31,658 - app - INFO - Memory blueprint registered successfully
2025-04-23 20:07:31,659 - app - INFO - System Messages blueprint registered successfully
2025-04-23 20:07:31,661 - app - INFO - Test Search blueprint registered successfully
2025-04-23 20:07:31,662 - app - INFO - Basic endpoints registered successfully
2025-04-23 20:07:31,665 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 20:15:37,942 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:15:37,942 - api.endpoints.test_search - INFO - Initializing Tavily client with API key starting with tvly...
2025-04-23 20:15:37,943 - api.endpoints.test_search - INFO - Performing search for query: 'What is Paris famous for?'
2025-04-23 20:15:41,078 - api.endpoints.test_search - INFO - Search completed successfully with 5 results
2025-04-23 20:18:22,572 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:18:22,573 - api.endpoints.test_search - INFO - Initializing Tavily client with API key starting with tvly...
2025-04-23 20:18:22,573 - api.endpoints.test_search - INFO - Performing search for query: 'What is Paris famous for?'
2025-04-23 20:18:23,963 - api.endpoints.test_search - INFO - Search completed successfully with 5 results
2025-04-23 20:18:24,002 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:18:24,003 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 20:18:24,004 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 20:18:24,004 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 20:18:24,004 - managers.user_session_manager - INFO - Created new session ID: e7ebbdcd-46e8-4cf7-86d2-213ca684fec2 for user: 123
2025-04-23 20:18:24,005 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: e7ebbdcd-46e8-4cf7-86d2-213ca684fec2
2025-04-23 20:18:24,007 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 20:18:24,007 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 20:18:24,008 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 20:18:24,012 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 20:18:24,022 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:18:24,023 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 20:18:24,024 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 20:18:24,025 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:18:24,027 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:18:24,027 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: e7ebbdcd-46e8-4cf7-86d2-213ca684fec2
2025-04-23 20:18:24,028 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:18:24,028 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:18:24,029 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2 to /app/data/sessions/123/e7ebbdcd-46e8-4cf7-86d2-213ca684fec2/transcript.json
2025-04-23 20:18:24,031 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/e7ebbdcd-46e8-4cf7-86d2-213ca684fec2/transcript.json
2025-04-23 20:18:24,039 - managers.chat_file_manager - INFO - Session metadata for e7ebbdcd-46e8-4cf7-86d2-213ca684fec2 saved/updated in DB.
2025-04-23 20:18:24,046 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:18:24,046 - api.endpoints.test_search - INFO - Initializing Tavily client with API key starting with tvly...
2025-04-23 20:18:24,046 - api.endpoints.test_search - INFO - Performing search for query: 'What is Paris famous for?'
2025-04-23 20:18:26,617 - api.endpoints.test_search - INFO - Search completed successfully with 5 results
2025-04-23 20:18:26,622 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:18:26,623 - api.endpoints.chat - INFO - Received chat message from user 123: I need information about Paris. Please do a web se...
2025-04-23 20:18:26,630 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:18:26,639 - api.endpoints.system_messages - INFO - Stored system message sys_54c1e356-c448-4aeb-97bf-ac6613dc7546 in database
2025-04-23 20:18:26,648 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:18:26,648 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 20:18:26,649 - components.prompt_builder - INFO - Constructing prompt for session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2, user 123, depth 0
2025-04-23 20:18:26,649 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 20:18:26,649 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I need information about Paris. Please do a web search with the exact search term [SEARCH: What is Paris famous for]'
2025-04-23 20:18:26,649 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 20:18:26,650 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 20:18:26,650 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 20:18:26,650 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 20:18:26,651 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:18:26,651 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 20:18:26,652 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 20:18:28,908 - CtxMemMgr_User123 - INFO - Loading session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2 for processing assistant message
2025-04-23 20:18:28,909 - CtxMemMgr_User123 - INFO - Loading session context for e7ebbdcd-46e8-4cf7-86d2-213ca684fec2 from /app/data/sessions/123/e7ebbdcd-46e8-4cf7-86d2-213ca684fec2/context.json
2025-04-23 20:18:28,910 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/e7ebbdcd-46e8-4cf7-86d2-213ca684fec2/context.json not found. Initializing empty context for new session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2.
2025-04-23 20:18:28,911 - CtxMemMgr_User123 - INFO - Stored turn c638939f-37b4-4374-97e5-b68269acee99 for active session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2
2025-04-23 20:18:28,911 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2: '...'
2025-04-23 20:18:28,914 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 20:18:28,914 - CtxMemMgr_User123 - INFO - Session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2: Active history token count ~29 / 30000
2025-04-23 20:18:28,914 - CtxMemMgr_User123 - INFO - Saving active session context for e7ebbdcd-46e8-4cf7-86d2-213ca684fec2 to /app/data/sessions/123/e7ebbdcd-46e8-4cf7-86d2-213ca684fec2/context.json
2025-04-23 20:18:28,918 - CtxMemMgr_User123 - INFO - Successfully saved context for session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2
2025-04-23 20:18:28,918 - ActionHandler_User123 - INFO - Processing LLM response for session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2, user 123
2025-04-23 20:18:28,920 - ActionHandler_User123 - INFO - Web search detected with pattern: \[SEARCH:\s*(.+?)\s*\]
2025-04-23 20:18:28,920 - ActionHandler_User123 - INFO - Extracted query: 'What is Paris famous for'
2025-04-23 20:18:28,920 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: 'What is Paris famous for' (Session: e7ebbdcd-46e8-4cf7-86d2-213ca684fec2)
2025-04-23 20:18:28,921 - CtxMemMgr_User123 - INFO - Stored turn 971ba633-9742-478b-bcca-76b5540c22ac for active session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2
2025-04-23 20:18:28,921 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2: '...'
2025-04-23 20:18:28,922 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 20:18:28,922 - CtxMemMgr_User123 - INFO - Session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2: Active history token count ~58 / 30000
2025-04-23 20:18:28,923 - CtxMemMgr_User123 - INFO - Saving active session context for e7ebbdcd-46e8-4cf7-86d2-213ca684fec2 to /app/data/sessions/123/e7ebbdcd-46e8-4cf7-86d2-213ca684fec2/context.json
2025-04-23 20:18:28,925 - CtxMemMgr_User123 - INFO - Successfully saved context for session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2
2025-04-23 20:18:28,926 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745439508-e7ebbdcd) ***
2025-04-23 20:18:28,927 - ActionHandler_User123 - INFO - Storing search status for session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2: active
2025-04-23 20:18:28,935 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:18:28,938 - api.endpoints.system_messages - INFO - Stored system message sys_af881dd9-99c6-4cec-86af-9be4977c052e in database
2025-04-23 20:18:28,938 - ActionHandler_User123 - INFO - Stored system message ID sys_af881dd9-99c6-4cec-86af-9be4977c052e for search ID search-1745439508-e7ebbdcd
2025-04-23 20:18:28,939 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session e7ebbdcd-46e8-4cf7-86d2-213ca684fec2
2025-04-23 20:18:28,939 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: 'What is Paris famous for'
2025-04-23 20:18:28,939 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-23 20:18:28,939 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-23 20:18:28,939 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-23 20:18:28,939 - ActionHandler_User123 - INFO - Calling perform_search function for query: 'What is Paris famous for'
2025-04-23 20:18:28,939 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for'
2025-04-23 20:18:28,939 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for'
2025-04-23 20:18:31,401 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is also known for its art, fashio...
2025-04-23 20:18:31,402 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is also known for its art, fashion, and historic landmar...
2025-04-23 20:18:31,403 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-23 20:18:31,403 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-23 20:18:31,404 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1870
2025-04-23 20:18:31,404 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Lou...
2025-04-23 20:18:31,404 - ActionHandler_User123 - INFO - Updating system message sys_af881dd9-99c6-4cec-86af-9be4977c052e for search ID search-1745439508-e7ebbdcd
2025-04-23 20:18:31,408 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:18:31,416 - api.endpoints.system_messages - INFO - Updated system message sys_af881dd9-99c6-4cec-86af-9be4977c052e in database
2025-04-23 20:18:31,418 - ActionHandler_User123 - INFO - Successfully updated system message sys_af881dd9-99c6-4cec-86af-9be4977c052e
2025-04-23 20:18:31,422 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:18:31,428 - api.endpoints.system_messages - INFO - Stored system message sys_d38cf113-8bb4-4043-966f-89bcc31bc5c1 in database
2025-04-23 20:18:31,432 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:20:47,143 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 20:20:47,143 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 20:20:47,143 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 20:20:47,156 - core.database.connection - INFO - Database connection successful!
2025-04-23 20:20:47,156 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 20:20:47,158 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 20:20:47,163 - core.database.connection - INFO - Default user already exists.
2025-04-23 20:20:47,176 - app - INFO - Auth blueprint registered successfully
2025-04-23 20:20:47,188 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 20:20:47,188 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 20:20:47,188 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 20:20:47,188 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 20:20:47,188 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 20:20:47,189 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 20:20:47,189 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 20:20:47,189 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 20:20:47,193 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 20:20:47,193 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 20:20:47,193 - components.action_handler - INFO - Web search functionality is available
2025-04-23 20:20:47,194 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 20:20:47,194 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 20:20:47,194 - app - INFO - Chat blueprint registered successfully
2025-04-23 20:20:47,195 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 20:20:47,197 - app - INFO - Session blueprint registered successfully
2025-04-23 20:20:47,198 - app - INFO - Memory blueprint registered successfully
2025-04-23 20:20:47,199 - app - INFO - System Messages blueprint registered successfully
2025-04-23 20:20:47,200 - app - INFO - Test Search blueprint registered successfully
2025-04-23 20:20:47,201 - app - INFO - Basic endpoints registered successfully
2025-04-23 20:20:47,205 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 20:21:46,316 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:21:46,316 - api.endpoints.test_search - INFO - Initializing Tavily client with API key starting with tvly...
2025-04-23 20:21:46,317 - api.endpoints.test_search - INFO - Performing search for query: 'What is Paris famous for?'
2025-04-23 20:21:47,478 - api.endpoints.test_search - INFO - Search completed successfully with 5 results
2025-04-23 20:21:47,498 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:21:47,498 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 20:21:47,499 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 20:21:47,499 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 20:21:47,500 - managers.user_session_manager - INFO - Created new session ID: 25d496a2-8dbd-4a13-a190-96153141b204 for user: 123
2025-04-23 20:21:47,500 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 25d496a2-8dbd-4a13-a190-96153141b204
2025-04-23 20:21:47,501 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 20:21:47,502 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 20:21:47,502 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 20:21:47,502 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 20:21:47,506 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:21:47,507 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 20:21:47,507 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 20:21:47,507 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:21:47,508 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:21:47,508 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 25d496a2-8dbd-4a13-a190-96153141b204
2025-04-23 20:21:47,508 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:21:47,508 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:21:47,509 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 25d496a2-8dbd-4a13-a190-96153141b204 to /app/data/sessions/123/25d496a2-8dbd-4a13-a190-96153141b204/transcript.json
2025-04-23 20:21:47,511 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/25d496a2-8dbd-4a13-a190-96153141b204/transcript.json
2025-04-23 20:21:47,518 - managers.chat_file_manager - INFO - Session metadata for 25d496a2-8dbd-4a13-a190-96153141b204 saved/updated in DB.
2025-04-23 20:21:47,529 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:21:47,529 - api.endpoints.test_search - INFO - Initializing Tavily client with API key starting with tvly...
2025-04-23 20:21:47,530 - api.endpoints.test_search - INFO - Performing search for query: 'What is Paris famous for?'
2025-04-23 20:21:49,321 - api.endpoints.test_search - INFO - Search completed successfully with 5 results
2025-04-23 20:21:49,327 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:21:49,328 - api.endpoints.chat - INFO - Received chat message from user 123: I need information about Paris. Please do a web se...
2025-04-23 20:21:49,336 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:21:49,344 - api.endpoints.system_messages - INFO - Stored system message sys_89723a98-2aeb-4e94-860d-472f70668f7f in database
2025-04-23 20:21:49,350 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:21:49,351 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 20:21:49,352 - ConvMgr_User123 - INFO - Direct web search requested for: What is Paris famous for
2025-04-23 20:21:49,361 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:21:49,364 - api.endpoints.system_messages - INFO - Stored system message sys_dc19a668-5d9a-4707-89f3-5205b243ca41 in database
2025-04-23 20:21:49,365 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for'
2025-04-23 20:21:49,365 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for'
2025-04-23 20:21:50,715 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is also known for its art, fashio...
2025-04-23 20:21:50,716 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is also known for its art, fashion, and historic landmar...
2025-04-23 20:21:50,720 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:21:50,728 - api.endpoints.system_messages - INFO - Stored system message sys_a5d03de5-2097-41a0-a446-f4b14254a960 in database
2025-04-23 20:21:50,730 - ConvMgr_User123 - INFO - Web search completed, continuing with LLM processing
2025-04-23 20:21:50,730 - components.prompt_builder - INFO - Constructing prompt for session 25d496a2-8dbd-4a13-a190-96153141b204, user 123, depth 0
2025-04-23 20:21:50,731 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 20:21:50,732 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I need information about Paris. Please do a web search with the exact search term [SEARCH: What is Paris famous for]'
2025-04-23 20:21:50,732 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 20:21:50,732 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 20:21:50,732 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 20:21:50,733 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 20:21:50,735 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:21:50,735 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 20:21:50,736 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 20:21:52,779 - CtxMemMgr_User123 - INFO - Loading session 25d496a2-8dbd-4a13-a190-96153141b204 for processing assistant message
2025-04-23 20:21:52,780 - CtxMemMgr_User123 - INFO - Loading session context for 25d496a2-8dbd-4a13-a190-96153141b204 from /app/data/sessions/123/25d496a2-8dbd-4a13-a190-96153141b204/context.json
2025-04-23 20:21:52,781 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/25d496a2-8dbd-4a13-a190-96153141b204/context.json not found. Initializing empty context for new session 25d496a2-8dbd-4a13-a190-96153141b204.
2025-04-23 20:21:52,781 - CtxMemMgr_User123 - INFO - Stored turn e5732fd2-eb4e-4469-bdf9-b943f7186560 for active session 25d496a2-8dbd-4a13-a190-96153141b204
2025-04-23 20:21:52,782 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 25d496a2-8dbd-4a13-a190-96153141b204: '...'
2025-04-23 20:21:52,784 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 20:21:52,784 - CtxMemMgr_User123 - INFO - Session 25d496a2-8dbd-4a13-a190-96153141b204: Active history token count ~29 / 30000
2025-04-23 20:21:52,785 - CtxMemMgr_User123 - INFO - Saving active session context for 25d496a2-8dbd-4a13-a190-96153141b204 to /app/data/sessions/123/25d496a2-8dbd-4a13-a190-96153141b204/context.json
2025-04-23 20:21:52,787 - CtxMemMgr_User123 - INFO - Successfully saved context for session 25d496a2-8dbd-4a13-a190-96153141b204
2025-04-23 20:21:52,787 - ActionHandler_User123 - INFO - Processing LLM response for session 25d496a2-8dbd-4a13-a190-96153141b204, user 123
2025-04-23 20:21:52,788 - ActionHandler_User123 - INFO - Web search detected with pattern: \[SEARCH:\s*(.+?)\s*\]
2025-04-23 20:21:52,788 - ActionHandler_User123 - INFO - Extracted query: 'What is Paris famous for'
2025-04-23 20:21:52,789 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: 'What is Paris famous for' (Session: 25d496a2-8dbd-4a13-a190-96153141b204)
2025-04-23 20:21:52,789 - CtxMemMgr_User123 - INFO - Stored turn 1b5296a1-4b6c-4ffd-ab9f-794cc30cb155 for active session 25d496a2-8dbd-4a13-a190-96153141b204
2025-04-23 20:21:52,790 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 25d496a2-8dbd-4a13-a190-96153141b204: '...'
2025-04-23 20:21:52,790 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 20:21:52,790 - CtxMemMgr_User123 - INFO - Session 25d496a2-8dbd-4a13-a190-96153141b204: Active history token count ~58 / 30000
2025-04-23 20:21:52,791 - CtxMemMgr_User123 - INFO - Saving active session context for 25d496a2-8dbd-4a13-a190-96153141b204 to /app/data/sessions/123/25d496a2-8dbd-4a13-a190-96153141b204/context.json
2025-04-23 20:21:52,796 - CtxMemMgr_User123 - INFO - Successfully saved context for session 25d496a2-8dbd-4a13-a190-96153141b204
2025-04-23 20:21:52,800 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745439712-25d496a2) ***
2025-04-23 20:21:52,801 - ActionHandler_User123 - INFO - Storing search status for session 25d496a2-8dbd-4a13-a190-96153141b204: active
2025-04-23 20:21:52,811 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:21:52,814 - api.endpoints.system_messages - INFO - Stored system message sys_1438efdd-1dab-4d27-b573-612b8acf58ac in database
2025-04-23 20:21:52,815 - ActionHandler_User123 - INFO - Stored system message ID sys_1438efdd-1dab-4d27-b573-612b8acf58ac for search ID search-1745439712-25d496a2
2025-04-23 20:21:52,815 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session 25d496a2-8dbd-4a13-a190-96153141b204
2025-04-23 20:21:52,815 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: 'What is Paris famous for'
2025-04-23 20:21:52,815 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-23 20:21:52,815 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-23 20:21:52,816 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-23 20:21:52,816 - ActionHandler_User123 - INFO - Calling perform_search function for query: 'What is Paris famous for'
2025-04-23 20:21:52,816 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for'
2025-04-23 20:21:52,816 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for'
2025-04-23 20:21:54,816 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is also known for its art, fashio...
2025-04-23 20:21:54,817 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Louvre Museum, and its romantic atmosphere. It is also known for its art, fashion, and historic landmar...
2025-04-23 20:21:54,817 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-23 20:21:54,817 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-23 20:21:54,818 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1870
2025-04-23 20:21:54,818 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: What is Paris famous for

Summary: Paris is famous for the Eiffel Tower, the Lou...
2025-04-23 20:21:54,818 - ActionHandler_User123 - INFO - Updating system message sys_1438efdd-1dab-4d27-b573-612b8acf58ac for search ID search-1745439712-25d496a2
2025-04-23 20:21:54,820 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:21:54,826 - api.endpoints.system_messages - INFO - Updated system message sys_1438efdd-1dab-4d27-b573-612b8acf58ac in database
2025-04-23 20:21:54,828 - ActionHandler_User123 - INFO - Successfully updated system message sys_1438efdd-1dab-4d27-b573-612b8acf58ac
2025-04-23 20:21:54,832 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:21:54,838 - api.endpoints.system_messages - INFO - Stored system message sys_e0331bee-a42f-428f-995f-cc2e1da1f952 in database
2025-04-23 20:21:54,843 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:28:53,820 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:28:53,821 - api.endpoints.test_search - INFO - Initializing Tavily client with API key starting with tvly...
2025-04-23 20:28:53,822 - api.endpoints.test_search - INFO - Performing search for query: 'What is Paris famous for?'
2025-04-23 20:28:55,750 - api.endpoints.test_search - INFO - Search completed successfully with 5 results
2025-04-23 20:28:55,754 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:28:55,755 - managers.user_session_manager - INFO - Created new session ID: 03150861-f2c8-45c5-860a-076845d73228 for user: 123
2025-04-23 20:28:55,755 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 03150861-f2c8-45c5-860a-076845d73228
2025-04-23 20:28:55,756 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 20:28:55,756 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 20:28:55,757 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 20:28:55,761 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:28:55,762 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 20:28:55,763 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 20:28:55,763 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:28:55,763 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:28:55,764 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 03150861-f2c8-45c5-860a-076845d73228
2025-04-23 20:28:55,764 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:28:55,764 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:28:55,765 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 03150861-f2c8-45c5-860a-076845d73228 to /app/data/sessions/123/03150861-f2c8-45c5-860a-076845d73228/transcript.json
2025-04-23 20:28:55,767 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/03150861-f2c8-45c5-860a-076845d73228/transcript.json
2025-04-23 20:28:55,769 - managers.chat_file_manager - INFO - Session metadata for 03150861-f2c8-45c5-860a-076845d73228 saved/updated in DB.
2025-04-23 20:28:55,780 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:28:55,784 - api.endpoints.system_messages - INFO - Stored system message sys_824a4643-eac1-4e37-97bc-c9956315f40e in database
2025-04-23 20:28:55,791 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:28:55,791 - managers.user_session_manager - INFO - Created new session ID: fb786f3b-d253-46bd-bfe9-eddac197dd96 for user: 123
2025-04-23 20:28:55,792 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: fb786f3b-d253-46bd-bfe9-eddac197dd96
2025-04-23 20:28:55,793 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 20:28:55,793 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 20:28:55,793 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 20:28:55,797 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:28:55,798 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 20:28:55,799 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 20:28:55,799 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:28:55,799 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:28:55,800 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: fb786f3b-d253-46bd-bfe9-eddac197dd96
2025-04-23 20:28:55,800 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:28:55,800 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:28:55,801 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session fb786f3b-d253-46bd-bfe9-eddac197dd96 to /app/data/sessions/123/fb786f3b-d253-46bd-bfe9-eddac197dd96/transcript.json
2025-04-23 20:28:55,804 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/fb786f3b-d253-46bd-bfe9-eddac197dd96/transcript.json
2025-04-23 20:28:55,806 - managers.chat_file_manager - INFO - Session metadata for fb786f3b-d253-46bd-bfe9-eddac197dd96 saved/updated in DB.
2025-04-23 20:28:55,816 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:28:55,816 - api.endpoints.chat - INFO - Received chat message from user 123: [SEARCH: What is Paris famous for?]...
2025-04-23 20:28:55,818 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:28:55,824 - api.endpoints.system_messages - INFO - Stored system message sys_323d3693-31d2-43e9-b54f-daa0e2943266 in database
2025-04-23 20:28:55,827 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:28:55,827 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 20:28:55,827 - ConvMgr_User123 - INFO - Direct web search requested for: What is Paris famous for?
2025-04-23 20:28:55,829 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:28:55,831 - api.endpoints.system_messages - INFO - Stored system message sys_a5ed26b4-e567-4cd0-9097-9b2a240d28d5 in database
2025-04-23 20:28:55,832 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for?'
2025-04-23 20:28:55,833 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for?'
2025-04-23 20:28:57,271 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for?', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, the Louvre Museum, and being the City of Love. It is also known for its art, fashio...
2025-04-23 20:28:57,272 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for?

Summary: Paris is famous for the Eiffel Tower, the Louvre Museum, and being the City of Love. It is also known for its art, fashion, and romantic atmosph...
2025-04-23 20:28:57,316 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:28:57,319 - api.endpoints.system_messages - INFO - Stored system message sys_b76a84e9-ca43-4dcb-b2fe-fb80e446dee1 in database
2025-04-23 20:28:57,320 - ConvMgr_User123 - INFO - Web search completed, continuing with LLM processing
2025-04-23 20:28:57,320 - components.prompt_builder - INFO - Constructing prompt for session fb786f3b-d253-46bd-bfe9-eddac197dd96, user 123, depth 0
2025-04-23 20:28:57,320 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 20:28:57,321 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: '[SEARCH: What is Paris famous for?]'
2025-04-23 20:28:57,321 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 20:28:57,321 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 20:28:57,321 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 20:28:57,321 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 20:28:57,322 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:28:57,322 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 20:28:57,322 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 20:28:59,692 - CtxMemMgr_User123 - INFO - Loading session fb786f3b-d253-46bd-bfe9-eddac197dd96 for processing assistant message
2025-04-23 20:28:59,692 - CtxMemMgr_User123 - INFO - Loading session context for fb786f3b-d253-46bd-bfe9-eddac197dd96 from /app/data/sessions/123/fb786f3b-d253-46bd-bfe9-eddac197dd96/context.json
2025-04-23 20:28:59,693 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/fb786f3b-d253-46bd-bfe9-eddac197dd96/context.json not found. Initializing empty context for new session fb786f3b-d253-46bd-bfe9-eddac197dd96.
2025-04-23 20:28:59,693 - CtxMemMgr_User123 - INFO - Stored turn 1f7301c7-3bd2-4053-b036-74a98e87cda4 for active session fb786f3b-d253-46bd-bfe9-eddac197dd96
2025-04-23 20:28:59,693 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session fb786f3b-d253-46bd-bfe9-eddac197dd96: '...'
2025-04-23 20:28:59,694 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 20:28:59,694 - CtxMemMgr_User123 - INFO - Session fb786f3b-d253-46bd-bfe9-eddac197dd96: Active history token count ~8 / 30000
2025-04-23 20:28:59,695 - CtxMemMgr_User123 - INFO - Saving active session context for fb786f3b-d253-46bd-bfe9-eddac197dd96 to /app/data/sessions/123/fb786f3b-d253-46bd-bfe9-eddac197dd96/context.json
2025-04-23 20:28:59,697 - CtxMemMgr_User123 - INFO - Successfully saved context for session fb786f3b-d253-46bd-bfe9-eddac197dd96
2025-04-23 20:28:59,697 - ActionHandler_User123 - INFO - Processing LLM response for session fb786f3b-d253-46bd-bfe9-eddac197dd96, user 123
2025-04-23 20:28:59,697 - ActionHandler_User123 - INFO - Web search detected with pattern: \[SEARCH:\s*(.+?)\s*\]
2025-04-23 20:28:59,698 - ActionHandler_User123 - INFO - Extracted query: 'What is Paris famous for?'
2025-04-23 20:28:59,698 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: 'What is Paris famous for?' (Session: fb786f3b-d253-46bd-bfe9-eddac197dd96)
2025-04-23 20:28:59,698 - CtxMemMgr_User123 - INFO - Stored turn 7aa78506-0d29-45d3-bd98-9b65a81c11be for active session fb786f3b-d253-46bd-bfe9-eddac197dd96
2025-04-23 20:28:59,698 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session fb786f3b-d253-46bd-bfe9-eddac197dd96: '...'
2025-04-23 20:28:59,698 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 20:28:59,699 - CtxMemMgr_User123 - INFO - Session fb786f3b-d253-46bd-bfe9-eddac197dd96: Active history token count ~16 / 30000
2025-04-23 20:28:59,699 - CtxMemMgr_User123 - INFO - Saving active session context for fb786f3b-d253-46bd-bfe9-eddac197dd96 to /app/data/sessions/123/fb786f3b-d253-46bd-bfe9-eddac197dd96/context.json
2025-04-23 20:28:59,701 - CtxMemMgr_User123 - INFO - Successfully saved context for session fb786f3b-d253-46bd-bfe9-eddac197dd96
2025-04-23 20:28:59,701 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745440139-fb786f3b) ***
2025-04-23 20:28:59,701 - ActionHandler_User123 - INFO - Storing search status for session fb786f3b-d253-46bd-bfe9-eddac197dd96: active
2025-04-23 20:28:59,706 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:28:59,712 - api.endpoints.system_messages - INFO - Stored system message sys_87a82fbf-6526-454a-8505-43e054378e36 in database
2025-04-23 20:28:59,714 - ActionHandler_User123 - INFO - Stored system message ID sys_87a82fbf-6526-454a-8505-43e054378e36 for search ID search-1745440139-fb786f3b
2025-04-23 20:28:59,716 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session fb786f3b-d253-46bd-bfe9-eddac197dd96
2025-04-23 20:28:59,716 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: 'What is Paris famous for?'
2025-04-23 20:28:59,717 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-23 20:28:59,717 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-23 20:28:59,717 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-23 20:28:59,718 - ActionHandler_User123 - INFO - Calling perform_search function for query: 'What is Paris famous for?'
2025-04-23 20:28:59,718 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for?'
2025-04-23 20:28:59,718 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for?'
2025-04-23 20:29:01,626 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for?', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, the Louvre Museum, and being the City of Love. It is also known for its art, fashio...
2025-04-23 20:29:01,627 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for?

Summary: Paris is famous for the Eiffel Tower, the Louvre Museum, and being the City of Love. It is also known for its art, fashion, and romantic atmosph...
2025-04-23 20:29:01,627 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-23 20:29:01,627 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-23 20:29:01,628 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1873
2025-04-23 20:29:01,628 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: What is Paris famous for?

Summary: Paris is famous for the Eiffel Tower, the Lo...
2025-04-23 20:29:01,628 - ActionHandler_User123 - INFO - Updating system message sys_87a82fbf-6526-454a-8505-43e054378e36 for search ID search-1745440139-fb786f3b
2025-04-23 20:29:01,632 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:29:01,638 - api.endpoints.system_messages - INFO - Updated system message sys_87a82fbf-6526-454a-8505-43e054378e36 in database
2025-04-23 20:29:01,640 - ActionHandler_User123 - INFO - Successfully updated system message sys_87a82fbf-6526-454a-8505-43e054378e36
2025-04-23 20:29:01,647 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 20:29:01,667 - api.endpoints.system_messages - INFO - Stored system message sys_1fdc18b3-661f-402b-b559-7d864e5261fe in database
2025-04-23 20:29:01,680 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:33:17,564 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 20:33:17,564 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 20:33:17,565 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 20:33:17,582 - core.database.connection - INFO - Database connection successful!
2025-04-23 20:33:17,582 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 20:33:17,584 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 20:33:17,589 - core.database.connection - INFO - Default user already exists.
2025-04-23 20:33:17,604 - app - INFO - Auth blueprint registered successfully
2025-04-23 20:33:17,611 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 20:33:17,612 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 20:33:17,612 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 20:33:17,612 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 20:33:17,612 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 20:33:17,612 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 20:33:17,612 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 20:33:17,612 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 20:33:17,617 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 20:33:17,618 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 20:33:17,618 - components.action_handler - INFO - Web search functionality is available
2025-04-23 20:33:17,618 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 20:33:17,618 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 20:33:17,619 - app - INFO - Chat blueprint registered successfully
2025-04-23 20:33:17,619 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 20:33:17,621 - app - INFO - Session blueprint registered successfully
2025-04-23 20:33:17,622 - app - INFO - Memory blueprint registered successfully
2025-04-23 20:33:17,625 - app - INFO - System Messages blueprint registered successfully
2025-04-23 20:33:17,626 - app - INFO - Test Search blueprint registered successfully
2025-04-23 20:33:17,626 - app - INFO - Basic endpoints registered successfully
2025-04-23 20:33:17,630 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 20:34:01,633 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:34:01,634 - api.endpoints.test_search - INFO - Initializing Tavily client with API key starting with tvly...
2025-04-23 20:34:01,634 - api.endpoints.test_search - INFO - Performing search for query: 'What is Paris famous for?'
2025-04-23 20:34:03,743 - api.endpoints.test_search - INFO - Search completed successfully with 5 results
2025-04-23 20:34:03,753 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:34:03,754 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 20:34:03,755 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 20:34:03,755 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 20:34:03,755 - managers.user_session_manager - INFO - Created new session ID: 2d5c008f-2254-4daa-85a3-10e8efdbbc4f for user: 123
2025-04-23 20:34:03,756 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 2d5c008f-2254-4daa-85a3-10e8efdbbc4f
2025-04-23 20:34:03,757 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 20:34:03,758 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 20:34:03,758 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 20:34:03,759 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 20:34:03,767 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:34:03,768 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 20:34:03,769 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 20:34:03,769 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:34:03,769 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:34:03,770 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 2d5c008f-2254-4daa-85a3-10e8efdbbc4f
2025-04-23 20:34:03,770 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:34:03,771 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:34:03,772 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 2d5c008f-2254-4daa-85a3-10e8efdbbc4f to /app/data/sessions/123/2d5c008f-2254-4daa-85a3-10e8efdbbc4f/transcript.json
2025-04-23 20:34:03,777 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/2d5c008f-2254-4daa-85a3-10e8efdbbc4f/transcript.json
2025-04-23 20:34:03,782 - managers.chat_file_manager - INFO - Session metadata for 2d5c008f-2254-4daa-85a3-10e8efdbbc4f saved/updated in DB.
2025-04-23 20:34:03,802 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:34:03,806 - api.endpoints.system_messages - INFO - Stored system message sys_132a1381-923d-4a9e-9a38-0856449e5a69 in database
2025-04-23 20:34:03,811 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:34:03,815 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:34:03,815 - managers.user_session_manager - INFO - Created new session ID: 55f49de4-7831-46db-a4d9-6d436e762fdc for user: 123
2025-04-23 20:34:03,816 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 55f49de4-7831-46db-a4d9-6d436e762fdc
2025-04-23 20:34:03,819 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 20:34:03,819 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 20:34:03,820 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 20:34:03,824 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 20:34:03,826 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 20:34:03,827 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 20:34:03,827 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:34:03,827 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 20:34:03,829 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 55f49de4-7831-46db-a4d9-6d436e762fdc
2025-04-23 20:34:03,829 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:34:03,831 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 20:34:03,831 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 55f49de4-7831-46db-a4d9-6d436e762fdc to /app/data/sessions/123/55f49de4-7831-46db-a4d9-6d436e762fdc/transcript.json
2025-04-23 20:34:03,839 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/55f49de4-7831-46db-a4d9-6d436e762fdc/transcript.json
2025-04-23 20:34:03,847 - managers.chat_file_manager - INFO - Session metadata for 55f49de4-7831-46db-a4d9-6d436e762fdc saved/updated in DB.
2025-04-23 20:34:03,854 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 20:34:03,855 - api.endpoints.chat - INFO - Direct web search requested via chat endpoint: What is Paris famous for?
2025-04-23 20:34:03,855 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for?'
2025-04-23 20:34:03,856 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for?'
2025-04-23 20:34:04,817 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for?', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, the Louvre Museum, and being the City of Love. It is also known for its art, fashio...
2025-04-23 20:34:04,818 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for?

Summary: Paris is famous for the Eiffel Tower, the Louvre Museum, and being the City of Love. It is also known for its art, fashion, and romantic atmosph...
2025-04-23 20:52:41,330 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 20:52:41,330 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 20:52:41,330 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 20:52:41,343 - core.database.connection - INFO - Database connection successful!
2025-04-23 20:52:41,343 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 20:52:41,345 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 20:52:41,350 - core.database.connection - INFO - Default user already exists.
2025-04-23 20:52:41,362 - app - INFO - Auth blueprint registered successfully
2025-04-23 20:52:41,370 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 20:52:41,371 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 20:52:41,371 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 20:52:41,371 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 20:52:41,371 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 20:52:41,371 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 20:52:41,371 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 20:52:41,371 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 20:52:41,375 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 20:52:41,375 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 20:52:41,376 - components.action_handler - INFO - Web search functionality is available
2025-04-23 20:52:41,376 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 20:52:41,376 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 20:52:41,377 - app - INFO - Chat blueprint registered successfully
2025-04-23 20:52:41,377 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 20:52:41,379 - app - INFO - Session blueprint registered successfully
2025-04-23 20:52:41,380 - app - INFO - Memory blueprint registered successfully
2025-04-23 20:52:41,383 - app - INFO - System Messages blueprint registered successfully
2025-04-23 20:52:41,384 - app - INFO - Test Search blueprint registered successfully
2025-04-23 20:52:41,385 - app - INFO - Basic endpoints registered successfully
2025-04-23 20:52:41,389 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 21:10:54,375 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 21:10:54,375 - api.endpoints.test_search - INFO - Initializing Tavily client with API key starting with tvly...
2025-04-23 21:10:54,375 - api.endpoints.test_search - INFO - Performing search for query: 'What is Paris famous for?'
2025-04-23 21:10:55,964 - api.endpoints.test_search - INFO - Search completed successfully with 5 results
2025-04-23 21:10:55,970 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 21:10:55,971 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 21:10:55,974 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 21:10:55,975 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 21:10:55,976 - managers.user_session_manager - INFO - Created new session ID: 69034b40-6d97-4017-93e4-d74adf634007 for user: 123
2025-04-23 21:10:55,977 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 69034b40-6d97-4017-93e4-d74adf634007
2025-04-23 21:10:55,978 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 21:10:55,979 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 21:10:55,980 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 21:10:55,981 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 21:10:55,985 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 21:10:55,986 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 21:10:55,986 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 21:10:55,986 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 21:10:55,987 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 21:10:55,987 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 69034b40-6d97-4017-93e4-d74adf634007
2025-04-23 21:10:55,990 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 21:10:55,990 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 21:10:55,991 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 69034b40-6d97-4017-93e4-d74adf634007 to /app/data/sessions/123/69034b40-6d97-4017-93e4-d74adf634007/transcript.json
2025-04-23 21:10:55,996 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/69034b40-6d97-4017-93e4-d74adf634007/transcript.json
2025-04-23 21:10:56,003 - managers.chat_file_manager - INFO - Session metadata for 69034b40-6d97-4017-93e4-d74adf634007 saved/updated in DB.
2025-04-23 21:10:56,017 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 21:10:56,019 - api.endpoints.system_messages - INFO - Stored system message sys_f2d09a48-8796-4514-97a6-0e4e829351c2 in database
2025-04-23 21:10:56,021 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 21:10:56,022 - api.endpoints.system_messages - INFO - Found 1 system messages for session 69034b40-6d97-4017-93e4-d74adf634007
2025-04-23 21:10:56,025 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 21:10:56,025 - managers.user_session_manager - INFO - Created new session ID: 32db2312-79ef-474c-aa90-92ebfff5d9b2 for user: 123
2025-04-23 21:10:56,025 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 32db2312-79ef-474c-aa90-92ebfff5d9b2
2025-04-23 21:10:56,025 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 21:10:56,025 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 21:10:56,025 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 21:10:56,027 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 21:10:56,027 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 21:10:56,027 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 21:10:56,027 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 21:10:56,027 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 21:10:56,027 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 32db2312-79ef-474c-aa90-92ebfff5d9b2
2025-04-23 21:10:56,028 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 21:10:56,028 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 21:10:56,028 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 32db2312-79ef-474c-aa90-92ebfff5d9b2 to /app/data/sessions/123/32db2312-79ef-474c-aa90-92ebfff5d9b2/transcript.json
2025-04-23 21:10:56,029 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/32db2312-79ef-474c-aa90-92ebfff5d9b2/transcript.json
2025-04-23 21:10:56,030 - managers.chat_file_manager - INFO - Session metadata for 32db2312-79ef-474c-aa90-92ebfff5d9b2 saved/updated in DB.
2025-04-23 21:10:56,034 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 21:10:56,035 - api.endpoints.chat - INFO - Direct web search requested via chat endpoint: What is Paris famous for?
2025-04-23 21:10:56,035 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for?'
2025-04-23 21:10:56,035 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for?'
2025-04-23 21:10:58,016 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for?', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, the Louvre Museum, and being the City of Love. It is also known for its art, fashio...
2025-04-23 21:10:58,019 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for?

Summary: Paris is famous for the Eiffel Tower, the Louvre Museum, and being the City of Love. It is also known for its art, fashion, and romantic atmosph...
2025-04-23 21:37:37,761 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 21:37:37,762 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 21:37:37,762 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 21:37:37,775 - core.database.connection - INFO - Database connection successful!
2025-04-23 21:37:37,775 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 21:37:37,778 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 21:37:37,783 - core.database.connection - INFO - Default user already exists.
2025-04-23 21:37:37,797 - app - INFO - Auth blueprint registered successfully
2025-04-23 21:37:37,807 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 21:37:37,807 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 21:37:37,807 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 21:37:37,807 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 21:37:37,808 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 21:37:37,808 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 21:37:37,808 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 21:37:37,808 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 21:37:37,812 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 21:37:37,812 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 21:37:37,812 - components.action_handler - INFO - Web search functionality is available
2025-04-23 21:37:37,813 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 21:37:37,813 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 21:37:37,814 - app - INFO - Chat blueprint registered successfully
2025-04-23 21:37:37,815 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 21:37:37,816 - app - INFO - Session blueprint registered successfully
2025-04-23 21:37:37,817 - app - INFO - Memory blueprint registered successfully
2025-04-23 21:37:37,821 - app - INFO - System Messages blueprint registered successfully
2025-04-23 21:37:37,822 - app - INFO - Test Search blueprint registered successfully
2025-04-23 21:37:37,822 - app - INFO - Basic endpoints registered successfully
2025-04-23 21:37:37,826 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 22:18:29,630 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:18:29,632 - api.endpoints.test_search - INFO - Initializing Tavily client with API key starting with tvly...
2025-04-23 22:18:29,633 - api.endpoints.test_search - INFO - Performing search for query: 'What is Paris famous for?'
2025-04-23 22:18:32,215 - api.endpoints.test_search - INFO - Search completed successfully with 5 results
2025-04-23 22:18:32,222 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:18:32,223 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 22:18:32,225 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 22:18:32,226 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 22:18:32,229 - managers.user_session_manager - INFO - Created new session ID: b019a3cd-89e8-441c-ad5c-7d4cb9111491 for user: 123
2025-04-23 22:18:32,229 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: b019a3cd-89e8-441c-ad5c-7d4cb9111491
2025-04-23 22:18:32,232 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 22:18:32,240 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 22:18:32,240 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 22:18:32,240 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 22:18:32,251 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 22:18:32,253 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 22:18:32,253 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 22:18:32,254 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:18:32,259 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:18:32,260 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: b019a3cd-89e8-441c-ad5c-7d4cb9111491
2025-04-23 22:18:32,260 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:18:32,260 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:18:32,261 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session b019a3cd-89e8-441c-ad5c-7d4cb9111491 to /app/data/sessions/123/b019a3cd-89e8-441c-ad5c-7d4cb9111491/transcript.json
2025-04-23 22:18:32,263 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/b019a3cd-89e8-441c-ad5c-7d4cb9111491/transcript.json
2025-04-23 22:18:32,271 - managers.chat_file_manager - INFO - Session metadata for b019a3cd-89e8-441c-ad5c-7d4cb9111491 saved/updated in DB.
2025-04-23 22:18:32,284 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:18:32,289 - api.endpoints.system_messages - INFO - Stored system message sys_7b6adf31-2927-4859-99e4-fed1136deb25 in database
2025-04-23 22:18:32,292 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:18:32,293 - api.endpoints.system_messages - INFO - Found 1 system messages for session b019a3cd-89e8-441c-ad5c-7d4cb9111491
2025-04-23 22:18:32,299 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:18:32,299 - managers.user_session_manager - INFO - Created new session ID: fc618250-8dde-4a81-b606-dadaf7b9b44a for user: 123
2025-04-23 22:18:32,299 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: fc618250-8dde-4a81-b606-dadaf7b9b44a
2025-04-23 22:18:32,299 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 22:18:32,300 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 22:18:32,300 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 22:18:32,301 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 22:18:32,301 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 22:18:32,301 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 22:18:32,302 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:18:32,302 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:18:32,302 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: fc618250-8dde-4a81-b606-dadaf7b9b44a
2025-04-23 22:18:32,302 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:18:32,302 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:18:32,302 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session fc618250-8dde-4a81-b606-dadaf7b9b44a to /app/data/sessions/123/fc618250-8dde-4a81-b606-dadaf7b9b44a/transcript.json
2025-04-23 22:18:32,303 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/fc618250-8dde-4a81-b606-dadaf7b9b44a/transcript.json
2025-04-23 22:18:32,304 - managers.chat_file_manager - INFO - Session metadata for fc618250-8dde-4a81-b606-dadaf7b9b44a saved/updated in DB.
2025-04-23 22:18:32,309 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:18:32,310 - api.endpoints.chat - INFO - Direct web search requested via chat endpoint: What is Paris famous for?
2025-04-23 22:18:32,310 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for?'
2025-04-23 22:18:32,310 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for?'
2025-04-23 22:18:34,458 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for?', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, art museums like the Louvre, and its romantic atmosphere. It is also known for its ...
2025-04-23 22:18:34,459 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for?

Summary: Paris is famous for the Eiffel Tower, art museums like the Louvre, and its romantic atmosphere. It is also known for its cuisine, fashion, and h...
2025-04-23 22:19:34,200 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 22:19:34,201 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 22:19:34,201 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 22:19:34,212 - core.database.connection - INFO - Database connection successful!
2025-04-23 22:19:34,213 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 22:19:34,215 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 22:19:34,220 - core.database.connection - INFO - Default user already exists.
2025-04-23 22:19:34,233 - app - INFO - Auth blueprint registered successfully
2025-04-23 22:19:34,242 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 22:19:34,242 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 22:19:34,243 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 22:19:34,243 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 22:19:34,243 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 22:19:34,243 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 22:19:34,243 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 22:19:34,243 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 22:19:34,247 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 22:19:34,248 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 22:19:34,248 - components.action_handler - INFO - Web search functionality is available
2025-04-23 22:19:34,248 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 22:19:34,248 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 22:19:34,249 - app - INFO - Chat blueprint registered successfully
2025-04-23 22:19:34,250 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 22:19:34,251 - app - INFO - Session blueprint registered successfully
2025-04-23 22:19:34,252 - app - INFO - Memory blueprint registered successfully
2025-04-23 22:19:34,256 - app - INFO - System Messages blueprint registered successfully
2025-04-23 22:19:34,257 - app - INFO - Test Search blueprint registered successfully
2025-04-23 22:19:34,258 - app - INFO - Basic endpoints registered successfully
2025-04-23 22:19:34,262 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 22:19:42,278 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:19:42,279 - api.endpoints.test_search - INFO - Initializing Tavily client with API key starting with tvly...
2025-04-23 22:19:42,279 - api.endpoints.test_search - INFO - Performing search for query: 'What is Paris famous for?'
2025-04-23 22:19:43,375 - api.endpoints.test_search - INFO - Search completed successfully with 5 results
2025-04-23 22:19:43,378 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:19:43,378 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 22:19:43,378 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 22:19:43,378 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 22:19:43,378 - managers.user_session_manager - INFO - Created new session ID: 99b8167f-70fa-4d5c-8dcb-636c4905815a for user: 123
2025-04-23 22:19:43,378 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 99b8167f-70fa-4d5c-8dcb-636c4905815a
2025-04-23 22:19:43,379 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 22:19:43,379 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 22:19:43,379 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 22:19:43,379 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 22:19:43,381 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 22:19:43,382 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 22:19:43,382 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 22:19:43,382 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:19:43,382 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:19:43,382 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 99b8167f-70fa-4d5c-8dcb-636c4905815a
2025-04-23 22:19:43,382 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:19:43,382 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:19:43,383 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 99b8167f-70fa-4d5c-8dcb-636c4905815a to /app/data/sessions/123/99b8167f-70fa-4d5c-8dcb-636c4905815a/transcript.json
2025-04-23 22:19:43,384 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/99b8167f-70fa-4d5c-8dcb-636c4905815a/transcript.json
2025-04-23 22:19:43,387 - managers.chat_file_manager - INFO - Session metadata for 99b8167f-70fa-4d5c-8dcb-636c4905815a saved/updated in DB.
2025-04-23 22:19:43,393 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:19:43,395 - api.endpoints.system_messages - INFO - Stored system message sys_40a35144-3312-4c7a-8fd1-fe345ed6d0bf in database
2025-04-23 22:19:43,398 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:19:43,399 - api.endpoints.system_messages - INFO - Found 1 system messages for session 99b8167f-70fa-4d5c-8dcb-636c4905815a
2025-04-23 22:19:43,401 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:19:43,403 - api.endpoints.system_messages - INFO - Updated system message sys_40a35144-3312-4c7a-8fd1-fe345ed6d0bf in database
2025-04-23 22:19:43,406 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:19:43,406 - managers.user_session_manager - INFO - Created new session ID: bc35f962-57b0-4b32-b8e9-d2d368edcbd6 for user: 123
2025-04-23 22:19:43,406 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: bc35f962-57b0-4b32-b8e9-d2d368edcbd6
2025-04-23 22:19:43,406 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 22:19:43,406 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 22:19:43,406 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 22:19:43,407 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 22:19:43,408 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 22:19:43,408 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 22:19:43,408 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:19:43,408 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:19:43,408 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: bc35f962-57b0-4b32-b8e9-d2d368edcbd6
2025-04-23 22:19:43,408 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:19:43,408 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:19:43,408 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session bc35f962-57b0-4b32-b8e9-d2d368edcbd6 to /app/data/sessions/123/bc35f962-57b0-4b32-b8e9-d2d368edcbd6/transcript.json
2025-04-23 22:19:43,409 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/bc35f962-57b0-4b32-b8e9-d2d368edcbd6/transcript.json
2025-04-23 22:19:43,410 - managers.chat_file_manager - INFO - Session metadata for bc35f962-57b0-4b32-b8e9-d2d368edcbd6 saved/updated in DB.
2025-04-23 22:19:43,418 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:19:43,418 - api.endpoints.chat - INFO - Direct web search requested via chat endpoint: What is Paris famous for?
2025-04-23 22:19:43,418 - components.action_handler - INFO - Performing Tavily search for query: 'What is Paris famous for?'
2025-04-23 22:19:43,420 - components.action_handler - INFO - Calling Tavily search API with query: 'What is Paris famous for?'
2025-04-23 22:19:45,312 - components.action_handler - INFO - Tavily search response: {'query': 'What is Paris famous for?', 'follow_up_questions': None, 'answer': 'Paris is famous for the Eiffel Tower, art museums like the Louvre, and its romantic atmosphere. It is also known for its ...
2025-04-23 22:19:45,313 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What is Paris famous for?

Summary: Paris is famous for the Eiffel Tower, art museums like the Louvre, and its romantic atmosphere. It is also known for its cuisine, fashion, and h...
2025-04-23 22:25:56,536 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:25:56,537 - managers.user_session_manager - INFO - Created new session ID: aa9275ef-bc82-4166-ba62-1a68985675df for user: 123
2025-04-23 22:25:56,537 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: aa9275ef-bc82-4166-ba62-1a68985675df
2025-04-23 22:25:56,538 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 22:25:56,538 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 22:25:56,539 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 22:25:56,541 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 22:25:56,542 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 22:25:56,542 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 22:25:56,543 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:25:56,543 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:25:56,543 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: aa9275ef-bc82-4166-ba62-1a68985675df
2025-04-23 22:25:56,543 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:25:56,543 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:25:56,543 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session aa9275ef-bc82-4166-ba62-1a68985675df to /app/data/sessions/123/aa9275ef-bc82-4166-ba62-1a68985675df/transcript.json
2025-04-23 22:25:56,546 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/aa9275ef-bc82-4166-ba62-1a68985675df/transcript.json
2025-04-23 22:25:56,549 - managers.chat_file_manager - INFO - Session metadata for aa9275ef-bc82-4166-ba62-1a68985675df saved/updated in DB.
2025-04-23 22:25:56,557 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:25:56,562 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 22:25:56,564 - api.endpoints.system_messages - INFO - Stored system message sys_8a9a59d7-b33f-4280-bd8c-f2450d7cb3a3 in database
2025-04-23 22:25:56,566 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 22:25:56,566 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 22:25:56,567 - components.prompt_builder - INFO - Constructing prompt for session aa9275ef-bc82-4166-ba62-1a68985675df, user 123, depth 0
2025-04-23 22:25:56,567 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 22:25:56,567 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Tell me about the capabilities of RAI Chat'
2025-04-23 22:25:56,567 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 22:25:56,567 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 22:25:56,567 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 22:25:56,567 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 22:25:56,568 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 22:25:56,568 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 22:25:56,568 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 22:26:00,224 - CtxMemMgr_User123 - INFO - Loading session aa9275ef-bc82-4166-ba62-1a68985675df for processing assistant message
2025-04-23 22:26:00,224 - CtxMemMgr_User123 - INFO - Loading session context for aa9275ef-bc82-4166-ba62-1a68985675df from /app/data/sessions/123/aa9275ef-bc82-4166-ba62-1a68985675df/context.json
2025-04-23 22:26:00,225 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/aa9275ef-bc82-4166-ba62-1a68985675df/context.json not found. Initializing empty context for new session aa9275ef-bc82-4166-ba62-1a68985675df.
2025-04-23 22:26:00,226 - CtxMemMgr_User123 - INFO - Stored turn 7bb92bc1-cb90-4f5e-93e1-432517f57dc4 for active session aa9275ef-bc82-4166-ba62-1a68985675df
2025-04-23 22:26:00,227 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session aa9275ef-bc82-4166-ba62-1a68985675df: '...'
2025-04-23 22:26:00,229 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 22:26:00,230 - CtxMemMgr_User123 - INFO - Session aa9275ef-bc82-4166-ba62-1a68985675df: Active history token count ~10 / 30000
2025-04-23 22:26:00,230 - CtxMemMgr_User123 - INFO - Saving active session context for aa9275ef-bc82-4166-ba62-1a68985675df to /app/data/sessions/123/aa9275ef-bc82-4166-ba62-1a68985675df/context.json
2025-04-23 22:26:00,232 - CtxMemMgr_User123 - INFO - Successfully saved context for session aa9275ef-bc82-4166-ba62-1a68985675df
2025-04-23 22:26:00,232 - ActionHandler_User123 - INFO - Processing LLM response for session aa9275ef-bc82-4166-ba62-1a68985675df, user 123
2025-04-23 22:26:00,234 - ActionHandler_User123 - INFO - Web search detected with pattern: \bweb\s+search\s*:\s*['\"]?(.+?)['\"]?\b
2025-04-23 22:26:00,234 - ActionHandler_User123 - INFO - Extracted query: '**'
2025-04-23 22:26:00,235 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: '**' (Session: aa9275ef-bc82-4166-ba62-1a68985675df)
2025-04-23 22:26:00,235 - CtxMemMgr_User123 - INFO - Stored turn aff1febe-511f-444b-9a73-757669223c40 for active session aa9275ef-bc82-4166-ba62-1a68985675df
2025-04-23 22:26:00,235 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session aa9275ef-bc82-4166-ba62-1a68985675df: '...'
2025-04-23 22:26:00,235 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 22:26:00,236 - CtxMemMgr_User123 - INFO - Session aa9275ef-bc82-4166-ba62-1a68985675df: Active history token count ~20 / 30000
2025-04-23 22:26:00,236 - CtxMemMgr_User123 - INFO - Saving active session context for aa9275ef-bc82-4166-ba62-1a68985675df to /app/data/sessions/123/aa9275ef-bc82-4166-ba62-1a68985675df/context.json
2025-04-23 22:26:00,239 - CtxMemMgr_User123 - INFO - Successfully saved context for session aa9275ef-bc82-4166-ba62-1a68985675df
2025-04-23 22:26:00,240 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745447160-aa9275ef) ***
2025-04-23 22:26:00,240 - ActionHandler_User123 - INFO - Storing search status for session aa9275ef-bc82-4166-ba62-1a68985675df: active
2025-04-23 22:26:00,250 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 22:26:00,254 - api.endpoints.system_messages - INFO - Stored system message sys_75940a68-b347-4fba-8508-3c6ee93708b0 in database
2025-04-23 22:26:00,255 - ActionHandler_User123 - INFO - Stored system message ID sys_75940a68-b347-4fba-8508-3c6ee93708b0 for search ID search-1745447160-aa9275ef
2025-04-23 22:26:00,255 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session aa9275ef-bc82-4166-ba62-1a68985675df
2025-04-23 22:26:00,255 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: '**'
2025-04-23 22:26:00,255 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-23 22:26:00,255 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-23 22:26:00,255 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-23 22:26:00,255 - ActionHandler_User123 - INFO - Calling perform_search function for query: '**'
2025-04-23 22:26:00,256 - components.action_handler - INFO - Performing Tavily search for query: '**'
2025-04-23 22:26:00,256 - components.action_handler - INFO - Calling Tavily search API with query: '**'
2025-04-23 22:26:02,631 - components.action_handler - INFO - Tavily search response: {'query': '**', 'follow_up_questions': None, 'answer': 'In Python, the "**" operator raises a number to a power. It is faster than using loops. The built-in pow() function also raises a number to a po...
2025-04-23 22:26:02,633 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: **

Summary: In Python, the "**" operator raises a number to a power. It is faster than using loops. The built-in pow() function also raises a number to a power.

1. Exploring the ...
2025-04-23 22:26:02,633 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-23 22:26:02,634 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-23 22:26:02,636 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1869
2025-04-23 22:26:02,637 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: **

Summary: In Python, the "**" operator raises a number to a power. It is fast...
2025-04-23 22:26:02,642 - ActionHandler_User123 - INFO - Updating system message sys_75940a68-b347-4fba-8508-3c6ee93708b0 for search ID search-1745447160-aa9275ef
2025-04-23 22:26:02,650 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 22:26:02,666 - api.endpoints.system_messages - INFO - Updated system message sys_75940a68-b347-4fba-8508-3c6ee93708b0 in database
2025-04-23 22:26:02,669 - ActionHandler_User123 - INFO - Successfully updated system message sys_75940a68-b347-4fba-8508-3c6ee93708b0
2025-04-23 22:26:02,679 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 22:26:02,683 - api.endpoints.system_messages - INFO - Stored system message sys_e3a18f6a-93f8-4a89-a783-89d5954a4416 in database
2025-04-23 22:45:41,785 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-23 22:45:41,786 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-23 22:45:41,786 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-23 22:45:41,821 - core.database.connection - INFO - Database connection successful!
2025-04-23 22:45:41,822 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-23 22:45:41,825 - core.database.connection - INFO - Database tables created or already exist.
2025-04-23 22:45:41,832 - core.database.connection - INFO - Default user already exists.
2025-04-23 22:45:41,847 - app - INFO - Auth blueprint registered successfully
2025-04-23 22:45:41,856 - components.action_handler - INFO - Current directory: /app/components
2025-04-23 22:45:41,856 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-23 22:45:41,856 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-23 22:45:41,856 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-23 22:45:41,856 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-23 22:45:41,856 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-23 22:45:41,856 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-23 22:45:41,856 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-23 22:45:41,864 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-23 22:45:41,864 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-23 22:45:41,864 - components.action_handler - INFO - Web search functionality is available
2025-04-23 22:45:41,864 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-23 22:45:41,864 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-23 22:45:41,865 - app - INFO - Chat blueprint registered successfully
2025-04-23 22:45:41,865 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-23 22:45:41,867 - app - INFO - Session blueprint registered successfully
2025-04-23 22:45:41,867 - app - INFO - Memory blueprint registered successfully
2025-04-23 22:45:41,869 - app - INFO - System Messages blueprint registered successfully
2025-04-23 22:45:41,870 - app - INFO - Test Search blueprint registered successfully
2025-04-23 22:45:41,870 - app - INFO - Basic endpoints registered successfully
2025-04-23 22:45:41,874 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-23 22:50:40,984 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:50:40,985 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-23 22:50:40,985 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-23 22:50:40,986 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-23 22:50:40,986 - managers.user_session_manager - INFO - Created new session ID: ad47e36b-2d5c-42f1-963e-4eb9434a2dbc for user: 123
2025-04-23 22:50:40,986 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: ad47e36b-2d5c-42f1-963e-4eb9434a2dbc
2025-04-23 22:50:40,987 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://llm-engine:6101
2025-04-23 22:50:40,988 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-23 22:50:40,988 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-23 22:50:40,988 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-23 22:50:40,991 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 22:50:40,992 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-23 22:50:40,993 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-23 22:50:40,993 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:50:40,993 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-23 22:50:40,993 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: ad47e36b-2d5c-42f1-963e-4eb9434a2dbc
2025-04-23 22:50:40,993 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:50:40,993 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://llm-engine:6101
2025-04-23 22:50:40,994 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc to /app/data/sessions/123/ad47e36b-2d5c-42f1-963e-4eb9434a2dbc/transcript.json
2025-04-23 22:50:40,996 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/ad47e36b-2d5c-42f1-963e-4eb9434a2dbc/transcript.json
2025-04-23 22:50:41,003 - managers.chat_file_manager - INFO - Session metadata for ad47e36b-2d5c-42f1-963e-4eb9434a2dbc saved/updated in DB.
2025-04-23 22:50:41,013 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-23 22:50:41,018 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 22:50:41,022 - api.endpoints.system_messages - INFO - Stored system message sys_39a59e27-b37e-4359-8ee1-d031c4bc4c1b in database
2025-04-23 22:50:41,023 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 22:50:41,023 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-23 22:50:41,024 - components.prompt_builder - INFO - Constructing prompt for session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc, user 123, depth 0
2025-04-23 22:50:41,024 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-23 22:50:41,024 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Tell me about the capabilities of RAI Chat'
2025-04-23 22:50:41,024 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-23 22:50:41,024 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-23 22:50:41,024 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-23 22:50:41,024 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-23 22:50:41,025 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-23 22:50:41,025 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-23 22:50:41,025 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-23 22:50:44,598 - CtxMemMgr_User123 - INFO - Loading session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc for processing assistant message
2025-04-23 22:50:44,598 - CtxMemMgr_User123 - INFO - Loading session context for ad47e36b-2d5c-42f1-963e-4eb9434a2dbc from /app/data/sessions/123/ad47e36b-2d5c-42f1-963e-4eb9434a2dbc/context.json
2025-04-23 22:50:44,601 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/ad47e36b-2d5c-42f1-963e-4eb9434a2dbc/context.json not found. Initializing empty context for new session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc.
2025-04-23 22:50:44,602 - CtxMemMgr_User123 - INFO - Stored turn 1f73459c-4fb2-44ca-a7c0-5a73343e5a51 for active session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc
2025-04-23 22:50:44,602 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc: '...'
2025-04-23 22:50:44,605 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 22:50:44,606 - CtxMemMgr_User123 - INFO - Session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc: Active history token count ~10 / 30000
2025-04-23 22:50:44,606 - CtxMemMgr_User123 - INFO - Saving active session context for ad47e36b-2d5c-42f1-963e-4eb9434a2dbc to /app/data/sessions/123/ad47e36b-2d5c-42f1-963e-4eb9434a2dbc/context.json
2025-04-23 22:50:44,612 - CtxMemMgr_User123 - INFO - Successfully saved context for session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc
2025-04-23 22:50:44,614 - ActionHandler_User123 - INFO - Processing LLM response for session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc, user 123
2025-04-23 22:50:44,615 - ActionHandler_User123 - INFO - Web search detected with pattern: \bweb\s+search\s*:\s*['\"]?(.+?)['\"]?\b
2025-04-23 22:50:44,616 - ActionHandler_User123 - INFO - Extracted query: '**'
2025-04-23 22:50:44,616 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: '**' (Session: ad47e36b-2d5c-42f1-963e-4eb9434a2dbc)
2025-04-23 22:50:44,618 - CtxMemMgr_User123 - INFO - Stored turn 2578bc37-d831-4260-90fe-be1b599a78b8 for active session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc
2025-04-23 22:50:44,618 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc: '...'
2025-04-23 22:50:44,619 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-23 22:50:44,621 - CtxMemMgr_User123 - INFO - Session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc: Active history token count ~20 / 30000
2025-04-23 22:50:44,622 - CtxMemMgr_User123 - INFO - Saving active session context for ad47e36b-2d5c-42f1-963e-4eb9434a2dbc to /app/data/sessions/123/ad47e36b-2d5c-42f1-963e-4eb9434a2dbc/context.json
2025-04-23 22:50:44,631 - CtxMemMgr_User123 - INFO - Successfully saved context for session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc
2025-04-23 22:50:44,631 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745448644-ad47e36b) ***
2025-04-23 22:50:44,633 - ActionHandler_User123 - INFO - Storing search status for session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc: active
2025-04-23 22:50:44,639 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 22:50:44,655 - api.endpoints.system_messages - INFO - Stored system message sys_e4dd5775-c555-4db4-8685-90919827e4bf in database
2025-04-23 22:50:44,657 - ActionHandler_User123 - INFO - Stored system message ID sys_e4dd5775-c555-4db4-8685-90919827e4bf for search ID search-1745448644-ad47e36b
2025-04-23 22:50:44,658 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session ad47e36b-2d5c-42f1-963e-4eb9434a2dbc
2025-04-23 22:50:44,658 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: '**'
2025-04-23 22:50:44,660 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-23 22:50:44,660 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-23 22:50:44,661 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-23 22:50:44,662 - ActionHandler_User123 - INFO - Calling perform_search function for query: '**'
2025-04-23 22:50:44,662 - components.action_handler - INFO - Performing Tavily search for query: '**'
2025-04-23 22:50:44,663 - components.action_handler - INFO - Calling Tavily search API with query: '**'
2025-04-23 22:50:46,403 - components.action_handler - INFO - Tavily search response: {'query': '**', 'follow_up_questions': None, 'answer': 'In Python, the "**" operator raises a number to a power. It is faster than using loops. The built-in pow() function also raises a number to a po...
2025-04-23 22:50:46,403 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: **

Summary: In Python, the "**" operator raises a number to a power. It is faster than using loops. The built-in pow() function also raises a number to a power.

1. Exploring the ...
2025-04-23 22:50:46,404 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-23 22:50:46,404 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-23 22:50:46,405 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1869
2025-04-23 22:50:46,405 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: **

Summary: In Python, the "**" operator raises a number to a power. It is fast...
2025-04-23 22:50:46,405 - ActionHandler_User123 - INFO - Updating system message sys_e4dd5775-c555-4db4-8685-90919827e4bf for search ID search-1745448644-ad47e36b
2025-04-23 22:50:46,409 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 22:50:46,425 - api.endpoints.system_messages - INFO - Updated system message sys_e4dd5775-c555-4db4-8685-90919827e4bf in database
2025-04-23 22:50:46,428 - ActionHandler_User123 - INFO - Successfully updated system message sys_e4dd5775-c555-4db4-8685-90919827e4bf
2025-04-23 22:50:46,431 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-23 22:50:46,438 - api.endpoints.system_messages - INFO - Stored system message sys_e6911141-be77-480c-b4fe-81812751d6b8 in database
