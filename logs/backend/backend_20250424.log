2025-04-24 02:45:24,746 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-24 02:45:24,746 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-24 02:45:24,746 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-24 02:45:24,759 - core.database.connection - INFO - Database connection successful!
2025-04-24 02:45:24,759 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-24 02:45:24,761 - core.database.connection - INFO - Database tables created or already exist.
2025-04-24 02:45:24,765 - core.database.connection - INFO - Default user already exists.
2025-04-24 02:45:24,777 - app - INFO - Auth blueprint registered successfully
2025-04-24 02:45:24,784 - components.action_handler - INFO - Current directory: /app/components
2025-04-24 02:45:24,784 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-24 02:45:24,784 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-24 02:45:24,784 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-24 02:45:24,784 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-24 02:45:24,785 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-24 02:45:24,785 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-24 02:45:24,785 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-24 02:45:24,789 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-24 02:45:24,789 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-24 02:45:24,789 - components.action_handler - INFO - Web search functionality is available
2025-04-24 02:45:24,789 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-24 02:45:24,789 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-24 02:45:24,790 - app - INFO - Chat blueprint registered successfully
2025-04-24 02:45:24,790 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-24 02:45:24,792 - app - INFO - Session blueprint registered successfully
2025-04-24 02:45:24,793 - app - INFO - Memory blueprint registered successfully
2025-04-24 02:45:24,795 - app - INFO - System Messages blueprint registered successfully
2025-04-24 02:45:24,795 - app - INFO - Test Search blueprint registered successfully
2025-04-24 02:45:24,796 - app - INFO - Basic endpoints registered successfully
2025-04-24 02:45:24,799 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-24 02:45:50,204 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 02:45:50,205 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-24 02:45:50,206 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-24 02:45:50,206 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-24 02:45:50,206 - managers.user_session_manager - INFO - Created new session ID: 37368536-7cb7-4a75-9c95-82aab277f9f0 for user: 123
2025-04-24 02:45:50,207 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 37368536-7cb7-4a75-9c95-82aab277f9f0
2025-04-24 02:45:50,208 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 02:45:50,208 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-24 02:45:50,208 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-24 02:45:50,208 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 02:45:50,212 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 02:45:50,213 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-24 02:45:50,213 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-24 02:45:50,213 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 02:45:50,213 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 02:45:50,214 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 37368536-7cb7-4a75-9c95-82aab277f9f0
2025-04-24 02:45:50,214 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 02:45:50,214 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 02:45:50,214 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 37368536-7cb7-4a75-9c95-82aab277f9f0 to /app/data/sessions/123/37368536-7cb7-4a75-9c95-82aab277f9f0/transcript.json
2025-04-24 02:45:50,217 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/37368536-7cb7-4a75-9c95-82aab277f9f0/transcript.json
2025-04-24 02:45:50,223 - managers.chat_file_manager - INFO - Session metadata for 37368536-7cb7-4a75-9c95-82aab277f9f0 saved/updated in DB.
2025-04-24 02:45:50,232 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 02:45:50,235 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 02:45:50,237 - api.endpoints.system_messages - INFO - Stored system message sys_cf5a42b4-e1ad-4398-a491-bfe1de8b3a14 in database
2025-04-24 02:45:50,239 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 02:45:50,239 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 02:45:50,239 - components.prompt_builder - INFO - Constructing prompt for session 37368536-7cb7-4a75-9c95-82aab277f9f0, user 123, depth 0
2025-04-24 02:45:50,240 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-24 02:45:50,240 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Tell me about the capabilities of RAI Chat'
2025-04-24 02:45:50,240 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 02:45:50,240 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 02:45:50,240 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 02:45:50,240 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-24 02:45:50,240 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 02:45:50,240 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 02:45:50,241 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 02:45:54,370 - CtxMemMgr_User123 - INFO - Loading session 37368536-7cb7-4a75-9c95-82aab277f9f0 for processing assistant message
2025-04-24 02:45:54,370 - CtxMemMgr_User123 - INFO - Loading session context for 37368536-7cb7-4a75-9c95-82aab277f9f0 from /app/data/sessions/123/37368536-7cb7-4a75-9c95-82aab277f9f0/context.json
2025-04-24 02:45:54,371 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/37368536-7cb7-4a75-9c95-82aab277f9f0/context.json not found. Initializing empty context for new session 37368536-7cb7-4a75-9c95-82aab277f9f0.
2025-04-24 02:45:54,371 - CtxMemMgr_User123 - INFO - Stored turn f32418bf-d296-4f40-9d8b-e7c90ad746a1 for active session 37368536-7cb7-4a75-9c95-82aab277f9f0
2025-04-24 02:45:54,371 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 37368536-7cb7-4a75-9c95-82aab277f9f0: '...'
2025-04-24 02:45:54,372 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 02:45:54,373 - CtxMemMgr_User123 - INFO - Session 37368536-7cb7-4a75-9c95-82aab277f9f0: Active history token count ~10 / 30000
2025-04-24 02:45:54,373 - CtxMemMgr_User123 - INFO - Saving active session context for 37368536-7cb7-4a75-9c95-82aab277f9f0 to /app/data/sessions/123/37368536-7cb7-4a75-9c95-82aab277f9f0/context.json
2025-04-24 02:45:54,375 - CtxMemMgr_User123 - INFO - Successfully saved context for session 37368536-7cb7-4a75-9c95-82aab277f9f0
2025-04-24 02:45:54,375 - ActionHandler_User123 - INFO - Processing LLM response for session 37368536-7cb7-4a75-9c95-82aab277f9f0, user 123
2025-04-24 02:45:54,376 - ActionHandler_User123 - INFO - Web search detected with pattern: \bweb\s+search\s*:\s*['\"]?(.+?)['\"]?\b
2025-04-24 02:45:54,376 - ActionHandler_User123 - INFO - Extracted query: '**'
2025-04-24 02:45:54,376 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: '**' (Session: 37368536-7cb7-4a75-9c95-82aab277f9f0)
2025-04-24 02:45:54,377 - CtxMemMgr_User123 - INFO - Stored turn 95d429fd-703b-43a3-b74b-599279a44e4a for active session 37368536-7cb7-4a75-9c95-82aab277f9f0
2025-04-24 02:45:54,377 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 37368536-7cb7-4a75-9c95-82aab277f9f0: '...'
2025-04-24 02:45:54,377 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 02:45:54,377 - CtxMemMgr_User123 - INFO - Session 37368536-7cb7-4a75-9c95-82aab277f9f0: Active history token count ~20 / 30000
2025-04-24 02:45:54,377 - CtxMemMgr_User123 - INFO - Saving active session context for 37368536-7cb7-4a75-9c95-82aab277f9f0 to /app/data/sessions/123/37368536-7cb7-4a75-9c95-82aab277f9f0/context.json
2025-04-24 02:45:54,378 - CtxMemMgr_User123 - INFO - Successfully saved context for session 37368536-7cb7-4a75-9c95-82aab277f9f0
2025-04-24 02:45:54,379 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745462754-37368536) ***
2025-04-24 02:45:54,379 - ActionHandler_User123 - INFO - Storing search status for session 37368536-7cb7-4a75-9c95-82aab277f9f0: active
2025-04-24 02:45:54,383 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 02:45:54,389 - api.endpoints.system_messages - INFO - Stored system message sys_9e371ccb-416e-4b8c-82d5-45fc600b76a9 in database
2025-04-24 02:45:54,391 - ActionHandler_User123 - INFO - Stored system message ID sys_9e371ccb-416e-4b8c-82d5-45fc600b76a9 for search ID search-1745462754-37368536
2025-04-24 02:45:54,391 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session 37368536-7cb7-4a75-9c95-82aab277f9f0
2025-04-24 02:45:54,391 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: '**'
2025-04-24 02:45:54,391 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-24 02:45:54,392 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-24 02:45:54,392 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-24 02:45:54,392 - ActionHandler_User123 - INFO - Calling perform_search function for query: '**'
2025-04-24 02:45:54,392 - components.action_handler - INFO - Performing Tavily search for query: '**'
2025-04-24 02:45:54,392 - components.action_handler - INFO - Calling Tavily search API with query: '**'
2025-04-24 02:45:56,435 - components.action_handler - INFO - Tavily search response: {'query': '**', 'follow_up_questions': None, 'answer': 'In Python, ** is the exponentiation operator; it raises the left operand to the power of the right. pow() and math.pow() functions perform the s...
2025-04-24 02:45:56,436 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: **

Summary: In Python, ** is the exponentiation operator; it raises the left operand to the power of the right. pow() and math.pow() functions perform the same operation.

1. Expo...
2025-04-24 02:45:56,436 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-24 02:45:56,436 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-24 02:45:56,437 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1975
2025-04-24 02:45:56,437 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: **

Summary: In Python, ** is the exponentiation operator; it raises the left op...
2025-04-24 02:45:56,437 - ActionHandler_User123 - INFO - Updating system message sys_9e371ccb-416e-4b8c-82d5-45fc600b76a9 for search ID search-1745462754-37368536
2025-04-24 02:45:56,440 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 02:45:56,445 - api.endpoints.system_messages - INFO - Updated system message sys_9e371ccb-416e-4b8c-82d5-45fc600b76a9 in database
2025-04-24 02:45:56,448 - ActionHandler_User123 - INFO - Successfully updated system message sys_9e371ccb-416e-4b8c-82d5-45fc600b76a9
2025-04-24 02:45:56,453 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 02:45:56,459 - api.endpoints.system_messages - INFO - Stored system message sys_3c104c5d-4d06-48a3-81b3-d47507356dc5 in database
2025-04-24 02:54:22,130 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-24 02:54:22,130 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-24 02:54:22,130 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-24 02:54:22,143 - core.database.connection - INFO - Database connection successful!
2025-04-24 02:54:22,144 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-24 02:54:22,146 - core.database.connection - INFO - Database tables created or already exist.
2025-04-24 02:54:22,151 - core.database.connection - INFO - Default user already exists.
2025-04-24 02:54:22,163 - app - INFO - Auth blueprint registered successfully
2025-04-24 02:54:22,173 - components.action_handler - INFO - Current directory: /app/components
2025-04-24 02:54:22,173 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-24 02:54:22,173 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-24 02:54:22,173 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-24 02:54:22,173 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-24 02:54:22,173 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-24 02:54:22,173 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-24 02:54:22,173 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-24 02:54:22,178 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-24 02:54:22,178 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-24 02:54:22,178 - components.action_handler - INFO - Web search functionality is available
2025-04-24 02:54:22,178 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-24 02:54:22,179 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-24 02:54:22,179 - app - INFO - Chat blueprint registered successfully
2025-04-24 02:54:22,180 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-24 02:54:22,181 - app - INFO - Session blueprint registered successfully
2025-04-24 02:54:22,182 - app - INFO - Memory blueprint registered successfully
2025-04-24 02:54:22,184 - app - INFO - System Messages blueprint registered successfully
2025-04-24 02:54:22,185 - app - INFO - Test Search blueprint registered successfully
2025-04-24 02:54:22,186 - app - INFO - Basic endpoints registered successfully
2025-04-24 02:54:22,191 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-24 02:56:13,138 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 02:56:13,139 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-24 02:56:13,139 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-24 02:56:13,140 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-24 02:56:13,140 - managers.user_session_manager - INFO - Created new session ID: 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971 for user: 123
2025-04-24 02:56:13,140 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971
2025-04-24 02:56:13,141 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 02:56:13,141 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-24 02:56:13,142 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-24 02:56:13,142 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 02:56:13,148 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 02:56:13,150 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-24 02:56:13,151 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-24 02:56:13,151 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 02:56:13,151 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 02:56:13,151 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971
2025-04-24 02:56:13,151 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 02:56:13,152 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 02:56:13,153 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971 to /app/data/sessions/123/3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971/transcript.json
2025-04-24 02:56:13,155 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971/transcript.json
2025-04-24 02:56:13,162 - managers.chat_file_manager - INFO - Session metadata for 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971 saved/updated in DB.
2025-04-24 02:56:13,172 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 02:56:13,177 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 02:56:13,180 - api.endpoints.system_messages - INFO - Stored system message sys_9a86e6b4-8d3e-4fdc-99e7-0ba6b4d6bfaa in database
2025-04-24 02:56:13,182 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 02:56:13,182 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 02:56:13,182 - components.prompt_builder - INFO - Constructing prompt for session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971, user 123, depth 0
2025-04-24 02:56:13,183 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-24 02:56:13,183 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Tell me about the capabilities of RAI Chat'
2025-04-24 02:56:13,183 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 02:56:13,183 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 02:56:13,183 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 02:56:13,183 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-24 02:56:13,183 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 02:56:13,184 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 02:56:13,184 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 02:56:16,646 - CtxMemMgr_User123 - INFO - Loading session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971 for processing assistant message
2025-04-24 02:56:16,646 - CtxMemMgr_User123 - INFO - Loading session context for 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971 from /app/data/sessions/123/3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971/context.json
2025-04-24 02:56:16,647 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971/context.json not found. Initializing empty context for new session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971.
2025-04-24 02:56:16,647 - CtxMemMgr_User123 - INFO - Stored turn 1522236f-23e6-41da-a919-c0092fe1d49a for active session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971
2025-04-24 02:56:16,648 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971: '...'
2025-04-24 02:56:16,650 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 02:56:16,650 - CtxMemMgr_User123 - INFO - Session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971: Active history token count ~10 / 30000
2025-04-24 02:56:16,651 - CtxMemMgr_User123 - INFO - Saving active session context for 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971 to /app/data/sessions/123/3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971/context.json
2025-04-24 02:56:16,654 - CtxMemMgr_User123 - INFO - Successfully saved context for session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971
2025-04-24 02:56:16,654 - ActionHandler_User123 - INFO - Processing LLM response for session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971, user 123
2025-04-24 02:56:16,655 - ActionHandler_User123 - INFO - Web search detected with pattern: \bweb\s+search\s*:\s*['\"]?(.+?)['\"]?\b
2025-04-24 02:56:16,656 - ActionHandler_User123 - INFO - Extracted query: '**'
2025-04-24 02:56:16,656 - ActionHandler_User123 - INFO - WEB SEARCH signal detected for query: '**' (Session: 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971)
2025-04-24 02:56:16,656 - CtxMemMgr_User123 - INFO - Stored turn 039bb13c-deb3-4f89-93f0-f4e24b802336 for active session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971
2025-04-24 02:56:16,656 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971: '...'
2025-04-24 02:56:16,657 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 02:56:16,657 - CtxMemMgr_User123 - INFO - Session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971: Active history token count ~20 / 30000
2025-04-24 02:56:16,657 - CtxMemMgr_User123 - INFO - Saving active session context for 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971 to /app/data/sessions/123/3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971/context.json
2025-04-24 02:56:16,660 - CtxMemMgr_User123 - INFO - Successfully saved context for session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971
2025-04-24 02:56:16,660 - ActionHandler_User123 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745463376-3b11a4d0) ***
2025-04-24 02:56:16,661 - ActionHandler_User123 - INFO - Storing search status for session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971: active
2025-04-24 02:56:16,670 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 02:56:16,675 - api.endpoints.system_messages - INFO - Stored system message sys_14789dbc-b1e2-4188-bd3c-46af768dcb5b in database
2025-04-24 02:56:16,676 - ActionHandler_User123 - INFO - Stored system message ID sys_14789dbc-b1e2-4188-bd3c-46af768dcb5b for search ID search-1745463376-3b11a4d0
2025-04-24 02:56:16,676 - ActionHandler_User123 - INFO - Successfully posted system message to dedicated API for session 3b11a4d0-2cbe-4e36-ba99-4cbe3fe3c971
2025-04-24 02:56:16,676 - ActionHandler_User123 - INFO - EXECUTING WEB SEARCH for query: '**'
2025-04-24 02:56:16,676 - ActionHandler_User123 - INFO - TAVILY_AVAILABLE = True
2025-04-24 02:56:16,676 - ActionHandler_User123 - INFO - TAVILY_API_KEY from env: Present
2025-04-24 02:56:16,676 - ActionHandler_User123 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-24 02:56:16,677 - ActionHandler_User123 - INFO - Calling perform_search function for query: '**'
2025-04-24 02:56:16,677 - components.action_handler - INFO - Performing Tavily search for query: '**'
2025-04-24 02:56:16,677 - components.action_handler - INFO - Calling Tavily search API with query: '**'
2025-04-24 02:56:18,733 - components.action_handler - INFO - Tavily search response: {'query': '**', 'follow_up_questions': None, 'answer': 'In Python, ** is the exponentiation operator; it raises the left operand to the power of the right. pow() and math.pow() functions perform the s...
2025-04-24 02:56:18,734 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: **

Summary: In Python, ** is the exponentiation operator; it raises the left operand to the power of the right. pow() and math.pow() functions perform the same operation.

1. Expo...
2025-04-24 02:56:18,734 - ActionHandler_User123 - INFO - perform_search function call completed successfully
2025-04-24 02:56:18,735 - ActionHandler_User123 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-24 02:56:18,736 - ActionHandler_User123 - INFO - SEARCH RESULTS LENGTH: 1975
2025-04-24 02:56:18,736 - ActionHandler_User123 - INFO - Received valid web search results (first 100 chars): Search results for: **

Summary: In Python, ** is the exponentiation operator; it raises the left op...
2025-04-24 02:56:18,737 - ActionHandler_User123 - INFO - Updating system message sys_14789dbc-b1e2-4188-bd3c-46af768dcb5b for search ID search-1745463376-3b11a4d0
2025-04-24 02:56:18,742 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 02:56:18,752 - api.endpoints.system_messages - INFO - Updated system message sys_14789dbc-b1e2-4188-bd3c-46af768dcb5b in database
2025-04-24 02:56:18,754 - ActionHandler_User123 - INFO - Successfully updated system message sys_14789dbc-b1e2-4188-bd3c-46af768dcb5b
2025-04-24 02:56:18,762 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 02:56:18,786 - api.endpoints.system_messages - INFO - Stored system message sys_9b6c1625-697b-4bec-8ce6-5e8675939dec in database
2025-04-24 03:01:30,692 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:01:30,694 - managers.user_session_manager - INFO - Created new session ID: cc05d37e-8f1f-4d17-9857-e46ca4fa58d2 for user: 123
2025-04-24 03:01:30,694 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: cc05d37e-8f1f-4d17-9857-e46ca4fa58d2
2025-04-24 03:01:30,695 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-24 03:01:30,695 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-24 03:01:30,696 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 03:01:30,698 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:01:30,699 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-24 03:01:30,700 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-24 03:01:30,700 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 03:01:30,700 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 03:01:30,700 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: cc05d37e-8f1f-4d17-9857-e46ca4fa58d2
2025-04-24 03:01:30,700 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:01:30,701 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:01:30,701 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2 to /app/data/sessions/123/cc05d37e-8f1f-4d17-9857-e46ca4fa58d2/transcript.json
2025-04-24 03:01:30,702 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/cc05d37e-8f1f-4d17-9857-e46ca4fa58d2/transcript.json
2025-04-24 03:01:30,704 - managers.chat_file_manager - INFO - Session metadata for cc05d37e-8f1f-4d17-9857-e46ca4fa58d2 saved/updated in DB.
2025-04-24 03:01:30,712 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:01:30,717 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:01:30,721 - api.endpoints.system_messages - INFO - Stored system message sys_ed69ec42-c96c-4e92-9eda-c9b35a43b74a in database
2025-04-24 03:01:30,726 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:01:30,726 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:01:30,727 - components.prompt_builder - INFO - Constructing prompt for session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2, user 123, depth 0
2025-04-24 03:01:30,727 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-24 03:01:30,727 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Please describe the features of RAI Chat without searching the web.'
2025-04-24 03:01:30,727 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:01:30,727 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:01:30,727 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:01:30,727 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-24 03:01:30,729 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:01:30,729 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:01:30,730 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:01:33,367 - CtxMemMgr_User123 - INFO - Loading session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2 for processing assistant message
2025-04-24 03:01:33,367 - CtxMemMgr_User123 - INFO - Loading session context for cc05d37e-8f1f-4d17-9857-e46ca4fa58d2 from /app/data/sessions/123/cc05d37e-8f1f-4d17-9857-e46ca4fa58d2/context.json
2025-04-24 03:01:33,368 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/cc05d37e-8f1f-4d17-9857-e46ca4fa58d2/context.json not found. Initializing empty context for new session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2.
2025-04-24 03:01:33,368 - CtxMemMgr_User123 - INFO - Stored turn 63099b5d-278e-464e-8e87-760c1bb3e375 for active session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2
2025-04-24 03:01:33,368 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2: '...'
2025-04-24 03:01:33,368 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:01:33,368 - CtxMemMgr_User123 - INFO - Session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2: Active history token count ~16 / 30000
2025-04-24 03:01:33,369 - CtxMemMgr_User123 - INFO - Saving active session context for cc05d37e-8f1f-4d17-9857-e46ca4fa58d2 to /app/data/sessions/123/cc05d37e-8f1f-4d17-9857-e46ca4fa58d2/context.json
2025-04-24 03:01:33,370 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2
2025-04-24 03:01:33,370 - ActionHandler_User123 - INFO - Processing LLM response for session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2, user 123
2025-04-24 03:01:33,372 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: cc05d37e-8f1f-4d17-9857-e46ca4fa58d2).
2025-04-24 03:01:33,372 - CtxMemMgr_User123 - INFO - Stored turn e7122700-c191-4dd4-bb3c-bc9c5c324caf for active session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2
2025-04-24 03:01:33,372 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2: '...'
2025-04-24 03:01:33,372 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:01:33,372 - CtxMemMgr_User123 - INFO - Session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2: Active history token count ~32 / 30000
2025-04-24 03:01:33,373 - CtxMemMgr_User123 - INFO - Saving active session context for cc05d37e-8f1f-4d17-9857-e46ca4fa58d2 to /app/data/sessions/123/cc05d37e-8f1f-4d17-9857-e46ca4fa58d2/context.json
2025-04-24 03:01:33,375 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc05d37e-8f1f-4d17-9857-e46ca4fa58d2
2025-04-24 03:01:33,376 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:02:18,509 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:02:18,510 - managers.user_session_manager - INFO - Created new session ID: f844661c-71f6-4b32-a676-342d41c28d6d for user: 123
2025-04-24 03:02:18,510 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: f844661c-71f6-4b32-a676-342d41c28d6d
2025-04-24 03:02:18,511 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-24 03:02:18,512 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-24 03:02:18,512 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 03:02:18,515 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:02:18,517 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-24 03:02:18,517 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-24 03:02:18,517 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 03:02:18,517 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 03:02:18,517 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: f844661c-71f6-4b32-a676-342d41c28d6d
2025-04-24 03:02:18,518 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:02:18,518 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:02:18,518 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session f844661c-71f6-4b32-a676-342d41c28d6d to /app/data/sessions/123/f844661c-71f6-4b32-a676-342d41c28d6d/transcript.json
2025-04-24 03:02:18,520 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/f844661c-71f6-4b32-a676-342d41c28d6d/transcript.json
2025-04-24 03:02:18,522 - managers.chat_file_manager - INFO - Session metadata for f844661c-71f6-4b32-a676-342d41c28d6d saved/updated in DB.
2025-04-24 03:02:18,531 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:02:18,531 - api.endpoints.chat - INFO - Direct web search requested via chat endpoint: What are the features of GPT-4?
2025-04-24 03:02:18,532 - components.action_handler - INFO - Performing Tavily search for query: 'What are the features of GPT-4?'
2025-04-24 03:02:18,533 - components.action_handler - INFO - Calling Tavily search API with query: 'What are the features of GPT-4?'
2025-04-24 03:02:26,234 - components.action_handler - INFO - Tavily search response: {'query': 'What are the features of GPT-4?', 'follow_up_questions': None, 'answer': "GPT-4 is an advanced language model with improved reasoning, creativity, and factual accuracy. It processes text an...
2025-04-24 03:02:26,235 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: What are the features of GPT-4?

Summary: GPT-4 is an advanced language model with improved reasoning, creativity, and factual accuracy. It processes text and images, and is availa...
2025-04-24 03:05:11,760 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-24 03:05:11,760 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-24 03:05:11,761 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-24 03:05:11,773 - core.database.connection - INFO - Database connection successful!
2025-04-24 03:05:11,774 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-24 03:05:11,776 - core.database.connection - INFO - Database tables created or already exist.
2025-04-24 03:05:11,781 - core.database.connection - INFO - Default user already exists.
2025-04-24 03:05:11,795 - app - INFO - Auth blueprint registered successfully
2025-04-24 03:05:11,806 - components.action_handler - INFO - Current directory: /app/components
2025-04-24 03:05:11,806 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-24 03:05:11,806 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-24 03:05:11,806 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-24 03:05:11,806 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-24 03:05:11,806 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-24 03:05:11,806 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-24 03:05:11,806 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-24 03:05:11,811 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-24 03:05:11,811 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-24 03:05:11,811 - components.action_handler - INFO - Web search functionality is available
2025-04-24 03:05:11,812 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-24 03:05:11,812 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-24 03:05:11,812 - app - INFO - Chat blueprint registered successfully
2025-04-24 03:05:11,813 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-24 03:05:11,815 - app - INFO - Session blueprint registered successfully
2025-04-24 03:05:11,816 - app - INFO - Memory blueprint registered successfully
2025-04-24 03:05:11,818 - app - INFO - System Messages blueprint registered successfully
2025-04-24 03:05:11,819 - app - INFO - Test Search blueprint registered successfully
2025-04-24 03:05:11,820 - app - INFO - Basic endpoints registered successfully
2025-04-24 03:05:11,824 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-24 03:10:09,473 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:10:09,474 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-24 03:10:09,476 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-24 03:10:09,477 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-24 03:10:09,478 - managers.user_session_manager - INFO - Created new session ID: bfc73947-bee1-420c-9772-5e8a97bf5a67 for user: 123
2025-04-24 03:10:09,482 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: bfc73947-bee1-420c-9772-5e8a97bf5a67
2025-04-24 03:10:09,501 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:10:09,501 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-24 03:10:09,501 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-24 03:10:09,502 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 03:10:09,503 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:10:09,504 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-24 03:10:09,504 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-24 03:10:09,504 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 03:10:09,504 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 03:10:09,504 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: bfc73947-bee1-420c-9772-5e8a97bf5a67
2025-04-24 03:10:09,504 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:10:09,504 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:10:09,505 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session bfc73947-bee1-420c-9772-5e8a97bf5a67 to /app/data/sessions/123/bfc73947-bee1-420c-9772-5e8a97bf5a67/transcript.json
2025-04-24 03:10:09,505 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/bfc73947-bee1-420c-9772-5e8a97bf5a67/transcript.json
2025-04-24 03:10:09,508 - managers.chat_file_manager - INFO - Session metadata for bfc73947-bee1-420c-9772-5e8a97bf5a67 saved/updated in DB.
2025-04-24 03:10:09,524 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:10:09,528 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:10:09,534 - api.endpoints.system_messages - INFO - Stored system message sys_39dde3b1-7076-4ed7-9b24-01d150257faf in database
2025-04-24 03:10:09,535 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:10:09,536 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:10:09,536 - components.prompt_builder - INFO - Constructing prompt for session bfc73947-bee1-420c-9772-5e8a97bf5a67, user 123, depth 0
2025-04-24 03:10:09,536 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-24 03:10:09,536 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Please describe the features of RAI Chat without searching the web.'
2025-04-24 03:10:09,536 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:10:09,536 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:10:09,537 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:10:09,537 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-24 03:10:09,538 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:10:09,538 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:10:09,538 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:10:12,121 - CtxMemMgr_User123 - INFO - Loading session bfc73947-bee1-420c-9772-5e8a97bf5a67 for processing assistant message
2025-04-24 03:10:12,122 - CtxMemMgr_User123 - INFO - Loading session context for bfc73947-bee1-420c-9772-5e8a97bf5a67 from /app/data/sessions/123/bfc73947-bee1-420c-9772-5e8a97bf5a67/context.json
2025-04-24 03:10:12,124 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/bfc73947-bee1-420c-9772-5e8a97bf5a67/context.json not found. Initializing empty context for new session bfc73947-bee1-420c-9772-5e8a97bf5a67.
2025-04-24 03:10:12,125 - CtxMemMgr_User123 - INFO - Stored turn d12d2a05-4f3a-45b3-88a1-a60b58b21433 for active session bfc73947-bee1-420c-9772-5e8a97bf5a67
2025-04-24 03:10:12,126 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session bfc73947-bee1-420c-9772-5e8a97bf5a67: '...'
2025-04-24 03:10:12,128 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:10:12,129 - CtxMemMgr_User123 - INFO - Session bfc73947-bee1-420c-9772-5e8a97bf5a67: Active history token count ~16 / 30000
2025-04-24 03:10:12,129 - CtxMemMgr_User123 - INFO - Saving active session context for bfc73947-bee1-420c-9772-5e8a97bf5a67 to /app/data/sessions/123/bfc73947-bee1-420c-9772-5e8a97bf5a67/context.json
2025-04-24 03:10:12,132 - CtxMemMgr_User123 - INFO - Successfully saved context for session bfc73947-bee1-420c-9772-5e8a97bf5a67
2025-04-24 03:10:12,132 - ActionHandler_User123 - INFO - Processing LLM response for session bfc73947-bee1-420c-9772-5e8a97bf5a67, user 123
2025-04-24 03:10:12,133 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: bfc73947-bee1-420c-9772-5e8a97bf5a67).
2025-04-24 03:10:12,134 - CtxMemMgr_User123 - INFO - Stored turn fa7bc412-d82f-4774-8e69-c6f1396cc7a1 for active session bfc73947-bee1-420c-9772-5e8a97bf5a67
2025-04-24 03:10:12,134 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session bfc73947-bee1-420c-9772-5e8a97bf5a67: '...'
2025-04-24 03:10:12,135 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:10:12,135 - CtxMemMgr_User123 - INFO - Session bfc73947-bee1-420c-9772-5e8a97bf5a67: Active history token count ~32 / 30000
2025-04-24 03:10:12,136 - CtxMemMgr_User123 - INFO - Saving active session context for bfc73947-bee1-420c-9772-5e8a97bf5a67 to /app/data/sessions/123/bfc73947-bee1-420c-9772-5e8a97bf5a67/context.json
2025-04-24 03:10:12,140 - CtxMemMgr_User123 - INFO - Successfully saved context for session bfc73947-bee1-420c-9772-5e8a97bf5a67
2025-04-24 03:10:12,140 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:10:12,141 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:12:00Z",
    "speaker": "User...
2025-04-24 03:15:52,075 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:15:52,076 - managers.user_session_manager - INFO - Created new session ID: d56cafcc-8f60-43d7-b848-9724824ba07e for user: 123
2025-04-24 03:15:52,076 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:15:52,077 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-24 03:15:52,078 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-24 03:15:52,078 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 03:15:52,080 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:15:52,081 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-24 03:15:52,082 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-24 03:15:52,082 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 03:15:52,082 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 03:15:52,082 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:15:52,083 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:15:52,084 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:15:52,084 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/transcript.json
2025-04-24 03:15:52,086 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/transcript.json
2025-04-24 03:15:52,088 - managers.chat_file_manager - INFO - Session metadata for d56cafcc-8f60-43d7-b848-9724824ba07e saved/updated in DB.
2025-04-24 03:15:52,096 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:15:52,101 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:15:52,107 - api.endpoints.system_messages - INFO - Stored system message sys_128cec7c-51a5-4a5f-aebf-871fd655318d in database
2025-04-24 03:15:52,109 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:15:52,109 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:15:52,109 - components.prompt_builder - INFO - Constructing prompt for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123, depth 0
2025-04-24 03:15:52,109 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-24 03:15:52,109 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'My name is Jordan and I'm working on a project called RAI Chat.'
2025-04-24 03:15:52,109 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:15:52,109 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:15:52,109 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:15:52,109 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-24 03:15:52,110 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:15:52,110 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:15:52,110 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:15:54,597 - CtxMemMgr_User123 - INFO - Loading session d56cafcc-8f60-43d7-b848-9724824ba07e for processing assistant message
2025-04-24 03:15:54,598 - CtxMemMgr_User123 - INFO - Loading session context for d56cafcc-8f60-43d7-b848-9724824ba07e from /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:15:54,598 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json not found. Initializing empty context for new session d56cafcc-8f60-43d7-b848-9724824ba07e.
2025-04-24 03:15:54,598 - CtxMemMgr_User123 - INFO - Stored turn 0ca7cfb2-b136-4c00-927a-f71ee6bc9232 for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:15:54,599 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:15:54,599 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: Jordan
2025-04-24 03:15:54,599 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:15:54,599 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~15 / 30000
2025-04-24 03:15:54,599 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:15:54,601 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:15:54,602 - ActionHandler_User123 - INFO - Processing LLM response for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123
2025-04-24 03:15:54,603 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: d56cafcc-8f60-43d7-b848-9724824ba07e).
2025-04-24 03:15:54,603 - CtxMemMgr_User123 - INFO - Stored turn 4f4e434f-8bc9-4957-9625-83a48033fd4e for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:15:54,604 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:15:54,604 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: Jordan
2025-04-24 03:15:54,604 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:15:54,604 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~30 / 30000
2025-04-24 03:15:54,604 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:15:54,605 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:15:54,606 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:15:54,606 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:16:00Z",
    "speaker": "User...
2025-04-24 03:15:55,611 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:15:55,615 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:15:55,621 - api.endpoints.system_messages - INFO - Stored system message sys_baaa01c1-bd28-4c30-be40-abb50d026d54 in database
2025-04-24 03:15:55,624 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:15:55,625 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:15:55,626 - components.prompt_builder - INFO - Constructing prompt for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123, depth 0
2025-04-24 03:15:55,626 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I live in New York and I enjoy hiking on weekends.'
2025-04-24 03:15:55,626 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:15:55,626 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:15:55,626 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:15:55,628 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:15:55,628 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:15:55,629 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:15:58,086 - CtxMemMgr_User123 - INFO - Stored turn d203cce8-3ed0-4ec3-8091-e53728d8d259 for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:15:58,086 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:15:58,087 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:15:58,087 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~42 / 30000
2025-04-24 03:15:58,087 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:15:58,089 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:15:58,089 - ActionHandler_User123 - INFO - Processing LLM response for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123
2025-04-24 03:15:58,090 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: d56cafcc-8f60-43d7-b848-9724824ba07e).
2025-04-24 03:15:58,090 - CtxMemMgr_User123 - INFO - Stored turn fba42021-445e-455e-93f9-fe813822a0f1 for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:15:58,091 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:15:58,091 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:15:58,092 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~54 / 30000
2025-04-24 03:15:58,092 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:15:58,094 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:15:58,094 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:15:58,095 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:16:00Z",
    "speaker": "User...
2025-04-24 03:15:59,103 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:15:59,108 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:15:59,113 - api.endpoints.system_messages - INFO - Stored system message sys_76189635-0eed-4f44-91cc-564e86d8b064 in database
2025-04-24 03:15:59,118 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:15:59,118 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:15:59,119 - components.prompt_builder - INFO - Constructing prompt for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123, depth 0
2025-04-24 03:15:59,120 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'What's my name? And what project am I working on?'
2025-04-24 03:15:59,120 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:15:59,120 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:15:59,120 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:15:59,122 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:15:59,123 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:15:59,124 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:16:01,198 - CtxMemMgr_User123 - INFO - Stored turn 36a21390-78d0-47ad-a5ca-a270f4e38d0d for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:01,199 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:01,200 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:01,204 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~66 / 30000
2025-04-24 03:16:01,204 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:01,214 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:01,216 - ActionHandler_User123 - INFO - Processing LLM response for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123
2025-04-24 03:16:01,216 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: d56cafcc-8f60-43d7-b848-9724824ba07e).
2025-04-24 03:16:01,218 - CtxMemMgr_User123 - INFO - Stored turn ca7d0f69-52a2-4e81-8b3c-f712383346ca for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:01,219 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:01,220 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:01,221 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~78 / 30000
2025-04-24 03:16:01,221 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:01,230 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:01,230 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:16:01,232 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:16:00Z",
    "speaker": "User...
2025-04-24 03:16:02,245 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:16:02,255 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:16:02,264 - api.endpoints.system_messages - INFO - Stored system message sys_7f738197-ac57-40ba-a67d-d59ee0040b55 in database
2025-04-24 03:16:02,272 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:02,272 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:16:02,273 - components.prompt_builder - INFO - Constructing prompt for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123, depth 0
2025-04-24 03:16:02,274 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'The RAI Chat project uses Flask for the backend and React for the frontend.'
2025-04-24 03:16:02,274 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:16:02,274 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:16:02,275 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:16:02,277 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:02,277 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:16:02,278 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:16:04,655 - CtxMemMgr_User123 - INFO - Stored turn bbef84b1-f98b-40b9-aa7c-84576e4ca68b for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:04,655 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:04,656 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:04,656 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~96 / 30000
2025-04-24 03:16:04,656 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:04,659 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:04,659 - ActionHandler_User123 - INFO - Processing LLM response for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123
2025-04-24 03:16:04,659 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: d56cafcc-8f60-43d7-b848-9724824ba07e).
2025-04-24 03:16:04,659 - CtxMemMgr_User123 - INFO - Stored turn ab07e14a-d2d8-4d36-a945-fe0d07f71ee3 for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:04,660 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:04,660 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:04,660 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~114 / 30000
2025-04-24 03:16:04,660 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:04,662 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:04,662 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:16:04,663 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-07-27T03:18:00Z",
    "speaker": "User...
2025-04-24 03:16:05,676 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:16:05,686 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:16:05,697 - api.endpoints.system_messages - INFO - Stored system message sys_19098399-035e-403a-9a78-e622ed7de705 in database
2025-04-24 03:16:05,705 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:05,705 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:16:05,706 - components.prompt_builder - INFO - Constructing prompt for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123, depth 0
2025-04-24 03:16:05,706 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Where do I live, and what activity do I enjoy on weekends?'
2025-04-24 03:16:05,706 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:16:05,706 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:16:05,706 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:16:05,707 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:05,707 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:16:05,707 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:16:07,581 - CtxMemMgr_User123 - INFO - Stored turn 2a3ef0fd-4ddd-46ad-83f1-37d00f67df2c for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:07,581 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:07,581 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:07,582 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~128 / 30000
2025-04-24 03:16:07,582 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:07,584 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:07,584 - ActionHandler_User123 - INFO - Processing LLM response for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123
2025-04-24 03:16:07,584 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: d56cafcc-8f60-43d7-b848-9724824ba07e).
2025-04-24 03:16:07,585 - CtxMemMgr_User123 - INFO - Stored turn d5514492-8189-4c90-b618-b1c875a0903e for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:07,585 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:07,585 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:07,585 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~142 / 30000
2025-04-24 03:16:07,586 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:07,587 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:07,587 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:16:07,588 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-07-27T03:18:00Z",
    "speaker": "User...
2025-04-24 03:16:08,594 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:16:08,603 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:16:08,615 - api.endpoints.system_messages - INFO - Stored system message sys_cc594b8a-cdaf-4cd8-aaed-d98f1075d4f2 in database
2025-04-24 03:16:08,622 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:08,623 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:16:08,625 - components.prompt_builder - INFO - Constructing prompt for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123, depth 0
2025-04-24 03:16:08,626 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'What technologies does my project use?'
2025-04-24 03:16:08,626 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:16:08,626 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:16:08,626 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:16:08,627 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:08,627 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:16:08,628 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:16:10,960 - CtxMemMgr_User123 - INFO - Stored turn 3758a4c5-e310-4bf6-81a2-4a1d1e41666f for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:10,963 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:10,963 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:10,964 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~151 / 30000
2025-04-24 03:16:10,964 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:10,978 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:10,981 - ActionHandler_User123 - INFO - Processing LLM response for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123
2025-04-24 03:16:10,982 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: d56cafcc-8f60-43d7-b848-9724824ba07e).
2025-04-24 03:16:10,986 - CtxMemMgr_User123 - INFO - Stored turn fcee36c6-09f7-4cc5-b35f-f8ef3e368c55 for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:10,987 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:10,987 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:10,987 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~160 / 30000
2025-04-24 03:16:10,988 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:10,990 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:10,990 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:16:10,990 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:18:00Z",
    "speaker": "User...
2025-04-24 03:16:11,995 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:16:12,000 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:16:12,004 - api.endpoints.system_messages - INFO - Stored system message sys_8017bdfe-c0f1-46ea-b5b8-0851f0ab2ecc in database
2025-04-24 03:16:12,008 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:12,008 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:16:12,009 - components.prompt_builder - INFO - Constructing prompt for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123, depth 0
2025-04-24 03:16:12,010 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I started this project in January 2025 and I want to finish it by December 2025.'
2025-04-24 03:16:12,010 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:16:12,011 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:16:12,011 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:16:12,013 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:12,013 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:16:12,014 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:16:14,406 - CtxMemMgr_User123 - INFO - Stored turn 485b468b-007c-4bf7-922c-3235578f131e for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:14,409 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:14,410 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:14,412 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~180 / 30000
2025-04-24 03:16:14,413 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:14,438 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:14,439 - ActionHandler_User123 - INFO - Processing LLM response for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123
2025-04-24 03:16:14,442 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: d56cafcc-8f60-43d7-b848-9724824ba07e).
2025-04-24 03:16:14,445 - CtxMemMgr_User123 - INFO - Stored turn 58fb35fa-64c2-4e6b-a00a-a02849cff20d for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:14,446 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:14,449 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:14,455 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~200 / 30000
2025-04-24 03:16:14,458 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:14,470 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:14,473 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:16:14,474 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:18:00Z",
    "speaker": "User...
2025-04-24 03:16:15,487 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:16:15,494 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:16:15,505 - api.endpoints.system_messages - INFO - Stored system message sys_5c3623bb-b683-4782-991f-32b7224a992b in database
2025-04-24 03:16:15,512 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:15,512 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:16:15,513 - components.prompt_builder - INFO - Constructing prompt for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123, depth 0
2025-04-24 03:16:15,515 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Based on what you know about me, my project, and my timeline, what do you think my biggest challenges will be?'
2025-04-24 03:16:15,516 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:16:15,516 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:16:15,517 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:16:15,520 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:15,521 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:16:15,522 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:16:19,812 - CtxMemMgr_User123 - INFO - Stored turn 1ee0d9d3-a372-4613-a710-c7778541c359 for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:19,814 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:19,815 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:19,818 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~227 / 30000
2025-04-24 03:16:19,819 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:19,838 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:19,838 - ActionHandler_User123 - INFO - Processing LLM response for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123
2025-04-24 03:16:19,841 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: d56cafcc-8f60-43d7-b848-9724824ba07e).
2025-04-24 03:16:19,843 - CtxMemMgr_User123 - INFO - Stored turn 5bd479a7-47d1-40d7-bad7-a9c166df464c for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:19,843 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:19,844 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:19,844 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~254 / 30000
2025-04-24 03:16:19,844 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:19,847 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:19,849 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:16:19,851 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:18:00Z",
    "speaker": "User...
2025-04-24 03:16:20,860 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:16:20,864 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:16:20,869 - api.endpoints.system_messages - INFO - Stored system message sys_d45043cd-66dc-402f-98fe-a0c9aadd9859 in database
2025-04-24 03:16:20,873 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:20,873 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:16:20,874 - components.prompt_builder - INFO - Constructing prompt for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123, depth 0
2025-04-24 03:16:20,874 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Summarize everything you know about me and my project so far.'
2025-04-24 03:16:20,874 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:16:20,875 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:16:20,875 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:16:20,877 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:16:20,877 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:16:20,878 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:16:23,240 - CtxMemMgr_User123 - INFO - Stored turn 13aa04a6-750f-4161-ae15-bb046db77777 for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:23,242 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:23,242 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:23,244 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~269 / 30000
2025-04-24 03:16:23,244 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:23,248 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:23,249 - ActionHandler_User123 - INFO - Processing LLM response for session d56cafcc-8f60-43d7-b848-9724824ba07e, user 123
2025-04-24 03:16:23,249 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: d56cafcc-8f60-43d7-b848-9724824ba07e).
2025-04-24 03:16:23,249 - CtxMemMgr_User123 - INFO - Stored turn e8b2a9d6-3b69-4ad3-8833-3d36459fd79d for active session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:23,250 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session d56cafcc-8f60-43d7-b848-9724824ba07e: '...'
2025-04-24 03:16:23,250 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:16:23,250 - CtxMemMgr_User123 - INFO - Session d56cafcc-8f60-43d7-b848-9724824ba07e: Active history token count ~284 / 30000
2025-04-24 03:16:23,251 - CtxMemMgr_User123 - INFO - Saving active session context for d56cafcc-8f60-43d7-b848-9724824ba07e to /app/data/sessions/123/d56cafcc-8f60-43d7-b848-9724824ba07e/context.json
2025-04-24 03:16:23,254 - CtxMemMgr_User123 - INFO - Successfully saved context for session d56cafcc-8f60-43d7-b848-9724824ba07e
2025-04-24 03:16:23,255 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:16:23,255 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:20:00Z",
    "speaker": "User...
2025-04-24 03:23:49,188 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-24 03:23:49,188 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-24 03:23:49,188 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-24 03:23:49,202 - core.database.connection - INFO - Database connection successful!
2025-04-24 03:23:49,202 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-24 03:23:49,204 - core.database.connection - INFO - Database tables created or already exist.
2025-04-24 03:23:49,209 - core.database.connection - INFO - Default user already exists.
2025-04-24 03:23:49,224 - app - INFO - Auth blueprint registered successfully
2025-04-24 03:23:49,238 - components.action_handler - INFO - Current directory: /app/components
2025-04-24 03:23:49,238 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-24 03:23:49,238 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-24 03:23:49,238 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-24 03:23:49,238 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-24 03:23:49,238 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-24 03:23:49,238 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-24 03:23:49,238 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-24 03:23:49,243 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-24 03:23:49,243 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-24 03:23:49,243 - components.action_handler - INFO - Web search functionality is available
2025-04-24 03:23:49,243 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-24 03:23:49,243 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-24 03:23:49,244 - app - INFO - Chat blueprint registered successfully
2025-04-24 03:23:49,245 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-24 03:23:49,246 - app - INFO - Session blueprint registered successfully
2025-04-24 03:23:49,247 - app - INFO - Memory blueprint registered successfully
2025-04-24 03:23:49,249 - app - INFO - System Messages blueprint registered successfully
2025-04-24 03:23:49,250 - app - INFO - Test Search blueprint registered successfully
2025-04-24 03:23:49,250 - app - INFO - Basic endpoints registered successfully
2025-04-24 03:23:49,254 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-24 03:59:33,348 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:59:33,349 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-24 03:59:33,350 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-24 03:59:33,350 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-24 03:59:33,350 - managers.user_session_manager - INFO - Created new session ID: deaed4e7-cce1-4271-a4f7-f1237a02395d for user: 123
2025-04-24 03:59:33,351 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:33,352 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:59:33,353 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-24 03:59:33,353 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-24 03:59:33,353 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 03:59:33,361 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:59:33,362 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-24 03:59:33,363 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-24 03:59:33,363 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 03:59:33,363 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 03:59:33,363 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:33,364 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:59:33,364 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 03:59:33,364 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/transcript.json
2025-04-24 03:59:33,366 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/transcript.json
2025-04-24 03:59:33,372 - managers.chat_file_manager - INFO - Session metadata for deaed4e7-cce1-4271-a4f7-f1237a02395d saved/updated in DB.
2025-04-24 03:59:33,380 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:59:33,383 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:59:33,384 - api.endpoints.system_messages - INFO - Stored system message sys_8fdbbfed-ebeb-49af-8d64-4be2889a922a in database
2025-04-24 03:59:33,386 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:59:33,386 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:59:33,387 - components.prompt_builder - INFO - Constructing prompt for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123, depth 0
2025-04-24 03:59:33,387 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-24 03:59:33,387 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'My name is Jordan and I'm working on a project called RAI Chat.'
2025-04-24 03:59:33,387 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:59:33,387 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:59:33,387 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:59:33,387 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-24 03:59:33,388 - CtxMemMgr_User123 - INFO - Loaded 1 facts from DB for user 123
2025-04-24 03:59:33,388 - CtxMemMgr_User123 - INFO - Reloaded 1 facts from database for prompt generation
2025-04-24 03:59:33,388 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
2025-04-24 03:59:36,407 - CtxMemMgr_User123 - INFO - Loading session deaed4e7-cce1-4271-a4f7-f1237a02395d for processing assistant message
2025-04-24 03:59:36,407 - CtxMemMgr_User123 - INFO - Loading session context for deaed4e7-cce1-4271-a4f7-f1237a02395d from /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:36,408 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json not found. Initializing empty context for new session deaed4e7-cce1-4271-a4f7-f1237a02395d.
2025-04-24 03:59:36,408 - CtxMemMgr_User123 - INFO - Stored turn f04d5bc5-c6e7-446e-871c-98f4e314bc23 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:36,409 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:36,410 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: Jordan
2025-04-24 03:59:36,411 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: working
2025-04-24 03:59:36,411 - CtxMemMgr_User123 - INFO - Added name fact to user memory: User's name is working.
2025-04-24 03:59:36,417 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: a project called RAI Chat
2025-04-24 03:59:36,417 - CtxMemMgr_User123 - INFO - Added project fact to user memory: User is working on a project called a project called RAI Chat.
2025-04-24 03:59:36,428 - CtxMemMgr_User123 - INFO - Updated remembered_facts in DB for user 123 (4 facts). Pending commit.
2025-04-24 03:59:36,437 - CtxMemMgr_User123 - INFO - Successfully saved 2 new facts to database.
2025-04-24 03:59:36,437 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:36,437 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~15 / 30000
2025-04-24 03:59:36,437 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:36,439 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:36,439 - ActionHandler_User123 - INFO - Processing LLM response for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123
2025-04-24 03:59:36,440 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: deaed4e7-cce1-4271-a4f7-f1237a02395d).
2025-04-24 03:59:36,440 - CtxMemMgr_User123 - INFO - Stored turn c0998106-10db-4007-a7c6-9f99e33223ec for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:36,440 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:36,440 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: Jordan
2025-04-24 03:59:36,440 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: working
2025-04-24 03:59:36,440 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: a project called RAI Chat
2025-04-24 03:59:36,440 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:36,440 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~30 / 30000
2025-04-24 03:59:36,440 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:36,441 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:36,441 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:59:36,441 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:59:00Z",
    "speaker": "User...
2025-04-24 03:59:37,449 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:59:37,456 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:59:37,460 - api.endpoints.system_messages - INFO - Stored system message sys_8f1cfe74-6201-4dc0-aee1-13f297532f41 in database
2025-04-24 03:59:37,465 - CtxMemMgr_User123 - INFO - Loaded 4 facts from DB for user 123
2025-04-24 03:59:37,465 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:59:37,466 - components.prompt_builder - INFO - Constructing prompt for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123, depth 0
2025-04-24 03:59:37,466 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I live in New York and I enjoy hiking on weekends.'
2025-04-24 03:59:37,466 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:59:37,467 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:59:37,467 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:59:37,469 - CtxMemMgr_User123 - INFO - Loaded 4 facts from DB for user 123
2025-04-24 03:59:37,469 - CtxMemMgr_User123 - INFO - Reloaded 4 facts from database for prompt generation
2025-04-24 03:59:37,470 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
2025-04-24 03:59:40,031 - CtxMemMgr_User123 - INFO - Stored turn 87b8190e-c608-4251-ab5e-d9b872ac3307 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:40,031 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:40,032 - CtxMemMgr_User123 - INFO - Rule-based extraction found location: New York and I enjoy hiking on weekends
2025-04-24 03:59:40,032 - CtxMemMgr_User123 - INFO - Added location fact to user memory: User lives in New York and I enjoy hiking on weekends.
2025-04-24 03:59:40,032 - CtxMemMgr_User123 - INFO - Rule-based extraction found hobby: hiking
2025-04-24 03:59:40,033 - CtxMemMgr_User123 - INFO - Added hobby fact to user memory: User enjoys hiking.
2025-04-24 03:59:40,036 - CtxMemMgr_User123 - INFO - Updated remembered_facts in DB for user 123 (6 facts). Pending commit.
2025-04-24 03:59:40,043 - CtxMemMgr_User123 - INFO - Successfully saved 2 new facts to database.
2025-04-24 03:59:40,044 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:40,044 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~42 / 30000
2025-04-24 03:59:40,045 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:40,047 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:40,047 - ActionHandler_User123 - INFO - Processing LLM response for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123
2025-04-24 03:59:40,048 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: deaed4e7-cce1-4271-a4f7-f1237a02395d).
2025-04-24 03:59:40,048 - CtxMemMgr_User123 - INFO - Stored turn 42d76f5a-493e-4343-b82d-77c3a51cf233 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:40,048 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:40,049 - CtxMemMgr_User123 - INFO - Rule-based extraction found location: New York and I enjoy hiking on weekends
2025-04-24 03:59:40,049 - CtxMemMgr_User123 - INFO - Rule-based extraction found hobby: hiking
2025-04-24 03:59:40,049 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:40,049 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~54 / 30000
2025-04-24 03:59:40,049 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:40,051 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:40,051 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:59:40,051 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:59:00Z",
    "speaker": "User...
2025-04-24 03:59:41,070 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:59:41,077 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:59:41,089 - api.endpoints.system_messages - INFO - Stored system message sys_41bcd684-b3bc-4beb-b25a-38bde7575659 in database
2025-04-24 03:59:41,096 - CtxMemMgr_User123 - INFO - Loaded 6 facts from DB for user 123
2025-04-24 03:59:41,097 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:59:41,098 - components.prompt_builder - INFO - Constructing prompt for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123, depth 0
2025-04-24 03:59:41,098 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'What's my name? And what project am I working on?'
2025-04-24 03:59:41,098 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:59:41,098 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:59:41,098 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:59:41,099 - CtxMemMgr_User123 - INFO - Loaded 6 facts from DB for user 123
2025-04-24 03:59:41,099 - CtxMemMgr_User123 - INFO - Reloaded 6 facts from database for prompt generation
2025-04-24 03:59:41,100 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
2025-04-24 03:59:43,466 - CtxMemMgr_User123 - INFO - Stored turn 36d373d7-ac45-413b-95c4-40b1c7c4c196 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:43,466 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:43,467 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:43,467 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~66 / 30000
2025-04-24 03:59:43,467 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:43,472 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:43,472 - ActionHandler_User123 - INFO - Processing LLM response for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123
2025-04-24 03:59:43,472 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: deaed4e7-cce1-4271-a4f7-f1237a02395d).
2025-04-24 03:59:43,473 - CtxMemMgr_User123 - INFO - Stored turn d810d733-2d55-403f-8e33-e93551e8d9ed for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:43,473 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:43,473 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:43,473 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~78 / 30000
2025-04-24 03:59:43,474 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:43,476 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:43,476 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:59:43,477 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:59:00Z",
    "speaker": "User...
2025-04-24 03:59:44,487 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:59:44,493 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:59:44,499 - api.endpoints.system_messages - INFO - Stored system message sys_7081a6f0-1af0-475a-8c6b-4f9641310a32 in database
2025-04-24 03:59:44,504 - CtxMemMgr_User123 - INFO - Loaded 6 facts from DB for user 123
2025-04-24 03:59:44,504 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:59:44,505 - components.prompt_builder - INFO - Constructing prompt for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123, depth 0
2025-04-24 03:59:44,506 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'The RAI Chat project uses Flask for the backend and React for the frontend.'
2025-04-24 03:59:44,506 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:59:44,506 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:59:44,506 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:59:44,508 - CtxMemMgr_User123 - INFO - Loaded 6 facts from DB for user 123
2025-04-24 03:59:44,508 - CtxMemMgr_User123 - INFO - Reloaded 6 facts from database for prompt generation
2025-04-24 03:59:44,509 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
2025-04-24 03:59:47,357 - CtxMemMgr_User123 - INFO - Stored turn 48ed2727-6d83-49e2-800b-d1fe102bf142 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:47,357 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:47,357 - CtxMemMgr_User123 - INFO - Rule-based extraction found tech: Flask for the backend and React
2025-04-24 03:59:47,357 - CtxMemMgr_User123 - INFO - Added tech fact to user memory: User's project uses Flask for the backend and React.
2025-04-24 03:59:47,359 - CtxMemMgr_User123 - INFO - Updated remembered_facts in DB for user 123 (7 facts). Pending commit.
2025-04-24 03:59:47,361 - CtxMemMgr_User123 - INFO - Successfully saved 1 new facts to database.
2025-04-24 03:59:47,361 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:47,361 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~96 / 30000
2025-04-24 03:59:47,361 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:47,374 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:47,374 - ActionHandler_User123 - INFO - Processing LLM response for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123
2025-04-24 03:59:47,374 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: deaed4e7-cce1-4271-a4f7-f1237a02395d).
2025-04-24 03:59:47,374 - CtxMemMgr_User123 - INFO - Stored turn 17959a06-0432-46a4-aaa4-3bdaa8e3e349 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:47,380 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:47,380 - CtxMemMgr_User123 - INFO - Rule-based extraction found tech: Flask for the backend and React
2025-04-24 03:59:47,381 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:47,381 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~114 / 30000
2025-04-24 03:59:47,381 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:47,382 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:47,382 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:59:47,382 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T04:00:00Z",
    "speaker": "User...
2025-04-24 03:59:48,391 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:59:48,397 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:59:48,404 - api.endpoints.system_messages - INFO - Stored system message sys_ea55aae8-817d-408e-99ba-600221f00a3a in database
2025-04-24 03:59:48,408 - CtxMemMgr_User123 - INFO - Loaded 7 facts from DB for user 123
2025-04-24 03:59:48,409 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:59:48,410 - components.prompt_builder - INFO - Constructing prompt for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123, depth 0
2025-04-24 03:59:48,410 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Where do I live, and what activity do I enjoy on weekends?'
2025-04-24 03:59:48,410 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:59:48,410 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:59:48,410 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:59:48,412 - CtxMemMgr_User123 - INFO - Loaded 7 facts from DB for user 123
2025-04-24 03:59:48,413 - CtxMemMgr_User123 - INFO - Reloaded 7 facts from database for prompt generation
2025-04-24 03:59:48,414 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
2025-04-24 03:59:50,434 - CtxMemMgr_User123 - INFO - Stored turn 443780db-e753-499f-8127-698ec0ed2802 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:50,435 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:50,435 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:50,436 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~128 / 30000
2025-04-24 03:59:50,437 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:50,441 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:50,442 - ActionHandler_User123 - INFO - Processing LLM response for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123
2025-04-24 03:59:50,442 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: deaed4e7-cce1-4271-a4f7-f1237a02395d).
2025-04-24 03:59:50,442 - CtxMemMgr_User123 - INFO - Stored turn eb6b0b3b-0a29-4028-953e-13ef972fc6a7 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:50,442 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:50,443 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:50,443 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~142 / 30000
2025-04-24 03:59:50,443 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:50,446 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:50,447 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:59:50,447 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T04:00:00Z",
    "speaker": "User...
2025-04-24 03:59:51,471 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:59:51,478 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:59:51,488 - api.endpoints.system_messages - INFO - Stored system message sys_996ea6e0-a0d9-4ea8-889c-b476f28faf84 in database
2025-04-24 03:59:51,494 - CtxMemMgr_User123 - INFO - Loaded 7 facts from DB for user 123
2025-04-24 03:59:51,495 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:59:51,496 - components.prompt_builder - INFO - Constructing prompt for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123, depth 0
2025-04-24 03:59:51,497 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'What technologies does my project use?'
2025-04-24 03:59:51,497 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:59:51,499 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:59:51,500 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:59:51,501 - CtxMemMgr_User123 - INFO - Loaded 7 facts from DB for user 123
2025-04-24 03:59:51,502 - CtxMemMgr_User123 - INFO - Reloaded 7 facts from database for prompt generation
2025-04-24 03:59:51,502 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
2025-04-24 03:59:53,630 - CtxMemMgr_User123 - INFO - Stored turn c3784182-69f8-41fe-9373-3330774275c4 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:53,630 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:53,631 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: use
2025-04-24 03:59:53,631 - CtxMemMgr_User123 - INFO - Added project fact to user memory: User is working on a project called use.
2025-04-24 03:59:53,634 - CtxMemMgr_User123 - INFO - Updated remembered_facts in DB for user 123 (8 facts). Pending commit.
2025-04-24 03:59:53,641 - CtxMemMgr_User123 - INFO - Successfully saved 1 new facts to database.
2025-04-24 03:59:53,642 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:53,642 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~151 / 30000
2025-04-24 03:59:53,643 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:53,647 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:53,648 - ActionHandler_User123 - INFO - Processing LLM response for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123
2025-04-24 03:59:53,649 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: deaed4e7-cce1-4271-a4f7-f1237a02395d).
2025-04-24 03:59:53,649 - CtxMemMgr_User123 - INFO - Stored turn e088b44a-4b2d-4d5e-ab33-4dd29e95d6ac for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:53,650 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:53,650 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: use
2025-04-24 03:59:53,650 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:53,651 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~160 / 30000
2025-04-24 03:59:53,651 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:53,655 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:53,655 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:59:53,656 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T04:00:00Z",
    "speaker": "User...
2025-04-24 03:59:54,668 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:59:54,675 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:59:54,687 - api.endpoints.system_messages - INFO - Stored system message sys_45eeb78a-e011-44d2-baeb-0fa0a3122f65 in database
2025-04-24 03:59:54,693 - CtxMemMgr_User123 - INFO - Loaded 8 facts from DB for user 123
2025-04-24 03:59:54,694 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:59:54,695 - components.prompt_builder - INFO - Constructing prompt for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123, depth 0
2025-04-24 03:59:54,695 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I started this project in January 2025 and I want to finish it by December 2025.'
2025-04-24 03:59:54,696 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:59:54,696 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:59:54,701 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:59:54,704 - CtxMemMgr_User123 - INFO - Loaded 8 facts from DB for user 123
2025-04-24 03:59:54,707 - CtxMemMgr_User123 - INFO - Reloaded 8 facts from database for prompt generation
2025-04-24 03:59:54,708 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
2025-04-24 03:59:57,499 - CtxMemMgr_User123 - INFO - Stored turn 71b5681b-1564-4a80-b36e-7d939dd04bef for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:57,499 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:57,499 - CtxMemMgr_User123 - INFO - Rule-based extraction found timeline: January 2025 and I want to finish it by December 2025
2025-04-24 03:59:57,499 - CtxMemMgr_User123 - INFO - Added timeline fact to user memory: User's project timeline involves January 2025 and I want to finish it by December 2025.
2025-04-24 03:59:57,499 - CtxMemMgr_User123 - INFO - Rule-based extraction found timeline: December 2025
2025-04-24 03:59:57,499 - CtxMemMgr_User123 - INFO - Added timeline fact to user memory: User's project timeline involves December 2025.
2025-04-24 03:59:57,501 - CtxMemMgr_User123 - INFO - Updated remembered_facts in DB for user 123 (10 facts). Pending commit.
2025-04-24 03:59:57,503 - CtxMemMgr_User123 - INFO - Successfully saved 1 new facts to database.
2025-04-24 03:59:57,503 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:57,503 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~180 / 30000
2025-04-24 03:59:57,503 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:57,504 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:57,504 - ActionHandler_User123 - INFO - Processing LLM response for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123
2025-04-24 03:59:57,505 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: deaed4e7-cce1-4271-a4f7-f1237a02395d).
2025-04-24 03:59:57,505 - CtxMemMgr_User123 - INFO - Stored turn 89683d14-7f13-46d1-bdcb-cac33ac4dcce for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:57,505 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 03:59:57,505 - CtxMemMgr_User123 - INFO - Rule-based extraction found timeline: January 2025 and I want to finish it by December 2025
2025-04-24 03:59:57,505 - CtxMemMgr_User123 - INFO - Rule-based extraction found timeline: December 2025
2025-04-24 03:59:57,505 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 03:59:57,505 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~200 / 30000
2025-04-24 03:59:57,505 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 03:59:57,506 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 03:59:57,506 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 03:59:57,506 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T03:59:00Z",
    "speaker": "User...
2025-04-24 03:59:58,519 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 03:59:58,526 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 03:59:58,536 - api.endpoints.system_messages - INFO - Stored system message sys_e9d48725-81cc-4f01-a02a-c5b0b6a8d221 in database
2025-04-24 03:59:58,543 - CtxMemMgr_User123 - INFO - Loaded 10 facts from DB for user 123
2025-04-24 03:59:58,543 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 03:59:58,544 - components.prompt_builder - INFO - Constructing prompt for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123, depth 0
2025-04-24 03:59:58,545 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Based on what you know about me, my project, and my timeline, what do you think my biggest challenges will be?'
2025-04-24 03:59:58,548 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 03:59:58,548 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 03:59:58,548 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 03:59:58,552 - CtxMemMgr_User123 - INFO - Loaded 10 facts from DB for user 123
2025-04-24 03:59:58,553 - CtxMemMgr_User123 - INFO - Reloaded 10 facts from database for prompt generation
2025-04-24 03:59:58,555 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
- User's project timeline involves January 2025 and I want to finish it by December 2025.
- User's project timeline involves December 2025.
2025-04-24 04:00:02,322 - CtxMemMgr_User123 - INFO - Stored turn 38042a62-2dcc-4195-a1ce-afe0b59614c6 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 04:00:02,323 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 04:00:02,323 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 04:00:02,323 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~227 / 30000
2025-04-24 04:00:02,324 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 04:00:02,328 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 04:00:02,328 - ActionHandler_User123 - INFO - Processing LLM response for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123
2025-04-24 04:00:02,329 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: deaed4e7-cce1-4271-a4f7-f1237a02395d).
2025-04-24 04:00:02,329 - CtxMemMgr_User123 - INFO - Stored turn 22afff64-a310-4db6-8eb8-bf8b82cfe226 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 04:00:02,329 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 04:00:02,330 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 04:00:02,330 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~254 / 30000
2025-04-24 04:00:02,330 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 04:00:02,333 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 04:00:02,333 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 04:00:02,334 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T04:00:00Z",
    "speaker": "User...
2025-04-24 04:00:03,348 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 04:00:03,355 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 04:00:03,367 - api.endpoints.system_messages - INFO - Stored system message sys_a4876dd6-5679-4232-87f8-1a0a12ae122e in database
2025-04-24 04:00:03,373 - CtxMemMgr_User123 - INFO - Loaded 10 facts from DB for user 123
2025-04-24 04:00:03,374 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 04:00:03,376 - components.prompt_builder - INFO - Constructing prompt for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123, depth 0
2025-04-24 04:00:03,377 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Summarize everything you know about me and my project so far.'
2025-04-24 04:00:03,377 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 04:00:03,377 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 04:00:03,377 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 04:00:03,378 - CtxMemMgr_User123 - INFO - Loaded 10 facts from DB for user 123
2025-04-24 04:00:03,378 - CtxMemMgr_User123 - INFO - Reloaded 10 facts from database for prompt generation
2025-04-24 04:00:03,379 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
- User's project timeline involves January 2025 and I want to finish it by December 2025.
- User's project timeline involves December 2025.
2025-04-24 04:00:06,208 - CtxMemMgr_User123 - INFO - Stored turn 525b66e8-0061-42d7-b003-03b397421c45 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 04:00:06,209 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 04:00:06,210 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: so far
2025-04-24 04:00:06,211 - CtxMemMgr_User123 - INFO - Added project fact to user memory: User is working on a project called so far.
2025-04-24 04:00:06,215 - CtxMemMgr_User123 - INFO - Updated remembered_facts in DB for user 123 (11 facts). Pending commit.
2025-04-24 04:00:06,228 - CtxMemMgr_User123 - INFO - Successfully saved 1 new facts to database.
2025-04-24 04:00:06,229 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 04:00:06,230 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~269 / 30000
2025-04-24 04:00:06,230 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 04:00:06,233 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 04:00:06,233 - ActionHandler_User123 - INFO - Processing LLM response for session deaed4e7-cce1-4271-a4f7-f1237a02395d, user 123
2025-04-24 04:00:06,234 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: deaed4e7-cce1-4271-a4f7-f1237a02395d).
2025-04-24 04:00:06,234 - CtxMemMgr_User123 - INFO - Stored turn f510e51a-4dc1-4380-8e96-a0de7c3be084 for active session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 04:00:06,234 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session deaed4e7-cce1-4271-a4f7-f1237a02395d: '...'
2025-04-24 04:00:06,234 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: so far
2025-04-24 04:00:06,234 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 04:00:06,234 - CtxMemMgr_User123 - INFO - Session deaed4e7-cce1-4271-a4f7-f1237a02395d: Active history token count ~284 / 30000
2025-04-24 04:00:06,234 - CtxMemMgr_User123 - INFO - Saving active session context for deaed4e7-cce1-4271-a4f7-f1237a02395d to /app/data/sessions/123/deaed4e7-cce1-4271-a4f7-f1237a02395d/context.json
2025-04-24 04:00:06,235 - CtxMemMgr_User123 - INFO - Successfully saved context for session deaed4e7-cce1-4271-a4f7-f1237a02395d
2025-04-24 04:00:06,235 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 04:00:06,236 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T04:02:00Z",
    "speaker": "User...
2025-04-24 17:49:42,109 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-24 17:49:42,110 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-24 17:49:42,110 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-24 17:49:42,122 - core.database.connection - INFO - Database connection successful!
2025-04-24 17:49:42,122 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-24 17:49:42,124 - core.database.connection - INFO - Database tables created or already exist.
2025-04-24 17:49:42,128 - core.database.connection - INFO - Default user already exists.
2025-04-24 17:49:42,141 - app - INFO - Auth blueprint registered successfully
2025-04-24 17:49:42,151 - components.action_handler - INFO - Current directory: /app/components
2025-04-24 17:49:42,151 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-24 17:49:42,151 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-24 17:49:42,151 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-24 17:49:42,151 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-24 17:49:42,151 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-24 17:49:42,151 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-24 17:49:42,151 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-24 17:49:42,156 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-24 17:49:42,156 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-24 17:49:42,156 - components.action_handler - INFO - Web search functionality is available
2025-04-24 17:49:42,156 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-24 17:49:42,156 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-24 17:49:42,157 - app - INFO - Chat blueprint registered successfully
2025-04-24 17:49:42,157 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-24 17:49:42,159 - app - INFO - Session blueprint registered successfully
2025-04-24 17:49:42,160 - app - INFO - Memory blueprint registered successfully
2025-04-24 17:49:42,162 - app - INFO - System Messages blueprint registered successfully
2025-04-24 17:49:42,163 - app - INFO - Test Search blueprint registered successfully
2025-04-24 17:49:42,164 - app - INFO - Basic endpoints registered successfully
2025-04-24 17:49:42,166 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-24 18:09:49,623 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 18:09:49,624 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-24 18:09:49,625 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-24 18:09:49,625 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-24 18:09:49,625 - managers.user_session_manager - INFO - Created new session ID: cc5deb7f-8466-431c-b3e4-8be743b689a7 for user: 123
2025-04-24 18:09:49,625 - managers.user_session_manager - INFO - Creating new conversation manager for user: 123, session: cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:49,626 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 18:09:49,627 - EpisodicMemMgr_User123 - INFO - Summary index file not found for user 123. Initialized empty index.
2025-04-24 18:09:49,627 - EpisodicMemMgr_User123 - INFO - EpisodicMemoryManager initialized for user 123. Episodic path: /app/data/123/episodic
2025-04-24 18:09:49,627 - CtxMemMgr_User123 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 18:09:49,631 - CtxMemMgr_User123 - INFO - Loaded 11 facts from DB for user 123
2025-04-24 18:09:49,631 - CtxMemMgr_User123 - INFO - ContextualMemoryManager initialized for user 123.
2025-04-24 18:09:49,632 - components.prompt_builder - INFO - PromptBuilder initialized for user 123
2025-04-24 18:09:49,632 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 18:09:49,632 - components.action_handler - INFO - ActionHandler initialized for user 123
2025-04-24 18:09:49,632 - ConvMgr_User123 - INFO - ConversationManager initialized for User ID: 123, Session ID: cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:49,632 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 18:09:49,632 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 18:09:49,633 - managers.chat_file_manager - INFO - Attempting to save transcript for user 123, session cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/transcript.json
2025-04-24 18:09:49,634 - managers.chat_file_manager - INFO - Transcript file saved successfully: /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/transcript.json
2025-04-24 18:09:49,640 - managers.chat_file_manager - INFO - Session metadata for cc5deb7f-8466-431c-b3e4-8be743b689a7 saved/updated in DB.
2025-04-24 18:09:49,651 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 18:09:49,655 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 18:09:49,658 - api.endpoints.system_messages - INFO - Stored system message sys_58882850-cc36-4027-812e-3bac76632a7f in database
2025-04-24 18:09:49,659 - CtxMemMgr_User123 - INFO - Loaded 11 facts from DB for user 123
2025-04-24 18:09:49,660 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 18:09:49,660 - ConvMgr_User123 - INFO - Direct match extracted: User is working on a project called RAI Chat.
2025-04-24 18:09:49,661 - ConvMgr_User123 - INFO - Pattern match extracted: User's name is Jordan.
2025-04-24 18:09:49,661 - ConvMgr_User123 - INFO - Pattern match extracted: User's name is working.
2025-04-24 18:09:49,662 - ConvMgr_User123 - INFO - Pattern match extracted: User is working on a project called RAI Chat.
2025-04-24 18:09:49,662 - ConvMgr_User123 - INFO - Pattern match extracted: User is working on a project called RAI Chat.
2025-04-24 18:09:49,664 - components.prompt_builder - INFO - Constructing prompt for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123, depth 0
2025-04-24 18:09:49,664 - CtxMemMgr_User123 - WARNING - Cannot get context summary: No active session.
2025-04-24 18:09:49,664 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'My name is Jordan and I'm working on a project called RAI Chat.'
2025-04-24 18:09:49,664 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 18:09:49,664 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 18:09:49,664 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 18:09:49,664 - CtxMemMgr_User123 - WARNING - Cannot get formatted history: No active session.
2025-04-24 18:09:49,665 - CtxMemMgr_User123 - INFO - Loaded 11 facts from DB for user 123
2025-04-24 18:09:49,665 - CtxMemMgr_User123 - INFO - Reloaded 11 facts from database for prompt generation
2025-04-24 18:09:49,665 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
- User's project timeline involves January 2025 and I want to finish it by December 2025.
- User's project timeline involves December 2025.
- User is working on a project called so far.
2025-04-24 18:09:52,400 - CtxMemMgr_User123 - INFO - Loading session cc5deb7f-8466-431c-b3e4-8be743b689a7 for processing assistant message
2025-04-24 18:09:52,401 - CtxMemMgr_User123 - INFO - Loading session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 from /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:09:52,401 - CtxMemMgr_User123 - INFO - Context file /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json not found. Initializing empty context for new session cc5deb7f-8466-431c-b3e4-8be743b689a7.
2025-04-24 18:09:52,402 - CtxMemMgr_User123 - INFO - Stored turn 0588b8a2-a6f5-4237-ae46-71c53ab294d5 for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:52,403 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:09:52,403 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: Jordan
2025-04-24 18:09:52,404 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: working
2025-04-24 18:09:52,407 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: a project called RAI Chat
2025-04-24 18:09:52,410 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:09:52,411 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~15 / 30000
2025-04-24 18:09:52,412 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:09:52,413 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:52,414 - ActionHandler_User123 - INFO - Processing LLM response for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123
2025-04-24 18:09:52,415 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: cc5deb7f-8466-431c-b3e4-8be743b689a7).
2025-04-24 18:09:52,415 - CtxMemMgr_User123 - INFO - Stored turn b9933bc5-02c8-4da9-a71c-893dab2e21b6 for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:52,415 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:09:52,416 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: Jordan
2025-04-24 18:09:52,416 - CtxMemMgr_User123 - INFO - Rule-based extraction found name: working
2025-04-24 18:09:52,416 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: a project called RAI Chat
2025-04-24 18:09:52,417 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:09:52,417 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~30 / 30000
2025-04-24 18:09:52,417 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:09:52,420 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:52,421 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 18:09:52,421 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T18:11:00Z",
    "speaker": "User...
2025-04-24 18:09:53,440 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 18:09:53,451 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 18:09:53,459 - api.endpoints.system_messages - INFO - Stored system message sys_f67aca7c-3c68-4c7c-911f-da5bace6c489 in database
2025-04-24 18:09:53,465 - CtxMemMgr_User123 - INFO - Loaded 11 facts from DB for user 123
2025-04-24 18:09:53,465 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 18:09:53,466 - ConvMgr_User123 - INFO - Direct match extracted: User lives in New York.
2025-04-24 18:09:53,467 - ConvMgr_User123 - INFO - Direct match extracted: User enjoys hiking on weekends.
2025-04-24 18:09:53,467 - ConvMgr_User123 - INFO - Pattern match extracted: User lives in New York and I enjoy hiking on weekends.
2025-04-24 18:09:53,467 - ConvMgr_User123 - INFO - Pattern match extracted: User enjoys hiking.
2025-04-24 18:09:53,467 - ConvMgr_User123 - INFO - Added 2 new facts to contextual memory
2025-04-24 18:09:53,471 - CtxMemMgr_User123 - INFO - Updated remembered_facts in DB for user 123 (13 facts). Pending commit.
2025-04-24 18:09:53,478 - ConvMgr_User123 - INFO - Saved 2 new facts to database
2025-04-24 18:09:53,479 - components.prompt_builder - INFO - Constructing prompt for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123, depth 0
2025-04-24 18:09:53,479 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I live in New York and I enjoy hiking on weekends.'
2025-04-24 18:09:53,479 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 18:09:53,479 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 18:09:53,479 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 18:09:53,480 - CtxMemMgr_User123 - INFO - Loaded 13 facts from DB for user 123
2025-04-24 18:09:53,480 - CtxMemMgr_User123 - INFO - Reloaded 13 facts from database for prompt generation
2025-04-24 18:09:53,481 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
- User's project timeline involves January 2025 and I want to finish it by December 2025.
- User's project timeline involves December 2025.
- User is working on a project called so far.
- User lives in New York.
- User enjoys hiking on weekends.
2025-04-24 18:09:55,951 - CtxMemMgr_User123 - INFO - Stored turn 63a98879-03c1-4bb5-a6eb-cea6ac96ee39 for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:55,954 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:09:55,957 - CtxMemMgr_User123 - INFO - Rule-based extraction found location: New York and I enjoy hiking on weekends
2025-04-24 18:09:55,960 - CtxMemMgr_User123 - INFO - Rule-based extraction found hobby: hiking
2025-04-24 18:09:55,961 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:09:55,964 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~42 / 30000
2025-04-24 18:09:55,965 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:09:55,976 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:55,976 - ActionHandler_User123 - INFO - Processing LLM response for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123
2025-04-24 18:09:55,980 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: cc5deb7f-8466-431c-b3e4-8be743b689a7).
2025-04-24 18:09:55,983 - CtxMemMgr_User123 - INFO - Stored turn a02eb139-331e-40e2-86c0-c0291f9c16c8 for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:55,984 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:09:55,990 - CtxMemMgr_User123 - INFO - Rule-based extraction found location: New York and I enjoy hiking on weekends
2025-04-24 18:09:55,995 - CtxMemMgr_User123 - INFO - Rule-based extraction found hobby: hiking
2025-04-24 18:09:55,998 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:09:56,000 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~54 / 30000
2025-04-24 18:09:56,002 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:09:56,005 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:56,006 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 18:09:56,006 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T18:12:00Z",
    "speaker": "User...
2025-04-24 18:09:57,016 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 18:09:57,022 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 18:09:57,028 - api.endpoints.system_messages - INFO - Stored system message sys_26f1e785-132d-417f-9997-4651caf947fa in database
2025-04-24 18:09:57,032 - CtxMemMgr_User123 - INFO - Loaded 13 facts from DB for user 123
2025-04-24 18:09:57,032 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 18:09:57,033 - components.prompt_builder - INFO - Constructing prompt for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123, depth 0
2025-04-24 18:09:57,033 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'What's my name? And what project am I working on?'
2025-04-24 18:09:57,034 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 18:09:57,034 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 18:09:57,034 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 18:09:57,036 - CtxMemMgr_User123 - INFO - Loaded 13 facts from DB for user 123
2025-04-24 18:09:57,036 - CtxMemMgr_User123 - INFO - Reloaded 13 facts from database for prompt generation
2025-04-24 18:09:57,037 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
- User's project timeline involves January 2025 and I want to finish it by December 2025.
- User's project timeline involves December 2025.
- User is working on a project called so far.
- User lives in New York.
- User enjoys hiking on weekends.
2025-04-24 18:09:59,324 - CtxMemMgr_User123 - INFO - Stored turn 99fe941a-6ac5-48b3-8808-2672e2eb0e29 for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:59,325 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:09:59,325 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:09:59,326 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~66 / 30000
2025-04-24 18:09:59,326 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:09:59,336 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:59,337 - ActionHandler_User123 - INFO - Processing LLM response for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123
2025-04-24 18:09:59,338 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: cc5deb7f-8466-431c-b3e4-8be743b689a7).
2025-04-24 18:09:59,340 - CtxMemMgr_User123 - INFO - Stored turn 3ee52ee8-7bbc-446c-a806-c709e10fd0af for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:59,341 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:09:59,341 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:09:59,341 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~78 / 30000
2025-04-24 18:09:59,345 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:09:59,356 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:09:59,357 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 18:09:59,360 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T18:12:00Z",
    "speaker": "User...
2025-04-24 18:10:00,391 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 18:10:00,400 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 18:10:00,408 - api.endpoints.system_messages - INFO - Stored system message sys_76abcd9d-b512-47e2-aba3-39b91d1172cc in database
2025-04-24 18:10:00,417 - CtxMemMgr_User123 - INFO - Loaded 13 facts from DB for user 123
2025-04-24 18:10:00,418 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 18:10:00,421 - ConvMgr_User123 - INFO - Direct match extracted: User is working on a project called RAI Chat.
2025-04-24 18:10:00,421 - ConvMgr_User123 - INFO - Direct match extracted: RAI Chat uses Flask for the backend.
2025-04-24 18:10:00,421 - ConvMgr_User123 - INFO - Direct match extracted: RAI Chat uses React for the frontend.
2025-04-24 18:10:00,422 - ConvMgr_User123 - INFO - Pattern match extracted: User's project uses Flask for the backend.
2025-04-24 18:10:00,422 - ConvMgr_User123 - INFO - Pattern match extracted: User's project uses React for the frontend.
2025-04-24 18:10:00,422 - ConvMgr_User123 - INFO - Added 4 new facts to contextual memory
2025-04-24 18:10:00,424 - CtxMemMgr_User123 - INFO - Updated remembered_facts in DB for user 123 (17 facts). Pending commit.
2025-04-24 18:10:00,428 - ConvMgr_User123 - INFO - Saved 4 new facts to database
2025-04-24 18:10:00,429 - components.prompt_builder - INFO - Constructing prompt for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123, depth 0
2025-04-24 18:10:00,429 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'The RAI Chat project uses Flask for the backend and React for the frontend.'
2025-04-24 18:10:00,429 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 18:10:00,429 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 18:10:00,429 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 18:10:00,431 - CtxMemMgr_User123 - INFO - Loaded 17 facts from DB for user 123
2025-04-24 18:10:00,431 - CtxMemMgr_User123 - INFO - Reloaded 17 facts from database for prompt generation
2025-04-24 18:10:00,432 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
- User's project timeline involves January 2025 and I want to finish it by December 2025.
- User's project timeline involves December 2025.
- User is working on a project called so far.
- User lives in New York.
- User enjoys hiking on weekends.
- RAI Chat uses Flask for the backend.
- RAI Chat uses React for the frontend.
- User's project uses Flask for the backend.
- User's project uses React for the frontend.
2025-04-24 18:10:02,741 - CtxMemMgr_User123 - INFO - Stored turn 014a27ec-a526-40ba-84dc-f8b5539453bf for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:02,742 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:02,742 - CtxMemMgr_User123 - INFO - Rule-based extraction found tech: Flask for the backend and React
2025-04-24 18:10:02,743 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:02,743 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~96 / 30000
2025-04-24 18:10:02,744 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:02,749 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:02,749 - ActionHandler_User123 - INFO - Processing LLM response for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123
2025-04-24 18:10:02,750 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: cc5deb7f-8466-431c-b3e4-8be743b689a7).
2025-04-24 18:10:02,750 - CtxMemMgr_User123 - INFO - Stored turn 4f2edaed-f060-4180-9abf-8b98fff858af for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:02,751 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:02,751 - CtxMemMgr_User123 - INFO - Rule-based extraction found tech: Flask for the backend and React
2025-04-24 18:10:02,752 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:02,752 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~114 / 30000
2025-04-24 18:10:02,752 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:02,756 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:02,756 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 18:10:02,757 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T18:12:00Z",
    "speaker": "User...
2025-04-24 18:10:03,766 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 18:10:03,771 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 18:10:03,776 - api.endpoints.system_messages - INFO - Stored system message sys_d2018eba-2071-40a4-95cc-f985bf0539d6 in database
2025-04-24 18:10:03,780 - CtxMemMgr_User123 - INFO - Loaded 17 facts from DB for user 123
2025-04-24 18:10:03,780 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 18:10:03,781 - components.prompt_builder - INFO - Constructing prompt for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123, depth 0
2025-04-24 18:10:03,781 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Where do I live, and what activity do I enjoy on weekends?'
2025-04-24 18:10:03,781 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 18:10:03,781 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 18:10:03,782 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 18:10:03,783 - CtxMemMgr_User123 - INFO - Loaded 17 facts from DB for user 123
2025-04-24 18:10:03,783 - CtxMemMgr_User123 - INFO - Reloaded 17 facts from database for prompt generation
2025-04-24 18:10:03,784 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
- User's project timeline involves January 2025 and I want to finish it by December 2025.
- User's project timeline involves December 2025.
- User is working on a project called so far.
- User lives in New York.
- User enjoys hiking on weekends.
- RAI Chat uses Flask for the backend.
- RAI Chat uses React for the frontend.
- User's project uses Flask for the backend.
- User's project uses React for the frontend.
2025-04-24 18:10:05,982 - CtxMemMgr_User123 - INFO - Stored turn f6f14397-1fc1-4e24-834f-7ae58121d676 for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:05,983 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:05,983 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:05,984 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~128 / 30000
2025-04-24 18:10:05,984 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:05,990 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:05,990 - ActionHandler_User123 - INFO - Processing LLM response for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123
2025-04-24 18:10:05,991 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: cc5deb7f-8466-431c-b3e4-8be743b689a7).
2025-04-24 18:10:05,991 - CtxMemMgr_User123 - INFO - Stored turn b38472f1-17bc-40a0-9576-b0fc9befeb4b for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:05,992 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:05,992 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:05,993 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~142 / 30000
2025-04-24 18:10:05,993 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:05,998 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:06,001 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 18:10:06,003 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T18:12:00Z",
    "speaker": "User...
2025-04-24 18:10:07,022 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 18:10:07,034 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 18:10:07,055 - api.endpoints.system_messages - INFO - Stored system message sys_59d0f3d3-7ffc-48d6-9c1c-45e81a68b48f in database
2025-04-24 18:10:07,067 - CtxMemMgr_User123 - INFO - Loaded 17 facts from DB for user 123
2025-04-24 18:10:07,068 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 18:10:07,069 - components.prompt_builder - INFO - Constructing prompt for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123, depth 0
2025-04-24 18:10:07,069 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'What technologies does my project use?'
2025-04-24 18:10:07,069 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 18:10:07,069 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 18:10:07,069 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 18:10:07,071 - CtxMemMgr_User123 - INFO - Loaded 17 facts from DB for user 123
2025-04-24 18:10:07,073 - CtxMemMgr_User123 - INFO - Reloaded 17 facts from database for prompt generation
2025-04-24 18:10:07,073 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
- User's project timeline involves January 2025 and I want to finish it by December 2025.
- User's project timeline involves December 2025.
- User is working on a project called so far.
- User lives in New York.
- User enjoys hiking on weekends.
- RAI Chat uses Flask for the backend.
- RAI Chat uses React for the frontend.
- User's project uses Flask for the backend.
- User's project uses React for the frontend.
2025-04-24 18:10:09,622 - CtxMemMgr_User123 - INFO - Stored turn 90517920-278c-40e9-98de-0759d18fc26e for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:09,622 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:09,623 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: use
2025-04-24 18:10:09,623 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:09,624 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~151 / 30000
2025-04-24 18:10:09,624 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:09,629 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:09,629 - ActionHandler_User123 - INFO - Processing LLM response for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123
2025-04-24 18:10:09,631 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: cc5deb7f-8466-431c-b3e4-8be743b689a7).
2025-04-24 18:10:09,631 - CtxMemMgr_User123 - INFO - Stored turn e788c5c6-ad40-4175-8793-649e5165844e for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:09,632 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:09,632 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: use
2025-04-24 18:10:09,633 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:09,633 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~160 / 30000
2025-04-24 18:10:09,634 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:09,639 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:09,639 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 18:10:09,640 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T18:12:00Z",
    "speaker": "User...
2025-04-24 18:10:10,645 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 18:10:10,653 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 18:10:10,660 - api.endpoints.system_messages - INFO - Stored system message sys_17ba6869-748e-4f0b-aecc-c07366b1f60b in database
2025-04-24 18:10:10,665 - CtxMemMgr_User123 - INFO - Loaded 17 facts from DB for user 123
2025-04-24 18:10:10,666 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 18:10:10,667 - ConvMgr_User123 - INFO - Direct match extracted: User started the project in January 2025.
2025-04-24 18:10:10,667 - ConvMgr_User123 - INFO - Direct match extracted: User plans to finish the project by December 2025.
2025-04-24 18:10:10,668 - ConvMgr_User123 - INFO - Pattern match extracted: User's project timeline includes December 2025.
2025-04-24 18:10:10,668 - ConvMgr_User123 - INFO - Added 3 new facts to contextual memory
2025-04-24 18:10:10,670 - CtxMemMgr_User123 - INFO - Updated remembered_facts in DB for user 123 (20 facts). Pending commit.
2025-04-24 18:10:10,675 - ConvMgr_User123 - INFO - Saved 3 new facts to database
2025-04-24 18:10:10,675 - components.prompt_builder - INFO - Constructing prompt for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123, depth 0
2025-04-24 18:10:10,675 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'I started this project in January 2025 and I want to finish it by December 2025.'
2025-04-24 18:10:10,675 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 18:10:10,676 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 18:10:10,676 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 18:10:10,677 - CtxMemMgr_User123 - INFO - Loaded 20 facts from DB for user 123
2025-04-24 18:10:10,677 - CtxMemMgr_User123 - INFO - Reloaded 20 facts from database for prompt generation
2025-04-24 18:10:10,677 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
- User's project timeline involves January 2025 and I want to finish it by December 2025.
- User's project timeline involves December 2025.
- User is working on a project called so far.
- User lives in New York.
- User enjoys hiking on weekends.
- RAI Chat uses Flask for the backend.
- RAI Chat uses React for the frontend.
- User's project uses Flask for the backend.
- User's project uses React for the frontend.
- User started the project in January 2025.
- User plans to finish the project by December 2025.
- User's project timeline includes December 2025.
2025-04-24 18:10:13,297 - CtxMemMgr_User123 - INFO - Stored turn 9903c79d-df81-476b-afb7-64573d7aa827 for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:13,297 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:13,298 - CtxMemMgr_User123 - INFO - Rule-based extraction found timeline: January 2025 and I want to finish it by December 2025
2025-04-24 18:10:13,298 - CtxMemMgr_User123 - INFO - Rule-based extraction found timeline: December 2025
2025-04-24 18:10:13,298 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:13,299 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~180 / 30000
2025-04-24 18:10:13,299 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:13,303 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:13,304 - ActionHandler_User123 - INFO - Processing LLM response for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123
2025-04-24 18:10:13,304 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: cc5deb7f-8466-431c-b3e4-8be743b689a7).
2025-04-24 18:10:13,305 - CtxMemMgr_User123 - INFO - Stored turn eb1268d1-3898-480a-ac69-e41644f18b93 for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:13,305 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:13,305 - CtxMemMgr_User123 - INFO - Rule-based extraction found timeline: January 2025 and I want to finish it by December 2025
2025-04-24 18:10:13,306 - CtxMemMgr_User123 - INFO - Rule-based extraction found timeline: December 2025
2025-04-24 18:10:13,306 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:13,306 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~200 / 30000
2025-04-24 18:10:13,307 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:13,310 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:13,310 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 18:10:13,311 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-26T18:12:00Z",
    "speaker": "User...
2025-04-24 18:10:14,323 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 18:10:14,329 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 18:10:14,336 - api.endpoints.system_messages - INFO - Stored system message sys_c5d44679-f5ba-4ac2-938b-7b2e51ecd63d in database
2025-04-24 18:10:14,340 - CtxMemMgr_User123 - INFO - Loaded 20 facts from DB for user 123
2025-04-24 18:10:14,341 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 18:10:14,342 - components.prompt_builder - INFO - Constructing prompt for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123, depth 0
2025-04-24 18:10:14,342 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Based on what you know about me, my project, and my timeline, what do you think my biggest challenges will be?'
2025-04-24 18:10:14,342 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 18:10:14,342 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 18:10:14,342 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 18:10:14,344 - CtxMemMgr_User123 - INFO - Loaded 20 facts from DB for user 123
2025-04-24 18:10:14,344 - CtxMemMgr_User123 - INFO - Reloaded 20 facts from database for prompt generation
2025-04-24 18:10:14,344 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
- User's project timeline involves January 2025 and I want to finish it by December 2025.
- User's project timeline involves December 2025.
- User is working on a project called so far.
- User lives in New York.
- User enjoys hiking on weekends.
- RAI Chat uses Flask for the backend.
- RAI Chat uses React for the frontend.
- User's project uses Flask for the backend.
- User's project uses React for the frontend.
- User started the project in January 2025.
- User plans to finish the project by December 2025.
- User's project timeline includes December 2025.
2025-04-24 18:10:18,207 - CtxMemMgr_User123 - INFO - Stored turn 7a5916f3-bce3-4b8b-9a7e-fcd96b720156 for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:18,207 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:18,208 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:18,208 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~227 / 30000
2025-04-24 18:10:18,208 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:18,211 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:18,211 - ActionHandler_User123 - INFO - Processing LLM response for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123
2025-04-24 18:10:18,212 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: cc5deb7f-8466-431c-b3e4-8be743b689a7).
2025-04-24 18:10:18,212 - CtxMemMgr_User123 - INFO - Stored turn 08ad31f9-1052-447c-8142-f41b9bc2eafd for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:18,212 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:18,212 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:18,213 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~254 / 30000
2025-04-24 18:10:18,213 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:18,216 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:18,216 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 18:10:18,217 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T18:12:00Z",
    "speaker": "User...
2025-04-24 18:10:19,230 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser123 (ID: 123)
2025-04-24 18:10:19,237 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 18:10:19,247 - api.endpoints.system_messages - INFO - Stored system message sys_9d009c74-26a6-40d3-96a2-8536984a1891 in database
2025-04-24 18:10:19,251 - CtxMemMgr_User123 - INFO - Loaded 20 facts from DB for user 123
2025-04-24 18:10:19,252 - ConvMgr_User123 - INFO - Loaded remembered facts from database for user 123
2025-04-24 18:10:19,252 - components.prompt_builder - INFO - Constructing prompt for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123, depth 0
2025-04-24 18:10:19,253 - EpisodicMemMgr_User123 - INFO - Searching all episodic summaries for user 123, query: 'Summarize everything you know about me and my project so far.'
2025-04-24 18:10:19,253 - EpisodicMemMgr_User123 - INFO - No relevant summaries found across all sessions for user 123.
2025-04-24 18:10:19,253 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 18:10:19,254 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 18:10:19,255 - CtxMemMgr_User123 - INFO - Loaded 20 facts from DB for user 123
2025-04-24 18:10:19,255 - CtxMemMgr_User123 - INFO - Reloaded 20 facts from database for prompt generation
2025-04-24 18:10:19,257 - CtxMemMgr_User123 - INFO - Returning formatted facts for prompt: - User's name is Jordan.
- User's name is working.
- User is working on a project called a project called RAI Chat.
- User is working on a project called RAI Chat.
- User lives in New York and I enjoy hiking on weekends.
- User enjoys hiking.
- User's project uses Flask for the backend and React.
- User is working on a project called use.
- User's project timeline involves January 2025 and I want to finish it by December 2025.
- User's project timeline involves December 2025.
- User is working on a project called so far.
- User lives in New York.
- User enjoys hiking on weekends.
- RAI Chat uses Flask for the backend.
- RAI Chat uses React for the frontend.
- User's project uses Flask for the backend.
- User's project uses React for the frontend.
- User started the project in January 2025.
- User plans to finish the project by December 2025.
- User's project timeline includes December 2025.
2025-04-24 18:10:21,926 - CtxMemMgr_User123 - INFO - Stored turn b5dbd860-6882-4c15-8ce3-0c58b6d9f601 for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:21,927 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:21,927 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: so far
2025-04-24 18:10:21,928 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:21,928 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~269 / 30000
2025-04-24 18:10:21,929 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:21,932 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:21,932 - ActionHandler_User123 - INFO - Processing LLM response for session cc5deb7f-8466-431c-b3e4-8be743b689a7, user 123
2025-04-24 18:10:21,933 - ActionHandler_User123 - INFO - No signals detected. Processing as normal answer (Session: cc5deb7f-8466-431c-b3e4-8be743b689a7).
2025-04-24 18:10:21,933 - CtxMemMgr_User123 - INFO - Stored turn 6d0c56a8-7559-4d61-a67d-03a36395749f for active session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:21,933 - CtxMemMgr_User123 - INFO - Updated current_context_summary for session cc5deb7f-8466-431c-b3e4-8be743b689a7: '...'
2025-04-24 18:10:21,933 - CtxMemMgr_User123 - INFO - Rule-based extraction found project: so far
2025-04-24 18:10:21,933 - CtxMemMgr_User123 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 18:10:21,934 - CtxMemMgr_User123 - INFO - Session cc5deb7f-8466-431c-b3e4-8be743b689a7: Active history token count ~284 / 30000
2025-04-24 18:10:21,934 - CtxMemMgr_User123 - INFO - Saving active session context for cc5deb7f-8466-431c-b3e4-8be743b689a7 to /app/data/sessions/123/cc5deb7f-8466-431c-b3e4-8be743b689a7/context.json
2025-04-24 18:10:21,937 - CtxMemMgr_User123 - INFO - Successfully saved context for session cc5deb7f-8466-431c-b3e4-8be743b689a7
2025-04-24 18:10:21,937 - ActionHandler_User123 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 18:10:21,937 - ActionHandler_User123 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T18:12:00Z",
    "speaker": "User...
2025-04-24 20:52:55,995 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:52:55,997 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:52:55,998 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 20:52:55,998 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 20:52:55,999 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 20:52:56,005 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:52:56,006 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 20:52:56,006 - components.prompt_builder - INFO - PromptBuilder initialized for user 5
2025-04-24 20:52:56,007 - components.action_handler - INFO - ActionHandler initialized for user 5
2025-04-24 20:52:56,007 - components.action_handler - INFO - ActionHandler initialized for user 5
2025-04-24 20:52:56,007 - ConvMgr_User5 - INFO - ConversationManager initialized for User ID: 5, Session ID: 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:52:56,007 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 20:52:56,007 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 20:52:56,013 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:52:56,020 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_fc923de3-8e8c-4ed0-af85-81a77cf0ac2c', 'timestamp': '2025-04-24T20:52:56.014031', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:52:56.008287"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:52:56,024 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:52:56,024 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:52:56,025 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:52:56,026 - CtxMemMgr_User5 - WARNING - Cannot get context summary: No active session.
2025-04-24 20:52:56,026 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 1: I want to tell you a fact about my favorite color. My favorite color is cerulean blue. Please remember this specific fact.'
2025-04-24 20:52:56,026 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:52:56,027 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:52:56,027 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:52:56,027 - CtxMemMgr_User5 - WARNING - Cannot get formatted history: No active session.
2025-04-24 20:52:56,029 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:52:56,029 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:52:58,446 - CtxMemMgr_User5 - INFO - Loading session 0ead83b0-6f78-418e-8159-68f6210d9791 for processing assistant message
2025-04-24 20:52:58,447 - CtxMemMgr_User5 - INFO - Loading session context for 0ead83b0-6f78-418e-8159-68f6210d9791 from /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:52:58,449 - CtxMemMgr_User5 - INFO - Context file /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json not found. Initializing empty context for new session 0ead83b0-6f78-418e-8159-68f6210d9791.
2025-04-24 20:52:58,450 - CtxMemMgr_User5 - INFO - Stored turn fec08a28-9fc3-4297-a553-d7fc7c6f665b for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:52:58,451 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:52:58,451 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:52:58,451 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~32 / 30000
2025-04-24 20:52:58,452 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:52:58,457 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:52:58,458 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:52:58,459 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:52:58,460 - CtxMemMgr_User5 - INFO - Stored turn 649054dd-63ae-4540-a8b1-84f9db6b61bb for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:52:58,461 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:52:58,461 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:52:58,462 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~64 / 30000
2025-04-24 20:52:58,462 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:52:58,470 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:52:58,471 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:52:58,472 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:52:59,509 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:52:59,519 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:52:59,523 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_a5d807d7-82f5-4d7b-8a25-ab3f68d0408e', 'timestamp': '2025-04-24T20:52:59.519634', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:52:59.512045"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:52:59,525 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:52:59,526 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:52:59,526 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:52:59,526 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 2: I want to tell you a fact about my birthday. My birthday is March 15. Please remember this specific fact.'
2025-04-24 20:52:59,527 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:52:59,527 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:52:59,527 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:52:59,528 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:52:59,528 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:01,995 - CtxMemMgr_User5 - INFO - Stored turn fac9f111-fb56-4b13-aa6e-d750046be11c for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:01,996 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:01,996 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:01,997 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~92 / 30000
2025-04-24 20:53:01,997 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:02,000 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:02,001 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:02,001 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:02,001 - CtxMemMgr_User5 - INFO - Stored turn 79f9f4dd-2c32-4f55-928f-b1ec2be5a87b for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:02,001 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:02,002 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:02,002 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~120 / 30000
2025-04-24 20:53:02,003 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:02,005 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:02,005 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:02,006 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:03,022 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:03,028 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:03,036 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_b0462694-b2c6-492b-b938-c442c12490e0', 'timestamp': '2025-04-24T20:53:03.029267', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:03.023508"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:03,044 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:03,045 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:03,047 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:03,047 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 3: I want to tell you a fact about my pet. My pet is a golden retriever named Max. Please remember this specific fact.'
2025-04-24 20:53:03,048 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:03,048 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:03,048 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:03,050 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:03,050 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:05,084 - CtxMemMgr_User5 - INFO - Stored turn 859d6057-ec70-4958-96f1-8e8d7b57a2a4 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:05,084 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:05,085 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:05,086 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~150 / 30000
2025-04-24 20:53:05,086 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:05,089 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:05,089 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:05,090 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:05,090 - CtxMemMgr_User5 - INFO - Stored turn 600ace61-839b-456a-8b45-87b4dae6e4f7 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:05,091 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:05,091 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:05,091 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~180 / 30000
2025-04-24 20:53:05,092 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:05,094 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:05,095 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:05,095 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:53:00Z",
    "speaker": "User...
2025-04-24 20:53:06,113 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:06,121 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:06,129 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_05710a52-c884-4745-9d86-aa629d03036c', 'timestamp': '2025-04-24T20:53:06.122642', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:06.114490"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:06,134 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:06,135 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:06,136 - ConvMgr_User5 - INFO - Pattern match extracted: User enjoys collecting vintage postcards.
2025-04-24 20:53:06,136 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:53:06,138 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:53:06,139 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:53:06,140 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:06,140 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 4: I want to tell you a fact about my hobby. My hobby is collecting vintage postcards. Please remember this specific fact.'
2025-04-24 20:53:06,140 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:06,141 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:06,141 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:06,143 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:06,143 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:08,613 - CtxMemMgr_User5 - INFO - Stored turn 9e1a8907-9a8a-43fd-a7e6-f855f7f1d8a7 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:08,614 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:08,614 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 20:53:08,614 - CtxMemMgr_User5 - INFO - Added hobby fact to user memory: User enjoys collecting vintage postcards.
2025-04-24 20:53:08,617 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:53:08,618 - CtxMemMgr_User5 - INFO - Successfully saved 1 new facts to database.
2025-04-24 20:53:08,618 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:08,619 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~211 / 30000
2025-04-24 20:53:08,619 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:08,621 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:08,622 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:08,622 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:08,622 - CtxMemMgr_User5 - INFO - Stored turn 00c7d12a-fea8-4189-97ef-d35e6cac7a5e for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:08,622 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:08,623 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 20:53:08,623 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:08,624 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~242 / 30000
2025-04-24 20:53:08,624 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:08,627 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:08,627 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:08,627 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:09,644 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:09,650 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:09,668 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_b32f87a0-a645-4b71-b9ce-6daeced3f0a7', 'timestamp': '2025-04-24T20:53:09.655001', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:09.645331"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:09,673 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:09,674 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:09,675 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:09,675 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 5: I want to tell you a fact about my hometown. My hometown is Springfield, Illinois. Please remember this specific fact.'
2025-04-24 20:53:09,675 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:09,675 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:09,676 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:09,678 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:09,678 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:12,399 - CtxMemMgr_User5 - INFO - Stored turn 50cf8d1a-0112-46b0-b2d9-107e44ddac57 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:12,400 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:12,400 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:12,401 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~273 / 30000
2025-04-24 20:53:12,401 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:12,404 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:12,404 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:12,405 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:12,405 - CtxMemMgr_User5 - INFO - Stored turn f2a701bd-e80c-42a6-8e5e-18e991bfc421 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:12,406 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:12,406 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:12,406 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~304 / 30000
2025-04-24 20:53:12,406 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:12,409 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:12,409 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:12,410 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:13,434 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:13,440 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:13,445 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_8361ab62-e26b-4c2c-a735-6a751af03414', 'timestamp': '2025-04-24T20:53:13.440959', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:13.435152"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:13,449 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:13,449 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:13,450 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:13,451 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 6: I want to tell you a fact about my favorite food. My favorite food is spicy Thai curry. Please remember this specific fact.'
2025-04-24 20:53:13,451 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:13,451 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:13,451 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:13,453 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:13,453 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:16,025 - CtxMemMgr_User5 - INFO - Stored turn 4c6463fb-5281-4e4e-adce-230cb7c83b53 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:16,026 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:16,026 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:16,027 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~336 / 30000
2025-04-24 20:53:16,027 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:16,030 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:16,030 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:16,031 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:16,031 - CtxMemMgr_User5 - INFO - Stored turn ec7a8559-c83a-4461-b94d-540b1d3fab16 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:16,031 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:16,032 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:16,032 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~368 / 30000
2025-04-24 20:53:16,032 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:16,034 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:16,034 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:16,035 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:17,054 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:17,064 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:17,070 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_7f9a2ff3-0650-4249-aba8-e97098e994c8', 'timestamp': '2025-04-24T20:53:17.065107', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:17.056246"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:17,076 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:17,076 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:17,077 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:17,078 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 7: I want to tell you a fact about my first job. My first job is lifeguard at the community pool. Please remember this specific fact.'
2025-04-24 20:53:17,078 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:17,078 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:17,078 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:17,081 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:17,081 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:19,474 - CtxMemMgr_User5 - INFO - Stored turn 0a23913e-a489-4468-b395-7bde0a0d1cc3 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:19,475 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:19,475 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:19,475 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~402 / 30000
2025-04-24 20:53:19,476 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:19,479 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:19,479 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:19,480 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:19,480 - CtxMemMgr_User5 - INFO - Stored turn 6766c0b7-ca49-4fa6-81c7-c0e568c0b97a for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:19,481 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:19,481 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:19,481 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~436 / 30000
2025-04-24 20:53:19,482 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:19,485 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:19,485 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:19,486 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:20,513 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:20,520 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:20,526 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_dcccd227-a7b4-4cbd-adc2-bd2544e45500', 'timestamp': '2025-04-24T20:53:20.520661', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:20.514708"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:20,531 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:20,532 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:20,533 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:20,533 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 8: I want to tell you a fact about my dream vacation. My dream vacation is touring the ancient temples of Japan. Please remember this specific fact.'
2025-04-24 20:53:20,533 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:20,534 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:20,534 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:20,536 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:20,536 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:23,116 - CtxMemMgr_User5 - INFO - Stored turn 103298fd-ca81-4eab-8ab5-67688035d4eb for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:23,116 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:23,116 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:23,116 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~474 / 30000
2025-04-24 20:53:23,117 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:23,121 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:23,121 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:23,122 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:23,122 - CtxMemMgr_User5 - INFO - Stored turn 4d84baae-203d-4428-ac38-1ab815f669e1 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:23,122 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:23,122 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:23,123 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~512 / 30000
2025-04-24 20:53:23,123 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:23,126 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:23,126 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:23,126 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:24,137 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:24,143 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:24,149 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_c92217f5-a9dd-4e90-b9c0-5996aa60eacb', 'timestamp': '2025-04-24T20:53:24.144191', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:24.138421"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:24,153 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:24,153 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:24,154 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:24,155 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 9: I want to tell you a fact about my best friend. My best friend is Jamie, who they've known since kindergarten. Please remember this specific fact.'
2025-04-24 20:53:24,155 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:24,156 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:24,156 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:24,157 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:24,157 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:26,775 - CtxMemMgr_User5 - INFO - Stored turn f71f1818-7f47-452c-8fba-67cdb776c26a for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:26,775 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:26,776 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:26,776 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~550 / 30000
2025-04-24 20:53:26,776 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:26,780 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:26,780 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:26,781 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:26,781 - CtxMemMgr_User5 - INFO - Stored turn 0c466ff5-d271-49c4-b6ff-8c55bfa2da33 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:26,781 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:26,782 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:26,782 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~588 / 30000
2025-04-24 20:53:26,782 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:26,785 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:26,786 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:26,786 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:27,810 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:27,817 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:27,824 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_c3dad692-0eb4-4391-8eb5-50faf3571270', 'timestamp': '2025-04-24T20:53:27.817829', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:27.812469"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:27,828 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:27,829 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:27,830 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:27,830 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 10: I want to tell you a fact about my lucky number. My lucky number is seventeen. Please remember this specific fact.'
2025-04-24 20:53:27,831 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:27,831 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:27,831 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:27,833 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:27,833 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:30,153 - CtxMemMgr_User5 - INFO - Stored turn 0b3cbc1c-0289-467a-a786-b86bf7b12ad1 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:30,153 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:30,154 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:30,154 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~618 / 30000
2025-04-24 20:53:30,155 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:30,159 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:30,160 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:30,160 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:30,160 - CtxMemMgr_User5 - INFO - Stored turn 78baf1ba-50ab-43e9-a701-fadbd3658a4a for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:30,161 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:30,161 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:30,162 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~648 / 30000
2025-04-24 20:53:30,162 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:30,165 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:30,165 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:30,166 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:31,176 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:31,182 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:31,188 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_d2a0651f-b765-4ef8-a7b8-20ea293db301', 'timestamp': '2025-04-24T20:53:31.183506', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:31.177327"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:31,192 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:31,193 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:31,194 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:31,194 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 11: I want to tell you a fact about my college major. My college major is Environmental Science. Please remember this specific fact.'
2025-04-24 20:53:31,195 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:31,195 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:31,195 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:31,196 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:31,197 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:33,433 - CtxMemMgr_User5 - INFO - Stored turn 4822f4ed-81cd-4344-a1be-8d83462f82b1 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:33,434 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:33,434 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:33,435 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~682 / 30000
2025-04-24 20:53:33,435 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:33,441 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:33,442 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:33,442 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:33,442 - CtxMemMgr_User5 - INFO - Stored turn 62f4e469-b56d-41a4-a7ed-2c95f768b809 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:33,443 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:33,443 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:33,443 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~716 / 30000
2025-04-24 20:53:33,444 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:33,447 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:33,447 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:33,448 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:34,471 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:34,477 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:34,483 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_e9ac6b82-3358-41e4-8f61-d2d27148c3c7', 'timestamp': '2025-04-24T20:53:34.477478', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:34.472916"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:34,487 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:34,487 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:34,490 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses book for the Name.
2025-04-24 20:53:34,490 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:53:34,491 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:53:34,492 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:53:34,492 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:34,493 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 12: I want to tell you a fact about my favorite book. My favorite book is The Name of the Wind. Please remember this specific fact.'
2025-04-24 20:53:34,493 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:34,493 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:34,493 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:34,495 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:34,495 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:36,917 - CtxMemMgr_User5 - INFO - Stored turn 7ca17984-a216-413d-b1a2-7fb7da5603ab for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:36,917 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:36,918 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:36,918 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~750 / 30000
2025-04-24 20:53:36,919 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:36,925 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:36,925 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:36,926 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:36,926 - CtxMemMgr_User5 - INFO - Stored turn 0ce4057d-d017-414a-9153-580417f94ad9 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:36,926 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:36,926 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:36,926 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~784 / 30000
2025-04-24 20:53:36,927 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:36,930 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:36,930 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:36,931 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:37,947 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:37,952 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:37,959 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_79961dc8-58e9-4793-b045-c8206c7c843c', 'timestamp': '2025-04-24T20:53:37.953019', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:37.948398"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:37,963 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:37,963 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:37,964 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses movie for the Shawshank.
2025-04-24 20:53:37,965 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:53:37,966 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:53:37,967 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:53:37,967 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:37,968 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 13: I want to tell you a fact about my favorite movie. My favorite movie is The Shawshank Redemption. Please remember this specific fact.'
2025-04-24 20:53:37,968 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:37,968 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:37,968 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:37,970 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:37,970 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:40,799 - CtxMemMgr_User5 - INFO - Stored turn 6c9f8a61-8314-4561-9d1e-8562e5573058 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:40,799 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:40,800 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:40,800 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~819 / 30000
2025-04-24 20:53:40,801 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:40,805 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:40,806 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:40,806 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:40,806 - CtxMemMgr_User5 - INFO - Stored turn 026696e8-b2dc-4eb8-8ece-b00e2eef9389 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:40,806 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:40,807 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:40,807 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~854 / 30000
2025-04-24 20:53:40,807 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:40,811 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:40,811 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:40,812 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:53:00Z",
    "speaker": "User...
2025-04-24 20:53:41,828 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:41,835 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:41,841 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_63ac03b9-f041-4ee2-99b8-1bbec827335b', 'timestamp': '2025-04-24T20:53:41.836311', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:41.830056"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:41,845 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:41,846 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:41,847 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:41,847 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 14: I want to tell you a fact about my career goal. My career goal is to start a sustainable technology company. Please remember this specific fact.'
2025-04-24 20:53:41,847 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:41,847 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:41,848 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:41,849 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:41,849 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:44,286 - CtxMemMgr_User5 - INFO - Stored turn 570198fc-a47f-4f65-89b8-09fbcb856365 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:44,286 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:44,287 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:44,287 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~892 / 30000
2025-04-24 20:53:44,288 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:44,294 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:44,294 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:44,295 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:44,295 - CtxMemMgr_User5 - INFO - Stored turn 9fd6af05-e7c5-40ec-bf27-851780fa28a2 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:44,295 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:44,296 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:44,296 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~930 / 30000
2025-04-24 20:53:44,296 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:44,301 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:44,302 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:44,303 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:53:00Z",
    "speaker": "User...
2025-04-24 20:53:45,334 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:45,343 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:45,349 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_c77adff9-0113-44ea-91cc-eeae24de2d77', 'timestamp': '2025-04-24T20:53:45.344285', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:45.337310"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:45,353 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:45,354 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:45,356 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:45,356 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 15: I want to tell you a fact about my biggest fear. My biggest fear is public speaking. Please remember this specific fact.'
2025-04-24 20:53:45,356 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:45,356 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:45,357 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:45,358 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:45,359 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:48,073 - CtxMemMgr_User5 - INFO - Stored turn 9a5a4440-0df6-49c2-b133-0d16197d8845 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:48,074 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:48,074 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:48,075 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~962 / 30000
2025-04-24 20:53:48,075 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:48,080 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:48,080 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:48,081 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:48,081 - CtxMemMgr_User5 - INFO - Stored turn f792b80f-0c61-4186-9c38-c71beb20398c for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:48,082 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:48,082 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:48,082 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~994 / 30000
2025-04-24 20:53:48,082 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:48,086 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:48,086 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:48,088 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:49,106 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:49,112 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:49,116 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_b8cad72e-98e8-47f3-bf95-b30251d83122', 'timestamp': '2025-04-24T20:53:49.112829', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:49.107016"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:49,121 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:49,121 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:49,122 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:49,123 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 16: I want to tell you a fact about my favorite season. My favorite season is autumn when the leaves change. Please remember this specific fact.'
2025-04-24 20:53:49,123 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:49,123 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:49,123 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:49,125 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:49,125 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:51,269 - CtxMemMgr_User5 - INFO - Stored turn 83978956-94d9-4de1-a779-42a4b16f02d1 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:51,269 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:51,271 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:51,271 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1031 / 30000
2025-04-24 20:53:51,271 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:51,275 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:51,275 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:51,276 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:51,276 - CtxMemMgr_User5 - INFO - Stored turn 245c9165-0e31-4805-9b40-62f374864c56 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:51,276 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:51,277 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:51,277 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1068 / 30000
2025-04-24 20:53:51,278 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:51,281 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:51,281 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:51,281 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:53:52,301 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:52,308 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:52,313 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_e5db816b-d2a6-4df6-849b-7f854b058fb6', 'timestamp': '2025-04-24T20:53:52.308820', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:52.302428"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:52,318 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:52,318 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:52,319 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:52,319 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 17: I want to tell you a fact about my allergies. My allergies is peanuts and bee stings. Please remember this specific fact.'
2025-04-24 20:53:52,320 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:52,320 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:52,320 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:52,322 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:52,322 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:54,514 - CtxMemMgr_User5 - INFO - Stored turn 88252714-1543-4d14-9a83-4c5f11be3013 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:54,515 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:54,515 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:54,516 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1100 / 30000
2025-04-24 20:53:54,516 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:54,524 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:54,524 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:54,525 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:54,525 - CtxMemMgr_User5 - INFO - Stored turn 01968f79-6275-454a-ae77-145e03466433 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:54,525 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:54,526 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:54,526 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1132 / 30000
2025-04-24 20:53:54,526 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:54,533 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:54,533 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:54,534 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:53:00Z",
    "speaker": "User...
2025-04-24 20:53:55,549 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:55,559 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:55,567 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_7cdf856b-b503-415d-a18a-3774a903bb64', 'timestamp': '2025-04-24T20:53:55.560649', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:55.550821"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:55,573 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:55,574 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:55,575 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:55,576 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 18: I want to tell you a fact about my hidden talent. My hidden talent is can solve a Rubik's cube in under 2 minutes. Please remember this specific fact.'
2025-04-24 20:53:55,576 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:55,576 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:55,577 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:55,579 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:55,580 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:53:58,109 - CtxMemMgr_User5 - INFO - Stored turn 83a76d57-49e3-4e71-aba5-1225ea1bc4d2 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:58,110 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:58,111 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:58,111 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1171 / 30000
2025-04-24 20:53:58,112 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:58,119 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:58,119 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:53:58,120 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:53:58,120 - CtxMemMgr_User5 - INFO - Stored turn 83dd62c5-58b9-4a38-95fc-a8074bedea1b for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:58,120 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:53:58,121 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:53:58,121 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1210 / 30000
2025-04-24 20:53:58,122 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:53:58,125 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:53:58,125 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:53:58,126 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:53:00Z",
    "speaker": "User...
2025-04-24 20:53:59,141 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:59,149 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:53:59,154 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_ec925388-ff29-4eb5-bdc7-9088e83286c6', 'timestamp': '2025-04-24T20:53:59.150373', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:53:59.144203"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:53:59,157 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:59,158 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:53:59,159 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:53:59,159 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 19: I want to tell you a fact about my role model. My role model is their grandfather who was an inventor. Please remember this specific fact.'
2025-04-24 20:53:59,159 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:53:59,159 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:53:59,159 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:53:59,161 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:53:59,161 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:01,582 - CtxMemMgr_User5 - INFO - Stored turn 521e0684-d1aa-4ae8-94fc-489aec231bf5 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:01,583 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:01,584 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:01,584 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1246 / 30000
2025-04-24 20:54:01,585 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:01,592 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:01,592 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:01,593 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:01,593 - CtxMemMgr_User5 - INFO - Stored turn c7b8a947-97e0-43b5-b862-fe456963f8aa for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:01,593 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:01,594 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:01,594 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1282 / 30000
2025-04-24 20:54:01,595 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:01,599 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:01,599 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:01,600 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:53:00Z",
    "speaker": "User...
2025-04-24 20:54:02,616 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:02,622 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:02,627 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_de2f99fe-c73d-41d9-a187-85a02c31bae0', 'timestamp': '2025-04-24T20:54:02.623302', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:02.617017"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:02,630 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:02,630 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:02,631 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:02,631 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 20: I want to tell you a fact about my favorite musician. My favorite musician is Beethoven, especially his piano sonatas. Please remember this specific fact.'
2025-04-24 20:54:02,632 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:02,632 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:02,632 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:02,634 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:02,634 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:05,244 - CtxMemMgr_User5 - INFO - Stored turn 9a51bc55-18f5-4312-ba90-8f3369b3ca09 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:05,244 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:05,245 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:05,245 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1322 / 30000
2025-04-24 20:54:05,246 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:05,252 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:05,252 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:05,253 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:05,253 - CtxMemMgr_User5 - INFO - Stored turn 0b7822c5-772d-4b61-8dbe-8b397f0829a3 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:05,253 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:05,254 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:05,254 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1362 / 30000
2025-04-24 20:54:05,255 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:05,260 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:05,260 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:05,261 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:56:00Z",
    "speaker": "User...
2025-04-24 20:54:06,278 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:06,285 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:06,291 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_35ce76c9-8cc8-4a30-8d25-f925160d9408', 'timestamp': '2025-04-24T20:54:06.285625', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:06.279481"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:06,296 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:06,296 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:06,297 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:06,297 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 21: I want to tell you a fact about my favorite color. My favorite color is cerulean blue. Please remember this specific fact.'
2025-04-24 20:54:06,297 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:06,297 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:06,298 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:06,299 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:06,299 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:08,454 - CtxMemMgr_User5 - INFO - Stored turn 2cb448ae-9d4b-44b5-aeef-b18ac23699de for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:08,455 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:08,455 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:08,456 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1394 / 30000
2025-04-24 20:54:08,456 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:08,467 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:08,468 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:08,469 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:08,470 - CtxMemMgr_User5 - INFO - Stored turn 9f59add1-9aef-4564-bd6f-af576b028820 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:08,471 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:08,472 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:08,472 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1426 / 30000
2025-04-24 20:54:08,473 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:08,481 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:08,482 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:08,482 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:56:00Z",
    "speaker": "User...
2025-04-24 20:54:09,504 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:09,513 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:09,520 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_3b16e96a-3d67-471b-bbe8-211f6c2e63ee', 'timestamp': '2025-04-24T20:54:09.514486', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:09.505479"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:09,526 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:09,526 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:09,528 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:09,529 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 22: I want to tell you a fact about my birthday. My birthday is March 15. Please remember this specific fact.'
2025-04-24 20:54:09,529 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:09,529 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:09,529 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:09,532 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:09,533 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:11,834 - CtxMemMgr_User5 - INFO - Stored turn 34f1be01-5955-44b8-82a6-f18ad50bd2b9 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:11,835 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:11,835 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:11,836 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1454 / 30000
2025-04-24 20:54:11,837 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:11,845 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:11,845 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:11,846 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:11,846 - CtxMemMgr_User5 - INFO - Stored turn 88d88785-3832-4e8b-a654-a63d8479aaa8 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:11,846 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:11,847 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:11,847 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1482 / 30000
2025-04-24 20:54:11,847 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:11,853 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:11,854 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:11,854 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:56:00Z",
    "speaker": "User...
2025-04-24 20:54:12,873 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:12,878 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:12,886 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_779284bb-5238-430f-b238-3d9d2e6e83f3', 'timestamp': '2025-04-24T20:54:12.879684', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:12.874469"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:12,892 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:12,892 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:12,893 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:12,893 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 23: I want to tell you a fact about my pet. My pet is a golden retriever named Max. Please remember this specific fact.'
2025-04-24 20:54:12,893 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:12,894 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:12,894 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:12,896 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:12,896 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:15,314 - CtxMemMgr_User5 - INFO - Stored turn 1db05db5-5a29-4f93-bb38-cf1bb1a338b7 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:15,314 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:15,315 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:15,316 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1513 / 30000
2025-04-24 20:54:15,317 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:15,320 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:15,320 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:15,321 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:15,321 - CtxMemMgr_User5 - INFO - Stored turn 5eab4092-af73-45bd-b401-ae37fd621ef3 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:15,321 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:15,321 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:15,321 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1544 / 30000
2025-04-24 20:54:15,321 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:15,323 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:15,323 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:15,323 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:56:00Z",
    "speaker": "User...
2025-04-24 20:54:16,345 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:16,354 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:16,363 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_69021578-855e-46a4-a274-d1ab6c71ba8a', 'timestamp': '2025-04-24T20:54:16.355746', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:16.346763"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:16,370 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:16,370 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:16,372 - ConvMgr_User5 - INFO - Pattern match extracted: User enjoys collecting vintage postcards.
2025-04-24 20:54:16,372 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:54:16,375 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:54:16,376 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:54:16,376 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:16,376 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 24: I want to tell you a fact about my hobby. My hobby is collecting vintage postcards. Please remember this specific fact.'
2025-04-24 20:54:16,376 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:16,376 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:16,377 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:16,378 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:16,378 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:18,485 - CtxMemMgr_User5 - INFO - Stored turn 97455b35-266f-4b14-b2c1-195ea706bf07 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:18,485 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:18,486 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 20:54:18,486 - CtxMemMgr_User5 - INFO - Added hobby fact to user memory: User enjoys collecting vintage postcards.
2025-04-24 20:54:18,488 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:54:18,489 - CtxMemMgr_User5 - INFO - Successfully saved 1 new facts to database.
2025-04-24 20:54:18,489 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:18,490 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1576 / 30000
2025-04-24 20:54:18,490 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:18,494 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:18,494 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:18,495 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:18,495 - CtxMemMgr_User5 - INFO - Stored turn f8b0d321-71e7-43cd-94f6-384acbe14096 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:18,495 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:18,495 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 20:54:18,495 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:18,496 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1608 / 30000
2025-04-24 20:54:18,496 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:18,501 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:18,501 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:18,501 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:54:19,523 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:19,529 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:19,533 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_eb4a86c2-487c-405b-b53f-6cf59c6fd778', 'timestamp': '2025-04-24T20:54:19.529600', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:19.524214"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:19,538 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:19,538 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:19,540 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:19,540 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 25: I want to tell you a fact about my hometown. My hometown is Springfield, Illinois. Please remember this specific fact.'
2025-04-24 20:54:19,540 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:19,540 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:19,540 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:19,542 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:19,542 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:21,923 - CtxMemMgr_User5 - INFO - Stored turn a93a6c30-035e-4650-847c-ce66844ff177 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:21,923 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:21,923 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:21,924 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1639 / 30000
2025-04-24 20:54:21,924 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:21,931 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:21,932 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:21,932 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:21,932 - CtxMemMgr_User5 - INFO - Stored turn 7b0ad598-e9b5-4c82-8b83-3b7b0e0df37b for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:21,933 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:21,933 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:21,933 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1670 / 30000
2025-04-24 20:54:21,934 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:21,942 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:21,942 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:21,943 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:56:00Z",
    "speaker": "User...
2025-04-24 20:54:22,963 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:22,970 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:22,976 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_07b2027a-01a2-4462-aa65-02ee4ffaa400', 'timestamp': '2025-04-24T20:54:22.971249', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:22.964481"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:22,980 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:22,980 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:22,981 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:22,982 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 26: I want to tell you a fact about my favorite food. My favorite food is spicy Thai curry. Please remember this specific fact.'
2025-04-24 20:54:22,982 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:22,982 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:22,982 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:22,984 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:22,984 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:25,512 - CtxMemMgr_User5 - INFO - Stored turn eed62afe-c3a5-4cdc-a7d9-300862b55db3 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:25,512 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:25,513 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:25,513 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1703 / 30000
2025-04-24 20:54:25,513 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:25,519 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:25,519 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:25,520 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:25,520 - CtxMemMgr_User5 - INFO - Stored turn 4fc0c12b-7ada-4070-b65c-f0826e23fb28 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:25,521 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:25,521 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:25,521 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1736 / 30000
2025-04-24 20:54:25,522 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:25,530 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:25,530 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:25,531 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:54:26,549 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:26,557 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:26,563 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_911afa05-f2a1-4264-87d2-0ea4497ea57e', 'timestamp': '2025-04-24T20:54:26.558317', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:26.550831"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:26,566 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:26,567 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:26,568 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:26,568 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 27: I want to tell you a fact about my first job. My first job is lifeguard at the community pool. Please remember this specific fact.'
2025-04-24 20:54:26,568 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:26,568 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:26,568 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:26,570 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:26,570 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:28,930 - CtxMemMgr_User5 - INFO - Stored turn 872b2cba-c7de-41ed-b67d-2a1143f45d11 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:28,930 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:28,931 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:28,932 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1770 / 30000
2025-04-24 20:54:28,932 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:28,941 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:28,941 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:28,942 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:28,942 - CtxMemMgr_User5 - INFO - Stored turn a4b10c86-66f6-469c-9a1e-4b0640af76f9 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:28,942 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:28,942 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:28,943 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1804 / 30000
2025-04-24 20:54:28,943 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:28,950 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:28,951 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:28,951 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:54:29,976 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:29,982 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:29,988 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_b3f3c874-3119-4d94-abc3-e432380277ad', 'timestamp': '2025-04-24T20:54:29.982481', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:29.977169"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:29,992 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:29,992 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:29,993 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:29,993 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 28: I want to tell you a fact about my dream vacation. My dream vacation is touring the ancient temples of Japan. Please remember this specific fact.'
2025-04-24 20:54:29,993 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:29,993 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:29,994 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:29,996 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:29,997 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:32,413 - CtxMemMgr_User5 - INFO - Stored turn eb29ee89-540a-45f7-a393-3d3c52b053d5 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:32,413 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:32,414 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:32,414 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1842 / 30000
2025-04-24 20:54:32,415 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:32,423 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:32,424 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:32,424 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:32,425 - CtxMemMgr_User5 - INFO - Stored turn 82d86dde-2932-4d37-aeb6-4d7274fe5454 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:32,425 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:32,425 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:32,425 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1880 / 30000
2025-04-24 20:54:32,426 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:32,434 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:32,434 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:32,435 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:56:00Z",
    "speaker": "User...
2025-04-24 20:54:33,456 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:33,464 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:33,471 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_045eb2b1-e93d-4301-80f7-0a4e27d49439', 'timestamp': '2025-04-24T20:54:33.465621', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:33.458211"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:33,475 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:33,475 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:33,476 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:33,476 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 29: I want to tell you a fact about my best friend. My best friend is Jamie, who they've known since kindergarten. Please remember this specific fact.'
2025-04-24 20:54:33,476 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:33,477 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:33,477 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:33,478 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:33,479 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:35,818 - CtxMemMgr_User5 - INFO - Stored turn 6afab39d-bf22-4b35-91ec-1d92a10ecb86 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:35,818 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:35,819 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:35,820 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1918 / 30000
2025-04-24 20:54:35,821 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:35,831 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:35,832 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:35,832 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:35,832 - CtxMemMgr_User5 - INFO - Stored turn d3855d73-e7b9-46f4-b71f-8ab2c4e13371 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:35,832 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:35,833 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:35,834 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1956 / 30000
2025-04-24 20:54:35,834 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:35,842 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:35,843 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:35,843 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:54:36,867 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:36,875 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:36,880 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_9184bcfd-dd46-46ca-8a3b-ccba64cf52cc', 'timestamp': '2025-04-24T20:54:36.876063', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:36.868618"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:36,886 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:36,887 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:36,888 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:36,888 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 30: I want to tell you a fact about my lucky number. My lucky number is seventeen. Please remember this specific fact.'
2025-04-24 20:54:36,889 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:36,889 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:36,889 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:36,893 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:36,893 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:39,272 - CtxMemMgr_User5 - INFO - Stored turn 98b80ded-0cfd-4d61-a237-97d8c7e1f1af for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:39,273 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:39,273 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:39,274 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~1986 / 30000
2025-04-24 20:54:39,275 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:39,283 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:39,283 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:39,283 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:39,284 - CtxMemMgr_User5 - INFO - Stored turn d78ce0a3-8bbc-4b0e-bf3d-2fa484f11f28 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:39,284 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:39,285 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:39,285 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2016 / 30000
2025-04-24 20:54:39,286 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:39,295 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:39,295 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:39,296 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:54:40,312 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:40,321 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:40,328 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_1412ebbb-937c-4c27-a61d-77316e0a27ec', 'timestamp': '2025-04-24T20:54:40.322161', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:40.314388"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:40,332 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:40,332 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:40,333 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:40,333 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 31: I want to tell you a fact about my college major. My college major is Environmental Science. Please remember this specific fact.'
2025-04-24 20:54:40,333 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:40,334 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:40,334 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:40,335 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:40,336 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:42,569 - CtxMemMgr_User5 - INFO - Stored turn 69a271be-bf70-406b-8751-5347bd5c8b4a for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:42,570 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:42,571 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:42,574 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2050 / 30000
2025-04-24 20:54:42,575 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:42,582 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:42,583 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:42,583 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:42,583 - CtxMemMgr_User5 - INFO - Stored turn 38cf3220-2733-465a-8d6c-432f1ddddd5f for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:42,583 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:42,583 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:42,583 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2084 / 30000
2025-04-24 20:54:42,584 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:42,587 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:42,587 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:42,587 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:54:43,601 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:43,609 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:43,616 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_5397dc1c-d546-4097-94ed-906c61d8e4e0', 'timestamp': '2025-04-24T20:54:43.610014', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:43.602591"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:43,620 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:43,620 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:43,621 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses book for the Name.
2025-04-24 20:54:43,621 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:54:43,622 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:54:43,623 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:54:43,623 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:43,623 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 32: I want to tell you a fact about my favorite book. My favorite book is The Name of the Wind. Please remember this specific fact.'
2025-04-24 20:54:43,624 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:43,624 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:43,624 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:43,626 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:43,626 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:46,243 - CtxMemMgr_User5 - INFO - Stored turn eb3cc41d-97b0-47b9-b505-d63b6a0b8f4d for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:46,244 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:46,245 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:46,245 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2118 / 30000
2025-04-24 20:54:46,246 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:46,256 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:46,257 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:46,257 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:46,257 - CtxMemMgr_User5 - INFO - Stored turn a36fbdbe-b78c-4217-b36a-8724d2ec899a for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:46,257 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:46,258 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:46,258 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2152 / 30000
2025-04-24 20:54:46,258 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:46,265 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:46,265 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:46,265 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:54:47,284 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:47,292 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:47,298 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_c3d0275a-532c-42c7-bf18-70c1082666d5', 'timestamp': '2025-04-24T20:54:47.293370', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:47.286011"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:47,304 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:47,304 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:47,305 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses movie for the Shawshank.
2025-04-24 20:54:47,306 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:54:47,308 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:54:47,310 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:54:47,311 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:47,311 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 33: I want to tell you a fact about my favorite movie. My favorite movie is The Shawshank Redemption. Please remember this specific fact.'
2025-04-24 20:54:47,311 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:47,311 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:47,312 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:47,314 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:47,314 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:49,665 - CtxMemMgr_User5 - INFO - Stored turn aca625da-21a1-44cd-b451-2a1d58b01c67 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:49,665 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:49,666 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:49,666 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2187 / 30000
2025-04-24 20:54:49,667 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:49,686 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:49,686 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:49,687 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:49,687 - CtxMemMgr_User5 - INFO - Stored turn 75fa13be-5b64-4ae7-ae1c-197d4526031b for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:49,688 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:49,688 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:49,688 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2222 / 30000
2025-04-24 20:54:49,689 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:49,695 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:49,695 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:49,696 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:56:00Z",
    "speaker": "User...
2025-04-24 20:54:50,709 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:50,713 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:50,718 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_f0f308d6-22f0-463a-b159-78d37878edee', 'timestamp': '2025-04-24T20:54:50.713805', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:50.710544"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:50,724 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:50,724 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:50,725 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:50,725 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 34: I want to tell you a fact about my career goal. My career goal is to start a sustainable technology company. Please remember this specific fact.'
2025-04-24 20:54:50,725 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:50,726 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:50,726 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:50,727 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:50,727 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:53,223 - CtxMemMgr_User5 - INFO - Stored turn b3284962-198b-421f-a414-7ad5f6aa938e for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:53,224 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:53,224 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:53,225 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2260 / 30000
2025-04-24 20:54:53,226 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:53,246 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:53,246 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:53,247 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:53,247 - CtxMemMgr_User5 - INFO - Stored turn edce21cc-1862-46bd-a487-3e8b45fbef60 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:53,247 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:53,247 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:53,248 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2298 / 30000
2025-04-24 20:54:53,248 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:53,253 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:53,253 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:53,253 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:54:00Z",
    "speaker": "User...
2025-04-24 20:54:54,270 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:54,278 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:54,283 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_28af0895-fd44-47f9-a252-ed523e5027d8', 'timestamp': '2025-04-24T20:54:54.278837', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:54.271538"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:54,287 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:54,288 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:54,289 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:54,289 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 35: I want to tell you a fact about my biggest fear. My biggest fear is public speaking. Please remember this specific fact.'
2025-04-24 20:54:54,289 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:54,289 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:54,289 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:54,291 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:54,291 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:56,583 - CtxMemMgr_User5 - INFO - Stored turn d1c92f49-a682-4302-aec8-19c5877124b8 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:56,584 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:56,585 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:56,585 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2330 / 30000
2025-04-24 20:54:56,586 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:56,595 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:56,595 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:56,596 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:56,596 - CtxMemMgr_User5 - INFO - Stored turn 71e68c65-e156-4cfc-a671-a9eace9cfe22 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:56,597 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:56,597 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:56,597 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2362 / 30000
2025-04-24 20:54:56,598 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:56,604 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:56,605 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:56,606 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:54:57,621 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:57,629 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:54:57,634 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_d7c0a487-4afb-4454-b172-e0a6ee58c864', 'timestamp': '2025-04-24T20:54:57.629746', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:54:57.622699"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:54:57,638 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:57,639 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:54:57,640 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:54:57,640 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 36: I want to tell you a fact about my favorite season. My favorite season is autumn when the leaves change. Please remember this specific fact.'
2025-04-24 20:54:57,641 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:54:57,641 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:54:57,641 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:54:57,642 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:54:57,643 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:54:59,812 - CtxMemMgr_User5 - INFO - Stored turn 6f1c2a9b-ed24-465f-8765-73d392487222 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:59,813 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:59,813 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:59,814 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2399 / 30000
2025-04-24 20:54:59,814 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:59,828 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:59,829 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:54:59,830 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:54:59,830 - CtxMemMgr_User5 - INFO - Stored turn e7d05c99-bd8b-4c48-b45f-77558e7d405f for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:59,830 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:54:59,831 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:54:59,831 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2436 / 30000
2025-04-24 20:54:59,831 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:54:59,838 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:54:59,839 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:54:59,839 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:00,854 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:00,857 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:00,861 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_71dfd2ff-67b7-413c-be27-2b5888fc655e', 'timestamp': '2025-04-24T20:55:00.858210', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:00.855210"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:00,863 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:00,863 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:00,864 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:00,864 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 37: I want to tell you a fact about my allergies. My allergies is peanuts and bee stings. Please remember this specific fact.'
2025-04-24 20:55:00,864 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:00,864 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:00,864 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:00,865 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:00,865 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:03,341 - CtxMemMgr_User5 - INFO - Stored turn c2ca4c5c-c15c-4c6a-b36f-fa63ab9bae7a for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:03,342 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:03,342 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:03,343 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2468 / 30000
2025-04-24 20:55:03,343 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:03,353 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:03,353 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:03,353 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:03,354 - CtxMemMgr_User5 - INFO - Stored turn 1c5855dc-31ba-4378-bb96-20eb01dcf5ff for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:03,354 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:03,355 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:03,356 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2500 / 30000
2025-04-24 20:55:03,356 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:03,365 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:03,365 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:03,365 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:04,389 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:04,395 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:04,400 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_33e59d58-de74-47f8-8f56-b36a8cf54387', 'timestamp': '2025-04-24T20:55:04.396294', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:04.390933"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:04,403 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:04,404 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:04,405 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:04,406 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 38: I want to tell you a fact about my hidden talent. My hidden talent is can solve a Rubik's cube in under 2 minutes. Please remember this specific fact.'
2025-04-24 20:55:04,406 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:04,406 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:04,406 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:04,408 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:04,408 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:07,233 - CtxMemMgr_User5 - INFO - Stored turn 73bb91cc-3afe-4a78-b92e-2c47502a65a1 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:07,234 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:07,235 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:07,235 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2539 / 30000
2025-04-24 20:55:07,236 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:07,246 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:07,246 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:07,247 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:07,247 - CtxMemMgr_User5 - INFO - Stored turn 9fd38b69-ca26-4fb5-8da7-316f5a3978f2 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:07,247 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:07,247 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:07,248 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2578 / 30000
2025-04-24 20:55:07,248 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:07,255 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:07,256 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:07,256 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:08,268 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:08,274 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:08,277 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_a6dff058-5d94-47d1-850b-2f2b51fd9b7b', 'timestamp': '2025-04-24T20:55:08.274550', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:08.269016"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:08,281 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:08,281 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:08,283 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:08,283 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 39: I want to tell you a fact about my role model. My role model is their grandfather who was an inventor. Please remember this specific fact.'
2025-04-24 20:55:08,283 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:08,283 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:08,284 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:08,286 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:08,286 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:10,523 - CtxMemMgr_User5 - INFO - Stored turn ca01563e-5984-49d6-bd63-1c069e2796d7 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:10,525 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:10,527 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:10,529 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2614 / 30000
2025-04-24 20:55:10,531 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:10,536 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:10,536 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:10,537 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:10,537 - CtxMemMgr_User5 - INFO - Stored turn bdbc58a2-98a3-43a7-9c6c-3fab6f16e401 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:10,537 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:10,537 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:10,537 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2650 / 30000
2025-04-24 20:55:10,538 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:10,541 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:10,541 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:10,541 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:11,554 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:11,560 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:11,566 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_e544a3f7-c5f0-4398-ab0a-69a6bb05358d', 'timestamp': '2025-04-24T20:55:11.561509', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:11.555712"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:11,569 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:11,569 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:11,569 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:11,569 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 40: I want to tell you a fact about my favorite musician. My favorite musician is Beethoven, especially his piano sonatas. Please remember this specific fact.'
2025-04-24 20:55:11,570 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:11,570 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:11,570 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:11,571 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:11,571 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:13,988 - CtxMemMgr_User5 - INFO - Stored turn ff7adb53-c8c5-48e9-a25d-280927f8458b for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:13,988 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:13,989 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:13,990 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2690 / 30000
2025-04-24 20:55:13,990 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:14,002 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:14,003 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:14,003 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:14,004 - CtxMemMgr_User5 - INFO - Stored turn 852b0f0b-c822-40b4-8331-c30b414a9859 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:14,004 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:14,004 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:14,005 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2730 / 30000
2025-04-24 20:55:14,005 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:14,012 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:14,012 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:14,012 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:15,025 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:15,030 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:15,037 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_2505f9de-56d1-4051-bc03-bdb9fb29582e', 'timestamp': '2025-04-24T20:55:15.031439', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:15.025908"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:15,042 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:15,042 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:15,043 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:15,044 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 41: I want to tell you a fact about my favorite color. My favorite color is cerulean blue. Please remember this specific fact.'
2025-04-24 20:55:15,044 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:15,044 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:15,044 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:15,046 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:15,046 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:17,264 - CtxMemMgr_User5 - INFO - Stored turn 856df987-d2b1-45a2-a925-20f125479952 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:17,264 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:17,265 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:17,265 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2762 / 30000
2025-04-24 20:55:17,266 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:17,277 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:17,278 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:17,278 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:17,278 - CtxMemMgr_User5 - INFO - Stored turn de666510-f6e1-4349-b4dd-12e178290464 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:17,278 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:17,279 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:17,279 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2794 / 30000
2025-04-24 20:55:17,280 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:17,289 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:17,290 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:17,290 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:18,304 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:18,311 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:18,317 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_03600eae-d66a-42f2-b3a7-5f86baccc652', 'timestamp': '2025-04-24T20:55:18.312506', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:18.305305"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:18,322 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:18,322 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:18,324 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:18,324 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 42: I want to tell you a fact about my birthday. My birthday is March 15. Please remember this specific fact.'
2025-04-24 20:55:18,324 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:18,324 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:18,324 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:18,326 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:18,326 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:20,715 - CtxMemMgr_User5 - INFO - Stored turn bd0c4ae1-f593-40fa-96ad-c74222c30d5b for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:20,716 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:20,716 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:20,716 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2822 / 30000
2025-04-24 20:55:20,717 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:20,726 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:20,726 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:20,726 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:20,727 - CtxMemMgr_User5 - INFO - Stored turn fb31c466-d655-4a20-a6f3-04a841dca38e for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:20,727 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:20,727 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:20,727 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2850 / 30000
2025-04-24 20:55:20,727 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:20,736 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:20,736 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:20,737 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:21,751 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:21,759 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:21,768 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_d0d5bb36-0ad7-470d-9b67-2ab1c97c6a10', 'timestamp': '2025-04-24T20:55:21.761916', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:21.753462"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:21,773 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:21,774 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:21,775 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:21,775 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 43: I want to tell you a fact about my pet. My pet is a golden retriever named Max. Please remember this specific fact.'
2025-04-24 20:55:21,775 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:21,776 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:21,777 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:21,779 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:21,779 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:24,026 - CtxMemMgr_User5 - INFO - Stored turn 634c84ac-c81a-4dff-9391-50cdaaaee506 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:24,027 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:24,028 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:24,029 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2881 / 30000
2025-04-24 20:55:24,029 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:24,040 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:24,040 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:24,042 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:24,042 - CtxMemMgr_User5 - INFO - Stored turn b5273a51-b7f4-4c4f-918d-0202782c04d2 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:24,044 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:24,045 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:24,046 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2912 / 30000
2025-04-24 20:55:24,046 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:24,054 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:24,055 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:24,055 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:25,068 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:25,075 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:25,081 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_9e2805fc-38b4-4954-be03-b72fcbb6369f', 'timestamp': '2025-04-24T20:55:25.076300', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:25.069839"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:25,085 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:25,086 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:25,087 - ConvMgr_User5 - INFO - Pattern match extracted: User enjoys collecting vintage postcards.
2025-04-24 20:55:25,087 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:55:25,088 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:55:25,089 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:55:25,090 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:25,090 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 44: I want to tell you a fact about my hobby. My hobby is collecting vintage postcards. Please remember this specific fact.'
2025-04-24 20:55:25,090 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:25,090 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:25,090 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:25,092 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:25,092 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:27,390 - CtxMemMgr_User5 - INFO - Stored turn c13d51d2-1028-4cfc-b270-dcad204221e3 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:27,391 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:27,391 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 20:55:27,391 - CtxMemMgr_User5 - INFO - Added hobby fact to user memory: User enjoys collecting vintage postcards.
2025-04-24 20:55:27,394 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:55:27,395 - CtxMemMgr_User5 - INFO - Successfully saved 1 new facts to database.
2025-04-24 20:55:27,396 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:27,396 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2944 / 30000
2025-04-24 20:55:27,396 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:27,404 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:27,405 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:27,405 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:27,406 - CtxMemMgr_User5 - INFO - Stored turn 951011e6-54ec-45ae-85db-46b3ab3cd907 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:27,406 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:27,406 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 20:55:27,407 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:27,407 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~2976 / 30000
2025-04-24 20:55:27,407 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:27,415 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:27,415 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:27,416 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:28,429 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:28,436 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:28,441 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_c47fecf1-be58-4bb7-83ca-f81a76d0f40b', 'timestamp': '2025-04-24T20:55:28.437002', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:28.431796"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:28,445 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:28,445 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:28,446 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:28,446 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 45: I want to tell you a fact about my hometown. My hometown is Springfield, Illinois. Please remember this specific fact.'
2025-04-24 20:55:28,446 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:28,447 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:28,447 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:28,448 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:28,449 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:30,605 - CtxMemMgr_User5 - INFO - Stored turn 1fb9cb75-9bf1-4ad1-96ed-1894d06bcad1 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:30,605 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:30,606 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:30,607 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3007 / 30000
2025-04-24 20:55:30,607 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:30,624 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:30,625 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:30,626 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:30,626 - CtxMemMgr_User5 - INFO - Stored turn 1ec5a368-ce5f-473d-a83b-e83857ec3793 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:30,626 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:30,626 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:30,627 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3038 / 30000
2025-04-24 20:55:30,627 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:30,635 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:30,635 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:30,635 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:31,657 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:31,664 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:31,670 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_0c423530-00f8-4570-8b88-fb3721346164', 'timestamp': '2025-04-24T20:55:31.665403', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:31.659138"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:31,675 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:31,675 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:31,676 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:31,677 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 46: I want to tell you a fact about my favorite food. My favorite food is spicy Thai curry. Please remember this specific fact.'
2025-04-24 20:55:31,677 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:31,677 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:31,677 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:31,679 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:31,680 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:34,100 - CtxMemMgr_User5 - INFO - Stored turn 6e55eb7e-cfd8-4481-95bc-2710986ff986 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:34,100 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:34,101 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:34,102 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3071 / 30000
2025-04-24 20:55:34,102 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:34,113 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:34,113 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:34,113 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:34,114 - CtxMemMgr_User5 - INFO - Stored turn 7b6f6d54-2b95-48d8-aea5-93e0b4eb1050 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:34,114 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:34,115 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:34,115 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3104 / 30000
2025-04-24 20:55:34,115 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:34,123 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:34,123 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:34,124 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:56:00Z",
    "speaker": "User...
2025-04-24 20:55:35,142 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:35,151 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:35,158 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_c61478ac-ebd0-4a29-b496-de8d1ed243dd', 'timestamp': '2025-04-24T20:55:35.152734', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:35.144604"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:35,163 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:35,163 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:35,164 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:35,165 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 47: I want to tell you a fact about my first job. My first job is lifeguard at the community pool. Please remember this specific fact.'
2025-04-24 20:55:35,165 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:35,165 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:35,165 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:35,167 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:35,168 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:37,600 - CtxMemMgr_User5 - INFO - Stored turn cfe2e596-6b13-4eef-979e-3cc5844de532 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:37,600 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:37,601 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:37,601 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3138 / 30000
2025-04-24 20:55:37,602 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:37,611 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:37,611 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:37,611 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:37,612 - CtxMemMgr_User5 - INFO - Stored turn bc66d271-d90e-461d-91db-f7420eece84f for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:37,612 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:37,612 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:37,613 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3172 / 30000
2025-04-24 20:55:37,613 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:37,621 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:37,621 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:37,622 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:38,638 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:38,646 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:38,652 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_466fe74a-345a-4faa-bb18-024c13f7622e', 'timestamp': '2025-04-24T20:55:38.646919', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:38.640003"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:38,657 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:38,657 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:38,658 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:38,658 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 48: I want to tell you a fact about my dream vacation. My dream vacation is touring the ancient temples of Japan. Please remember this specific fact.'
2025-04-24 20:55:38,658 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:38,658 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:38,658 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:38,660 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:38,660 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:41,096 - CtxMemMgr_User5 - INFO - Stored turn b69c00b7-5044-4177-bf0d-3a35308a4201 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:41,096 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:41,097 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:41,097 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3210 / 30000
2025-04-24 20:55:41,098 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:41,108 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:41,108 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:41,108 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:41,109 - CtxMemMgr_User5 - INFO - Stored turn aee8a27f-4f18-49ed-a713-7774c7e093d2 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:41,109 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:41,110 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:41,110 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3248 / 30000
2025-04-24 20:55:41,111 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:41,120 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:41,120 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:41,121 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:42,133 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:42,139 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:42,144 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_50ca481d-8684-4eb5-a6d5-63671729153a', 'timestamp': '2025-04-24T20:55:42.139663', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:42.134232"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:42,149 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:42,149 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:42,150 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:42,150 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 49: I want to tell you a fact about my best friend. My best friend is Jamie, who they've known since kindergarten. Please remember this specific fact.'
2025-04-24 20:55:42,150 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:42,151 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:42,151 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:42,153 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:42,153 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:44,349 - CtxMemMgr_User5 - INFO - Stored turn 80c01600-81af-482d-869b-e8fd6afe4e67 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:44,350 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:44,350 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:44,351 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3286 / 30000
2025-04-24 20:55:44,351 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:44,364 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:44,364 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:44,364 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:44,365 - CtxMemMgr_User5 - INFO - Stored turn 0fe9b303-ecd2-4ca0-8ecb-854ebcbb5426 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:44,365 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:44,365 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:44,366 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3324 / 30000
2025-04-24 20:55:44,366 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:44,375 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:44,375 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:44,375 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:55:00Z",
    "speaker": "User...
2025-04-24 20:55:45,394 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:45,402 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:45,407 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_eccb3c1a-ea7b-4e99-b2b2-2c58d4950abe', 'timestamp': '2025-04-24T20:55:45.402828', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:45.395686"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:45,411 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:45,411 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:45,412 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:45,413 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 50: I want to tell you a fact about my lucky number. My lucky number is seventeen. Please remember this specific fact.'
2025-04-24 20:55:45,413 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:45,413 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:45,414 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:45,416 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:45,416 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:47,633 - CtxMemMgr_User5 - INFO - Stored turn f891b1ca-fbf9-486c-9bc1-370e6852f547 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:47,633 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:47,633 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:47,634 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3354 / 30000
2025-04-24 20:55:47,634 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:47,645 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:47,645 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:47,645 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:47,646 - CtxMemMgr_User5 - INFO - Stored turn a90a9d16-2cb0-4eda-b18c-fe0ec0cf771b for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:47,646 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:47,646 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:47,648 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3384 / 30000
2025-04-24 20:55:47,648 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:47,656 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:47,657 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:47,657 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-07-27T20:56:00Z",
    "speaker": "User...
2025-04-24 20:55:48,672 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:48,678 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:48,683 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_683bb8c3-f47d-4425-b1bd-40251373d331', 'timestamp': '2025-04-24T20:55:48.678512', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:48.673310"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:48,687 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:48,687 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:48,688 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:48,689 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my favorite color, what was it?'
2025-04-24 20:55:48,689 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:48,689 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:48,689 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:48,691 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:48,691 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:50,617 - CtxMemMgr_User5 - INFO - Stored turn aaab3bdb-464c-4ddb-a77d-b7b7a5bf1ddb for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:50,617 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:50,617 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:50,618 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3397 / 30000
2025-04-24 20:55:50,618 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:50,622 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:50,622 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:50,622 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:50,622 - CtxMemMgr_User5 - INFO - Stored turn 9366e8f7-dd57-4fa4-8506-75669a13efc9 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:50,623 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:50,623 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:50,623 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3410 / 30000
2025-04-24 20:55:50,623 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:50,627 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:50,627 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:50,627 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-08-08T20:56:00Z",
    "speaker": "User...
2025-04-24 20:55:51,640 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:51,646 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:51,650 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_294e88bf-5ced-47cf-aeab-79f1fa73b808', 'timestamp': '2025-04-24T20:55:51.646751', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:51.641003"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:51,653 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:51,654 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:51,655 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:51,655 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my birthday, what was it?'
2025-04-24 20:55:51,655 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:51,655 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:51,655 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:51,657 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:51,657 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:53,579 - CtxMemMgr_User5 - INFO - Stored turn ce74d9e9-546f-4c26-ba44-e04798304e7c for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:53,580 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:53,580 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:53,581 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3422 / 30000
2025-04-24 20:55:53,581 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:53,595 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:53,595 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:53,595 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:53,596 - CtxMemMgr_User5 - INFO - Stored turn 70098096-90cc-49ad-9bbf-74db5130d71d for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:53,596 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:53,597 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:53,597 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3434 / 30000
2025-04-24 20:55:53,597 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:53,604 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:53,604 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:53,604 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:57:00Z",
    "speaker": "User...
2025-04-24 20:55:54,618 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:54,624 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:54,630 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_14328a0f-fac9-490f-b2a6-b5cb5c48c414', 'timestamp': '2025-04-24T20:55:54.625415', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:54.619844"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:54,634 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:54,635 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:54,635 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the pet.
2025-04-24 20:55:54,636 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:55:54,638 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:55:54,638 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:55:54,639 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:54,639 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my pet?'
2025-04-24 20:55:54,639 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:54,639 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:54,639 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:54,641 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:54,641 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:56,525 - CtxMemMgr_User5 - INFO - Stored turn cce8d8c5-ebae-4781-b5cb-6533196e21e0 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:56,525 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:56,526 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:56,526 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3437 / 30000
2025-04-24 20:55:56,526 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:56,536 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:56,536 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:56,536 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:56,536 - CtxMemMgr_User5 - INFO - Stored turn 67638bb7-a705-42a9-8538-5a34abc0ad81 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:56,537 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:56,537 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:56,537 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3440 / 30000
2025-04-24 20:55:56,537 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:56,544 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:56,544 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:56,544 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-07-27T20:56:00Z",
    "speaker": "User...
2025-04-24 20:55:57,557 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:57,565 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:55:57,570 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_b7cd514d-1985-4740-9983-7894ae541877', 'timestamp': '2025-04-24T20:55:57.565780', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:55:57.559074"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:55:57,575 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:57,576 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:55:57,577 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:55:57,577 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my hobby, what was it?'
2025-04-24 20:55:57,577 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:55:57,577 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:55:57,578 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:55:57,580 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:55:57,580 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:55:59,396 - CtxMemMgr_User5 - INFO - Stored turn bfc5b83a-c13b-4da1-a9b9-86eaf7e8fe77 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:59,396 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:59,397 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:59,397 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3451 / 30000
2025-04-24 20:55:59,397 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:59,405 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:59,405 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:55:59,406 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:55:59,406 - CtxMemMgr_User5 - INFO - Stored turn 2e7a6fe4-7341-4f15-bc2d-8b99a27ea5f0 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:59,406 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:55:59,406 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:55:59,407 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3462 / 30000
2025-04-24 20:55:59,407 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:55:59,415 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:55:59,415 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:55:59,415 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:56:00Z",
    "speaker": "User...
2025-04-24 20:56:00,431 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:00,438 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:00,447 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_8984157e-3676-4c06-a46b-d776858ef4f6', 'timestamp': '2025-04-24T20:56:00.440280', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:00.432834"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:00,453 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:00,454 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:00,456 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:00,457 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my hometown, what was it?'
2025-04-24 20:56:00,457 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:00,457 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:00,458 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:00,460 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:00,460 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:02,529 - CtxMemMgr_User5 - INFO - Stored turn f69583ac-2fb1-4f9f-9c44-01d3e92356c2 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:02,529 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:02,530 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:02,530 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3474 / 30000
2025-04-24 20:56:02,531 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:02,543 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:02,543 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:02,544 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:02,545 - CtxMemMgr_User5 - INFO - Stored turn f54675ae-ba7c-46f4-9812-175b889be913 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:02,546 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:02,546 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:02,549 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3486 / 30000
2025-04-24 20:56:02,549 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:02,566 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:02,566 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:02,566 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:57:00Z",
    "speaker": "User...
2025-04-24 20:56:03,581 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:03,587 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:03,590 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_9067a471-e2a4-4779-adb4-9b318081098e', 'timestamp': '2025-04-24T20:56:03.587408', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:03.582400"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:03,593 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:03,594 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:03,595 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the favorite.
2025-04-24 20:56:03,595 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:56:03,600 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:56:03,601 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:56:03,601 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:03,602 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my favorite food?'
2025-04-24 20:56:03,602 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:03,602 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:03,602 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:03,604 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:03,605 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:05,543 - CtxMemMgr_User5 - INFO - Stored turn e0cd3c1b-10e5-488b-8f20-aaaead7ecf77 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:05,543 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:05,543 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:05,544 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3492 / 30000
2025-04-24 20:56:05,544 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:05,558 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:05,558 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:05,559 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:05,559 - CtxMemMgr_User5 - INFO - Stored turn 894e73db-7d6d-4f12-848f-ada67e0dc597 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:05,559 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:05,560 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:05,560 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3498 / 30000
2025-04-24 20:56:05,560 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:05,574 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:05,575 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:05,575 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-07-27T20:58:00Z",
    "speaker": "User...
2025-04-24 20:56:06,596 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:06,599 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:06,603 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_4cb6e489-2abb-46a3-9e2c-c0ffb6a8810e', 'timestamp': '2025-04-24T20:56:06.600311', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:06.596639"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:06,605 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:06,605 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:06,606 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:06,606 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my first job is?'
2025-04-24 20:56:06,606 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:06,606 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:06,607 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:06,608 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:06,608 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:08,653 - CtxMemMgr_User5 - INFO - Stored turn dd86b205-2278-4a99-a06a-5d2d19332b0d for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:08,653 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:08,654 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:08,654 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3507 / 30000
2025-04-24 20:56:08,655 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:08,664 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:08,664 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:08,665 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:08,665 - CtxMemMgr_User5 - INFO - Stored turn 5326158d-2252-4b58-9247-fd8fe8967adf for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:08,665 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:08,665 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:08,665 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3516 / 30000
2025-04-24 20:56:08,666 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:08,675 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:08,675 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:08,675 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:58:00Z",
    "speaker": "User...
2025-04-24 20:56:09,688 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:09,694 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:09,698 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_e322325f-117e-4526-8658-0698b20cc138', 'timestamp': '2025-04-24T20:56:09.694989', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:09.689397"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:09,704 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:09,704 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:09,705 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the dream.
2025-04-24 20:56:09,705 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:56:09,707 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:56:09,708 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:56:09,709 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:09,709 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my dream vacation?'
2025-04-24 20:56:09,710 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:09,710 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:09,710 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:09,712 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:09,712 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:11,596 - CtxMemMgr_User5 - INFO - Stored turn 8f8e35d8-e2a9-456d-9d9c-712d8f0bc599 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:11,598 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:11,599 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:11,599 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3522 / 30000
2025-04-24 20:56:11,600 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:11,611 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:11,612 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:11,612 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:11,612 - CtxMemMgr_User5 - INFO - Stored turn 308cb234-e6f9-4e49-8ef9-90f8b1a5af2d for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:11,612 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:11,613 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:11,613 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3528 / 30000
2025-04-24 20:56:11,613 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:11,619 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:11,619 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:11,620 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:58:00Z",
    "speaker": "User...
2025-04-24 20:56:12,637 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:12,642 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:12,647 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_b5e2bbd6-8732-427a-b971-3f66a5b3a927', 'timestamp': '2025-04-24T20:56:12.643213', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:12.638614"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:12,650 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:12,650 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:12,650 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the best.
2025-04-24 20:56:12,651 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:56:12,652 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:56:12,652 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:56:12,653 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:12,653 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my best friend?'
2025-04-24 20:56:12,653 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:12,653 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:12,653 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:12,654 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:12,655 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:14,479 - CtxMemMgr_User5 - INFO - Stored turn 6ac499b8-1642-4a6a-bbc5-346659e0e11f for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:14,480 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:14,480 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:14,481 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3533 / 30000
2025-04-24 20:56:14,481 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:14,491 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:14,491 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:14,492 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:14,492 - CtxMemMgr_User5 - INFO - Stored turn 5bb706e6-f9fd-4691-9f73-fbfe8f7f9bc3 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:14,492 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:14,492 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:14,493 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3538 / 30000
2025-04-24 20:56:14,493 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:14,502 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:14,502 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:14,503 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:58:00Z",
    "speaker": "User...
2025-04-24 20:56:15,517 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:15,523 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:15,528 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_9cd67274-9974-4273-bc2a-6881b40691e6', 'timestamp': '2025-04-24T20:56:15.524079', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:15.518099"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:15,532 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:15,532 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:15,533 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the lucky.
2025-04-24 20:56:15,534 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:56:15,535 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:56:15,536 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:56:15,537 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:15,537 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my lucky number?'
2025-04-24 20:56:15,537 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:15,537 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:15,537 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:15,539 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:15,539 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:17,475 - CtxMemMgr_User5 - INFO - Stored turn f9f16970-f9ee-42d1-8ac9-78be942dff04 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:17,475 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:17,476 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:17,476 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3544 / 30000
2025-04-24 20:56:17,476 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:17,493 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:17,494 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:17,494 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:17,494 - CtxMemMgr_User5 - INFO - Stored turn 5d9d78fb-0b0e-4c44-b994-0f5212be54f1 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:17,495 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:17,495 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:17,495 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3550 / 30000
2025-04-24 20:56:17,496 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:17,506 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:17,507 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:17,507 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:58:00Z",
    "speaker": "User...
2025-04-24 20:56:18,528 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:18,534 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:18,539 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_8173cf0a-dfb9-4b69-bfcb-3fd7eae99353', 'timestamp': '2025-04-24T20:56:18.535045', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:18.529225"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:18,543 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:18,543 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:18,544 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:18,545 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my college major is?'
2025-04-24 20:56:18,545 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:18,545 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:18,545 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:18,547 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:18,547 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:20,702 - CtxMemMgr_User5 - INFO - Stored turn 330467f7-e2d4-45ae-9996-004d4fe3f664 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:20,703 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:20,703 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:20,704 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3560 / 30000
2025-04-24 20:56:20,704 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:20,722 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:20,722 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:20,722 - ActionHandler_User5 - INFO - Web search detected with pattern: \[SEARCH:\s*(.+?)\s*\]
2025-04-24 20:56:20,723 - ActionHandler_User5 - INFO - Extracted query: 'common college majors'
2025-04-24 20:56:20,723 - ActionHandler_User5 - INFO - WEB SEARCH signal detected for query: 'common college majors' (Session: 0ead83b0-6f78-418e-8159-68f6210d9791)
2025-04-24 20:56:20,723 - CtxMemMgr_User5 - INFO - Stored turn 94a8177d-7543-43f6-bf03-2fd9866f2056 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:20,723 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:20,723 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:20,724 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3570 / 30000
2025-04-24 20:56:20,724 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:20,732 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:20,732 - ActionHandler_User5 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745528180-0ead83b0) ***
2025-04-24 20:56:20,732 - ActionHandler_User5 - INFO - Storing search status for session 0ead83b0-6f78-418e-8159-68f6210d9791: active
2025-04-24 20:56:20,734 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:20,736 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_5c1ccef0-6f70-43bb-beb9-100b89c2d824', 'timestamp': '2025-04-24T20:56:20.735026', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'web_search', 'content': '{"status": "active", "message": "Searching the web for: common college majors", "search_id": "search-1745528180-0ead83b0", "timestamp": "2025-04-24T20:56:20.732726"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:20,737 - ActionHandler_User5 - INFO - Stored system message ID sys_5c1ccef0-6f70-43bb-beb9-100b89c2d824 for search ID search-1745528180-0ead83b0
2025-04-24 20:56:20,737 - ActionHandler_User5 - INFO - Successfully posted system message to dedicated API for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:20,737 - ActionHandler_User5 - INFO - EXECUTING WEB SEARCH for query: 'common college majors'
2025-04-24 20:56:20,737 - ActionHandler_User5 - INFO - TAVILY_AVAILABLE = True
2025-04-24 20:56:20,737 - ActionHandler_User5 - INFO - TAVILY_API_KEY from env: Present
2025-04-24 20:56:20,737 - ActionHandler_User5 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-24 20:56:20,737 - ActionHandler_User5 - INFO - Calling perform_search function for query: 'common college majors'
2025-04-24 20:56:20,737 - components.action_handler - INFO - Performing Tavily search for query: 'common college majors'
2025-04-24 20:56:20,737 - components.action_handler - INFO - Calling Tavily search API with query: 'common college majors'
2025-04-24 20:56:23,155 - components.action_handler - INFO - Tavily search response: {'query': 'common college majors', 'follow_up_questions': None, 'answer': 'Common college majors include business, health professions, and STEM fields. Nursing is a popular health major. STEM majors o...
2025-04-24 20:56:23,156 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: common college majors

Summary: Common college majors include business, health professions, and STEM fields. Nursing is a popular health major. STEM majors often lead to high-deman...
2025-04-24 20:56:23,156 - ActionHandler_User5 - INFO - perform_search function call completed successfully
2025-04-24 20:56:23,156 - ActionHandler_User5 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-24 20:56:23,157 - ActionHandler_User5 - INFO - SEARCH RESULTS LENGTH: 1870
2025-04-24 20:56:23,157 - ActionHandler_User5 - INFO - Received valid web search results (first 100 chars): Search results for: common college majors

Summary: Common college majors include business, health p...
2025-04-24 20:56:23,158 - ActionHandler_User5 - INFO - Updating system message sys_5c1ccef0-6f70-43bb-beb9-100b89c2d824 for search ID search-1745528180-0ead83b0
2025-04-24 20:56:23,164 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:23,168 - api.endpoints.system_messages - INFO - Updated system message sys_5c1ccef0-6f70-43bb-beb9-100b89c2d824 in database
2025-04-24 20:56:23,170 - ActionHandler_User5 - INFO - Successfully updated system message sys_5c1ccef0-6f70-43bb-beb9-100b89c2d824
2025-04-24 20:56:23,176 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:23,181 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_fe8d4c6d-dbf9-439d-92b6-7793fca1221b', 'timestamp': '2025-04-24T20:56:23.177197', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'web_search', 'content': '{"status": "complete", "message": "Search results for: common college majors\\n\\nSummary: Common college majors include business, health professions ... (1718 characters truncated) ... aduate students? Response: Postsecondary institutions within the United States, 1 conferred 3.0...\\n\\n", "timestamp": "2025-04-24T20:56:23.171036"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:24,196 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:24,202 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:24,207 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_d9d68591-3c56-40ce-93e1-d2ce39fbabc1', 'timestamp': '2025-04-24T20:56:24.202593', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:24.197227"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:24,212 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:24,212 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:24,213 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the favorite.
2025-04-24 20:56:24,213 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:56:24,215 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:56:24,216 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:56:24,216 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:24,217 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my favorite book?'
2025-04-24 20:56:24,217 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:24,217 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:24,218 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:24,220 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:24,220 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:26,283 - CtxMemMgr_User5 - INFO - Stored turn c67c7b19-d1dc-4be3-aa19-4d1ae6b8492e for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:26,284 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:26,285 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:26,285 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3576 / 30000
2025-04-24 20:56:26,286 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:26,305 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:26,306 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:26,306 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:26,306 - CtxMemMgr_User5 - INFO - Stored turn e0a051e6-c464-4871-9bc7-82cb96cd0d46 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:26,306 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:26,307 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:26,307 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3582 / 30000
2025-04-24 20:56:26,307 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:26,317 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:26,317 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:26,317 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:58:00Z",
    "speaker": "User...
2025-04-24 20:56:27,337 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:27,343 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:27,347 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_5f0397eb-941d-4ae4-8aa1-6d08f489b07e', 'timestamp': '2025-04-24T20:56:27.343870', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:27.338090"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:27,350 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:27,350 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:27,351 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the favorite.
2025-04-24 20:56:27,351 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:56:27,353 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:56:27,354 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:56:27,354 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:27,354 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my favorite movie?'
2025-04-24 20:56:27,354 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:27,354 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:27,355 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:27,356 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:27,356 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:29,456 - CtxMemMgr_User5 - INFO - Stored turn a1754138-7062-4908-ac1c-802c78863bb5 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:29,457 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:29,457 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:29,458 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3588 / 30000
2025-04-24 20:56:29,458 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:29,475 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:29,476 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:29,476 - ActionHandler_User5 - INFO - Web search detected with pattern: \[SEARCH:\s*(.+?)\s*\]
2025-04-24 20:56:29,476 - ActionHandler_User5 - INFO - Extracted query: 'user's favorite movie'
2025-04-24 20:56:29,477 - ActionHandler_User5 - INFO - WEB SEARCH signal detected for query: 'user's favorite movie' (Session: 0ead83b0-6f78-418e-8159-68f6210d9791)
2025-04-24 20:56:29,477 - CtxMemMgr_User5 - INFO - Stored turn d207b2b6-1a35-48a9-b036-65152a5eccde for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:29,477 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:29,477 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:29,478 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3594 / 30000
2025-04-24 20:56:29,478 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:29,490 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:29,490 - ActionHandler_User5 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745528189-0ead83b0) ***
2025-04-24 20:56:29,491 - ActionHandler_User5 - INFO - Storing search status for session 0ead83b0-6f78-418e-8159-68f6210d9791: active
2025-04-24 20:56:29,494 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:29,497 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_e497eba7-87e4-432d-b3be-0b55885ac76d', 'timestamp': '2025-04-24T20:56:29.494605', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'web_search', 'content': '{"status": "active", "message": "Searching the web for: user\'s favorite movie", "search_id": "search-1745528189-0ead83b0", "timestamp": "2025-04-24T20:56:29.491008"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:29,497 - ActionHandler_User5 - INFO - Stored system message ID sys_e497eba7-87e4-432d-b3be-0b55885ac76d for search ID search-1745528189-0ead83b0
2025-04-24 20:56:29,497 - ActionHandler_User5 - INFO - Successfully posted system message to dedicated API for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:29,498 - ActionHandler_User5 - INFO - EXECUTING WEB SEARCH for query: 'user's favorite movie'
2025-04-24 20:56:29,498 - ActionHandler_User5 - INFO - TAVILY_AVAILABLE = True
2025-04-24 20:56:29,498 - ActionHandler_User5 - INFO - TAVILY_API_KEY from env: Present
2025-04-24 20:56:29,498 - ActionHandler_User5 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-24 20:56:29,498 - ActionHandler_User5 - INFO - Calling perform_search function for query: 'user's favorite movie'
2025-04-24 20:56:29,498 - components.action_handler - INFO - Performing Tavily search for query: 'user's favorite movie'
2025-04-24 20:56:29,499 - components.action_handler - INFO - Calling Tavily search API with query: 'user's favorite movie'
2025-04-24 20:56:31,778 - components.action_handler - INFO - Tavily search response: {'query': "user's favorite movie", 'follow_up_questions': None, 'answer': '"Shrek" is a favorite among Gen Z, while "Wicked" was USA TODAY readers\' favorite in 2025. "Avengers: Endgame" is popular am...
2025-04-24 20:56:31,778 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: user's favorite movie

Summary: "Shrek" is a favorite among Gen Z, while "Wicked" was USA TODAY readers' favorite in 2025. "Avengers: Endgame" is popular among newer generations. "...
2025-04-24 20:56:31,779 - ActionHandler_User5 - INFO - perform_search function call completed successfully
2025-04-24 20:56:31,779 - ActionHandler_User5 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-24 20:56:31,779 - ActionHandler_User5 - INFO - SEARCH RESULTS LENGTH: 1990
2025-04-24 20:56:31,779 - ActionHandler_User5 - INFO - Received valid web search results (first 100 chars): Search results for: user's favorite movie

Summary: "Shrek" is a favorite among Gen Z, while "Wicked...
2025-04-24 20:56:31,780 - ActionHandler_User5 - INFO - Updating system message sys_e497eba7-87e4-432d-b3be-0b55885ac76d for search ID search-1745528189-0ead83b0
2025-04-24 20:56:31,783 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:31,785 - api.endpoints.system_messages - INFO - Updated system message sys_e497eba7-87e4-432d-b3be-0b55885ac76d in database
2025-04-24 20:56:31,787 - ActionHandler_User5 - INFO - Successfully updated system message sys_e497eba7-87e4-432d-b3be-0b55885ac76d
2025-04-24 20:56:31,791 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:31,798 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_28180423-18a2-4794-a813-2404c3fa7455', 'timestamp': '2025-04-24T20:56:31.792065', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'web_search', 'content': '{"status": "complete", "message": "Search results for: user\'s favorite movie\\n\\nSummary: \\"Shrek\\" is a favorite among Gen Z, while \\"Wicked\\" ... (1867 characters truncated) ...  once a month. The list is ranked by the number of fans on Letterboxd. A \\"fan\\" is a member ...\\n\\n", "timestamp": "2025-04-24T20:56:31.787529"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:32,815 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:32,821 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:32,828 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_3c7246dd-1f42-4587-9254-7f299d51c5de', 'timestamp': '2025-04-24T20:56:32.821951', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:32.816209"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:32,832 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:32,833 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:32,834 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:32,834 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my career goal is?'
2025-04-24 20:56:32,834 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:32,835 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:32,835 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:32,836 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:32,837 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:34,924 - CtxMemMgr_User5 - INFO - Stored turn 932e0738-e1fb-43df-996d-5fa987fcd110 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:34,925 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:34,926 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:34,927 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3603 / 30000
2025-04-24 20:56:34,928 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:34,942 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:34,942 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:34,943 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:34,943 - CtxMemMgr_User5 - INFO - Stored turn cd7a7c31-e8c4-4b48-9510-8e0605835789 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:34,943 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:34,944 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:34,944 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3612 / 30000
2025-04-24 20:56:34,944 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:34,956 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:34,957 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:34,957 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:57:00Z",
    "speaker": "User...
2025-04-24 20:56:35,973 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:35,979 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:35,984 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_54977cb0-a98a-42c8-a1c5-d52d5fe516e8', 'timestamp': '2025-04-24T20:56:35.979861', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:35.975106"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:35,987 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:35,988 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:35,988 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the biggest.
2025-04-24 20:56:35,989 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:56:35,990 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:56:35,991 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:56:35,992 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:35,992 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my biggest fear?'
2025-04-24 20:56:35,992 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:35,993 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:35,993 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:35,994 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:35,995 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:38,311 - CtxMemMgr_User5 - INFO - Stored turn 418c0e7d-0de4-4934-b537-ee1a78741794 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:38,311 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:38,312 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:38,313 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3618 / 30000
2025-04-24 20:56:38,313 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:38,332 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:38,332 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:38,332 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:38,332 - CtxMemMgr_User5 - INFO - Stored turn 91b21381-00b3-409a-b1e7-20a6c5ffcce4 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:38,332 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:38,332 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:38,333 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3624 / 30000
2025-04-24 20:56:38,333 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:38,338 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:38,338 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:38,338 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:58:00Z",
    "speaker": "User...
2025-04-24 20:56:39,361 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:39,371 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:39,377 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_abaab1de-fad0-493f-9066-aebfbfe4827e', 'timestamp': '2025-04-24T20:56:39.372244', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:39.363196"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:39,381 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:39,382 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:39,385 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the favorite.
2025-04-24 20:56:39,385 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:56:39,388 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:56:39,388 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:56:39,389 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:39,389 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my favorite season?'
2025-04-24 20:56:39,389 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:39,389 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:39,389 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:39,391 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:39,391 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:41,543 - CtxMemMgr_User5 - INFO - Stored turn 376d5629-629a-4002-937d-c4d5a2a8dac1 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:41,544 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:41,545 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:41,546 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3630 / 30000
2025-04-24 20:56:41,546 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:41,563 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:41,563 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:41,564 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:41,564 - CtxMemMgr_User5 - INFO - Stored turn 92cb0736-d67b-44df-88e0-a52a03cc2509 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:41,564 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:41,564 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:41,565 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3636 / 30000
2025-04-24 20:56:41,566 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:41,579 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:41,579 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:41,580 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:58:00Z",
    "speaker": "User...
2025-04-24 20:56:42,602 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:42,609 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:42,614 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_82d39757-aa67-48d8-861e-e3681b8ca38b', 'timestamp': '2025-04-24T20:56:42.610247', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:42.605776"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:42,616 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:42,616 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:42,617 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the allergies.
2025-04-24 20:56:42,617 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 20:56:42,618 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 20:56:42,618 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 20:56:42,618 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:42,618 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my allergies?'
2025-04-24 20:56:42,618 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:42,618 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:42,619 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:42,619 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:42,619 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:44,613 - CtxMemMgr_User5 - INFO - Stored turn a3c12ae4-5bc1-4a85-ac65-0d00faa42089 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:44,613 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:44,613 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:44,614 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3641 / 30000
2025-04-24 20:56:44,614 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:44,628 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:44,629 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:44,629 - ActionHandler_User5 - INFO - Web search detected with pattern: \[SEARCH:\s*(.+?)\s*\]
2025-04-24 20:56:44,629 - ActionHandler_User5 - INFO - Extracted query: 'user allergies'
2025-04-24 20:56:44,629 - ActionHandler_User5 - INFO - WEB SEARCH signal detected for query: 'user allergies' (Session: 0ead83b0-6f78-418e-8159-68f6210d9791)
2025-04-24 20:56:44,630 - CtxMemMgr_User5 - INFO - Stored turn bb262372-cce2-45ba-9aa4-efc4521cbc11 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:44,630 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:44,630 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:44,630 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3646 / 30000
2025-04-24 20:56:44,631 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:44,644 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:44,645 - ActionHandler_User5 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745528204-0ead83b0) ***
2025-04-24 20:56:44,645 - ActionHandler_User5 - INFO - Storing search status for session 0ead83b0-6f78-418e-8159-68f6210d9791: active
2025-04-24 20:56:44,647 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:44,649 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_165cde09-5e37-491a-9054-cd13d3dfb6f9', 'timestamp': '2025-04-24T20:56:44.647346', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'web_search', 'content': '{"status": "active", "message": "Searching the web for: user allergies", "search_id": "search-1745528204-0ead83b0", "timestamp": "2025-04-24T20:56:44.645210"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:44,649 - ActionHandler_User5 - INFO - Stored system message ID sys_165cde09-5e37-491a-9054-cd13d3dfb6f9 for search ID search-1745528204-0ead83b0
2025-04-24 20:56:44,649 - ActionHandler_User5 - INFO - Successfully posted system message to dedicated API for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:44,649 - ActionHandler_User5 - INFO - EXECUTING WEB SEARCH for query: 'user allergies'
2025-04-24 20:56:44,649 - ActionHandler_User5 - INFO - TAVILY_AVAILABLE = True
2025-04-24 20:56:44,649 - ActionHandler_User5 - INFO - TAVILY_API_KEY from env: Present
2025-04-24 20:56:44,650 - ActionHandler_User5 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-24 20:56:44,650 - ActionHandler_User5 - INFO - Calling perform_search function for query: 'user allergies'
2025-04-24 20:56:44,650 - components.action_handler - INFO - Performing Tavily search for query: 'user allergies'
2025-04-24 20:56:44,650 - components.action_handler - INFO - Calling Tavily search API with query: 'user allergies'
2025-04-24 20:56:47,465 - components.action_handler - INFO - Tavily search response: {'query': 'user allergies', 'follow_up_questions': None, 'answer': 'Allergies occur when the immune system overreacts to harmless substances. Symptoms range from mild irritation to severe reactions li...
2025-04-24 20:56:47,466 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: user allergies

Summary: Allergies occur when the immune system overreacts to harmless substances. Symptoms range from mild irritation to severe reactions like anaphylaxis. Treatme...
2025-04-24 20:56:47,466 - ActionHandler_User5 - INFO - perform_search function call completed successfully
2025-04-24 20:56:47,467 - ActionHandler_User5 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-24 20:56:47,467 - ActionHandler_User5 - INFO - SEARCH RESULTS LENGTH: 2000
2025-04-24 20:56:47,468 - ActionHandler_User5 - INFO - Received valid web search results (first 100 chars): Search results for: user allergies

Summary: Allergies occur when the immune system overreacts to ha...
2025-04-24 20:56:47,468 - ActionHandler_User5 - INFO - Updating system message sys_165cde09-5e37-491a-9054-cd13d3dfb6f9 for search ID search-1745528204-0ead83b0
2025-04-24 20:56:47,472 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:47,475 - api.endpoints.system_messages - INFO - Updated system message sys_165cde09-5e37-491a-9054-cd13d3dfb6f9 in database
2025-04-24 20:56:47,477 - ActionHandler_User5 - INFO - Successfully updated system message sys_165cde09-5e37-491a-9054-cd13d3dfb6f9
2025-04-24 20:56:47,482 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:47,486 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_2baeb254-76b2-4a2c-8a8e-dc6189202f6c', 'timestamp': '2025-04-24T20:56:47.483159', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'web_search', 'content': '{"status": "complete", "message": "Search results for: user allergies\\n\\nSummary: Allergies occur when the immune system overreacts to harmless sub ... (1836 characters truncated) ...  mild, moderate, and severe categories of allergy symptoms. This article will look at mild, mod...\\n\\n", "timestamp": "2025-04-24T20:56:47.478325"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:48,499 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:48,505 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:48,512 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_ee50e7f9-ee50-4956-8242-c41082acfe7e', 'timestamp': '2025-04-24T20:56:48.505785', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:48.501242"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:48,517 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:48,517 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:48,518 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:48,518 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my hidden talent is?'
2025-04-24 20:56:48,519 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:48,519 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:48,519 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:48,521 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:48,521 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:51,373 - CtxMemMgr_User5 - INFO - Stored turn 2391bd04-1a2d-49c8-b488-d7d5be539be3 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:51,373 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:51,374 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:51,375 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3656 / 30000
2025-04-24 20:56:51,375 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:51,394 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:51,394 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:51,395 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:51,395 - CtxMemMgr_User5 - INFO - Stored turn 76d63185-c749-48bc-9c70-f67a0b3787d6 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:51,395 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:51,395 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:51,396 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3666 / 30000
2025-04-24 20:56:51,396 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:51,406 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:51,406 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:51,406 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:57:00Z",
    "speaker": "User...
2025-04-24 20:56:52,426 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:52,433 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:52,439 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_be5c3ef1-76bb-4714-b9a6-6bdb7b025082', 'timestamp': '2025-04-24T20:56:52.434266', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:52.426941"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:52,444 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:52,444 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:52,445 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:52,445 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my role model is?'
2025-04-24 20:56:52,445 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:52,445 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:52,446 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:52,447 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:52,447 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:54,351 - CtxMemMgr_User5 - INFO - Stored turn e3ee1f95-850b-4adf-87cd-fdbbe38e78ff for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:54,352 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:54,352 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:54,353 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3675 / 30000
2025-04-24 20:56:54,354 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:54,372 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:54,372 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:54,372 - ActionHandler_User5 - INFO - Web search detected with pattern: \[SEARCH:\s*(.+?)\s*\]
2025-04-24 20:56:54,373 - ActionHandler_User5 - INFO - Extracted query: 'common role models and their characteristics'
2025-04-24 20:56:54,373 - ActionHandler_User5 - INFO - WEB SEARCH signal detected for query: 'common role models and their characteristics' (Session: 0ead83b0-6f78-418e-8159-68f6210d9791)
2025-04-24 20:56:54,373 - CtxMemMgr_User5 - INFO - Stored turn 4d1384cc-b1f1-45f6-9f10-767b1f585211 for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:54,373 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:54,374 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:54,374 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3684 / 30000
2025-04-24 20:56:54,374 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:54,385 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:54,385 - ActionHandler_User5 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745528214-0ead83b0) ***
2025-04-24 20:56:54,385 - ActionHandler_User5 - INFO - Storing search status for session 0ead83b0-6f78-418e-8159-68f6210d9791: active
2025-04-24 20:56:54,388 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:54,391 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_52a4492a-799a-4e68-ba3b-7b7019ec326f', 'timestamp': '2025-04-24T20:56:54.389020', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'web_search', 'content': '{"status": "active", "message": "Searching the web for: common role models and their characteristics", "search_id": "search-1745528214-0ead83b0", "timestamp": "2025-04-24T20:56:54.385667"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:54,391 - ActionHandler_User5 - INFO - Stored system message ID sys_52a4492a-799a-4e68-ba3b-7b7019ec326f for search ID search-1745528214-0ead83b0
2025-04-24 20:56:54,392 - ActionHandler_User5 - INFO - Successfully posted system message to dedicated API for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:54,392 - ActionHandler_User5 - INFO - EXECUTING WEB SEARCH for query: 'common role models and their characteristics'
2025-04-24 20:56:54,392 - ActionHandler_User5 - INFO - TAVILY_AVAILABLE = True
2025-04-24 20:56:54,392 - ActionHandler_User5 - INFO - TAVILY_API_KEY from env: Present
2025-04-24 20:56:54,392 - ActionHandler_User5 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-24 20:56:54,392 - ActionHandler_User5 - INFO - Calling perform_search function for query: 'common role models and their characteristics'
2025-04-24 20:56:54,392 - components.action_handler - INFO - Performing Tavily search for query: 'common role models and their characteristics'
2025-04-24 20:56:54,392 - components.action_handler - INFO - Calling Tavily search API with query: 'common role models and their characteristics'
2025-04-24 20:56:56,713 - components.action_handler - INFO - Tavily search response: {'query': 'common role models and their characteristics', 'follow_up_questions': None, 'answer': 'Common role models include parents, teachers, and successful professionals. They typically exhibit tra...
2025-04-24 20:56:56,714 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: common role models and their characteristics

Summary: Common role models include parents, teachers, and successful professionals. They typically exhibit traits like professionalis...
2025-04-24 20:56:56,714 - ActionHandler_User5 - INFO - perform_search function call completed successfully
2025-04-24 20:56:56,715 - ActionHandler_User5 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-24 20:56:56,715 - ActionHandler_User5 - INFO - SEARCH RESULTS LENGTH: 2046
2025-04-24 20:56:56,716 - ActionHandler_User5 - INFO - Received valid web search results (first 100 chars): Search results for: common role models and their characteristics

Summary: Common role models includ...
2025-04-24 20:56:56,716 - ActionHandler_User5 - INFO - Updating system message sys_52a4492a-799a-4e68-ba3b-7b7019ec326f for search ID search-1745528214-0ead83b0
2025-04-24 20:56:56,720 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:56,723 - api.endpoints.system_messages - INFO - Updated system message sys_52a4492a-799a-4e68-ba3b-7b7019ec326f in database
2025-04-24 20:56:56,725 - ActionHandler_User5 - INFO - Successfully updated system message sys_52a4492a-799a-4e68-ba3b-7b7019ec326f
2025-04-24 20:56:56,729 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:56,734 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_3e59b464-4893-4cf0-a654-d906f2781c1c', 'timestamp': '2025-04-24T20:56:56.729848', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'web_search', 'content': '{"status": "complete", "message": "Search results for: common role models and their characteristics\\n\\nSummary: Common role models include parents, ... (1894 characters truncated) ... brities \\u2013 The historical underrepresentation of people of color in media makes emerging m...\\n\\n", "timestamp": "2025-04-24T20:56:56.725670"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:57,749 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:57,755 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 20:56:57,761 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_29365b51-0f1d-4886-ac5e-76e640c8da21', 'timestamp': '2025-04-24T20:56:57.755987', 'session_id': '0ead83b0-6f78-418e-8159-68f6210d9791', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T20:56:57.750781"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 20:56:57,765 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:57,765 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 20:56:57,766 - components.prompt_builder - INFO - Constructing prompt for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5, depth 0
2025-04-24 20:56:57,767 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my favorite musician, what was it?'
2025-04-24 20:56:57,767 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 20:56:57,767 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 20:56:57,767 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 20:56:57,769 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 20:56:57,769 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 20:56:59,770 - CtxMemMgr_User5 - INFO - Stored turn 961ffb5b-d12c-4efb-a8c4-0bb999d7220d for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:59,770 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:59,771 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:59,772 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3698 / 30000
2025-04-24 20:56:59,772 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:59,786 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:59,787 - ActionHandler_User5 - INFO - Processing LLM response for session 0ead83b0-6f78-418e-8159-68f6210d9791, user 5
2025-04-24 20:56:59,787 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 0ead83b0-6f78-418e-8159-68f6210d9791).
2025-04-24 20:56:59,787 - CtxMemMgr_User5 - INFO - Stored turn c7ce70c0-979c-4f65-b236-0da0646e3d4e for active session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:59,787 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 0ead83b0-6f78-418e-8159-68f6210d9791: '...'
2025-04-24 20:56:59,787 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 20:56:59,788 - CtxMemMgr_User5 - INFO - Session 0ead83b0-6f78-418e-8159-68f6210d9791: Active history token count ~3712 / 30000
2025-04-24 20:56:59,788 - CtxMemMgr_User5 - INFO - Saving active session context for 0ead83b0-6f78-418e-8159-68f6210d9791 to /app/data/sessions/5/0ead83b0-6f78-418e-8159-68f6210d9791/context.json
2025-04-24 20:56:59,797 - CtxMemMgr_User5 - INFO - Successfully saved context for session 0ead83b0-6f78-418e-8159-68f6210d9791
2025-04-24 20:56:59,797 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 20:56:59,798 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T20:58:00Z",
    "speaker": "User...
2025-04-24 21:12:09,643 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:09,644 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:09,645 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:12:09,645 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:12:09,645 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:12:09,648 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:09,649 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:12:09,649 - components.prompt_builder - INFO - PromptBuilder initialized for user 5
2025-04-24 21:12:09,649 - components.action_handler - INFO - ActionHandler initialized for user 5
2025-04-24 21:12:09,650 - components.action_handler - INFO - ActionHandler initialized for user 5
2025-04-24 21:12:09,650 - ConvMgr_User5 - INFO - ConversationManager initialized for User ID: 5, Session ID: 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:09,650 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 21:12:09,650 - managers.conversation_manager - INFO - Initializing Docker LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 21:12:09,655 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:09,660 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_50faea21-7a43-4354-9aea-5687be0b93fc', 'timestamp': '2025-04-24T21:12:09.655859', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:09.650901"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:09,664 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:09,664 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:09,665 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:09,665 - CtxMemMgr_User5 - WARNING - Cannot get context summary: No active session.
2025-04-24 21:12:09,665 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 1: I want to tell you a fact about my favorite color. My favorite color is cerulean blue. Please remember this specific fact.'
2025-04-24 21:12:09,666 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:09,666 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:09,666 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:09,666 - CtxMemMgr_User5 - WARNING - Cannot get formatted history: No active session.
2025-04-24 21:12:09,667 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:09,667 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:12,077 - CtxMemMgr_User5 - INFO - Loading session 75e46832-e724-40b9-bd75-053a6987191b for processing assistant message
2025-04-24 21:12:12,077 - CtxMemMgr_User5 - INFO - Loading session context for 75e46832-e724-40b9-bd75-053a6987191b from /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:12,079 - CtxMemMgr_User5 - INFO - Context file /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json not found. Initializing empty context for new session 75e46832-e724-40b9-bd75-053a6987191b.
2025-04-24 21:12:12,079 - CtxMemMgr_User5 - INFO - Stored turn 69a750aa-ab75-4136-b9c7-0195ec6258b7 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:12,079 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:12,080 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:12,080 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~32 / 30000
2025-04-24 21:12:12,080 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:12,082 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:12,082 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:12,082 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:12,082 - CtxMemMgr_User5 - INFO - Stored turn 132fbaa7-ce96-4a5c-ba84-d6237b11a8f2 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:12,082 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:12,083 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:12,083 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~64 / 30000
2025-04-24 21:12:12,083 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:12,084 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:12,084 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:12,085 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:12:13,101 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:13,111 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:13,117 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_50f2eef6-aed9-4581-8cc0-9602f1f115a9', 'timestamp': '2025-04-24T21:12:13.112190', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:13.106314"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:13,121 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:13,121 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:13,122 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:13,123 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 2: I want to tell you a fact about my birthday. My birthday is March 15. Please remember this specific fact.'
2025-04-24 21:12:13,123 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:13,124 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:13,124 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:13,125 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:13,126 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:15,528 - CtxMemMgr_User5 - INFO - Stored turn 384f6ac1-9b2c-467c-843c-84f24a1a475e for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:15,529 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:15,530 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:15,530 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~92 / 30000
2025-04-24 21:12:15,531 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:15,533 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:15,534 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:15,534 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:15,535 - CtxMemMgr_User5 - INFO - Stored turn ceb45e3f-e88a-4ac3-96fe-98916c0400ab for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:15,536 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:15,536 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:15,537 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~120 / 30000
2025-04-24 21:12:15,538 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:15,540 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:15,540 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:15,541 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:15:00Z",
    "speaker": "User...
2025-04-24 21:12:16,557 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:16,564 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:16,569 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_9dc94e6b-060e-4fda-8da3-e0cd6e771148', 'timestamp': '2025-04-24T21:12:16.564562', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:16.558205"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:16,573 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:16,573 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:16,574 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:16,575 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 3: I want to tell you a fact about my pet. My pet is a golden retriever named Max. Please remember this specific fact.'
2025-04-24 21:12:16,575 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:16,575 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:16,575 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:16,577 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:16,577 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:18,770 - CtxMemMgr_User5 - INFO - Stored turn 01ab4745-abb7-4f3a-832a-a4fc73f7a3ab for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:18,770 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:18,771 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:18,771 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~150 / 30000
2025-04-24 21:12:18,771 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:18,773 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:18,773 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:18,773 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:18,774 - CtxMemMgr_User5 - INFO - Stored turn c6601623-126d-4861-ad11-48f677ceb2a2 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:18,774 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:18,775 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:18,775 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~180 / 30000
2025-04-24 21:12:18,775 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:18,776 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:18,776 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:18,777 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:19,785 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:19,792 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:19,797 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_b1affcfd-29a9-4693-ad60-c8e451a4682a', 'timestamp': '2025-04-24T21:12:19.792699', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:19.786801"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:19,800 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:19,801 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:19,802 - ConvMgr_User5 - INFO - Pattern match extracted: User enjoys collecting vintage postcards.
2025-04-24 21:12:19,802 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:12:19,805 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:12:19,806 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:12:19,806 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:19,806 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 4: I want to tell you a fact about my hobby. My hobby is collecting vintage postcards. Please remember this specific fact.'
2025-04-24 21:12:19,806 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:19,806 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:19,807 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:19,809 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:19,809 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:22,050 - CtxMemMgr_User5 - INFO - Stored turn 2b48bc5e-b8ad-4a77-a6a5-517cd564865c for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:22,050 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:22,050 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 21:12:22,051 - CtxMemMgr_User5 - INFO - Added hobby fact to user memory: User enjoys collecting vintage postcards.
2025-04-24 21:12:22,053 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:12:22,054 - CtxMemMgr_User5 - INFO - Successfully saved 1 new facts to database.
2025-04-24 21:12:22,055 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:22,055 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~211 / 30000
2025-04-24 21:12:22,055 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:22,058 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:22,059 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:22,059 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:22,060 - CtxMemMgr_User5 - INFO - Stored turn a552ae6f-52e7-444f-aa55-a9a8d25a4cc4 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:22,060 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:22,061 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 21:12:22,061 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:22,062 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~242 / 30000
2025-04-24 21:12:22,063 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:22,068 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:22,069 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:22,070 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:23,087 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:23,093 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:23,099 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_e78401dc-debf-41ad-a255-43469b64352c', 'timestamp': '2025-04-24T21:12:23.093995', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:23.088761"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:23,102 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:23,103 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:23,104 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:23,104 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 5: I want to tell you a fact about my hometown. My hometown is Springfield, Illinois. Please remember this specific fact.'
2025-04-24 21:12:23,104 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:23,104 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:23,104 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:23,106 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:23,107 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:25,382 - CtxMemMgr_User5 - INFO - Stored turn 75e9b334-c804-4e80-82d0-15583ef53467 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:25,383 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:25,383 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:25,384 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~273 / 30000
2025-04-24 21:12:25,384 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:25,386 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:25,386 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:25,386 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:25,387 - CtxMemMgr_User5 - INFO - Stored turn 0bf20a06-ce08-437d-988c-c33cbbc6de51 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:25,387 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:25,388 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:25,388 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~304 / 30000
2025-04-24 21:12:25,388 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:25,391 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:25,392 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:25,392 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:26,412 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:26,418 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:26,422 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_8a9d2687-8429-43e0-b349-504c099356d9', 'timestamp': '2025-04-24T21:12:26.418516', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:26.412954"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:26,426 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:26,427 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:26,428 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:26,428 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 6: I want to tell you a fact about my favorite food. My favorite food is spicy Thai curry. Please remember this specific fact.'
2025-04-24 21:12:26,428 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:26,428 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:26,429 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:26,430 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:26,431 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:28,957 - CtxMemMgr_User5 - INFO - Stored turn 8bea7bd8-bb0b-4860-a758-a279ee6d0be4 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:28,958 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:28,958 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:28,959 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~336 / 30000
2025-04-24 21:12:28,959 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:28,964 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:28,964 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:28,965 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:28,965 - CtxMemMgr_User5 - INFO - Stored turn a671a351-b9cb-42fc-8e87-5e0f74b48d4c for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:28,965 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:28,966 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:28,966 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~368 / 30000
2025-04-24 21:12:28,966 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:28,969 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:28,969 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:28,970 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:30,002 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:30,008 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:30,013 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_12d233ef-7c3f-4ccf-8ef2-83969c2a3301', 'timestamp': '2025-04-24T21:12:30.008534', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:30.002961"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:30,017 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:30,018 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:30,019 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:30,019 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 7: I want to tell you a fact about my first job. My first job is lifeguard at the community pool. Please remember this specific fact.'
2025-04-24 21:12:30,019 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:30,020 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:30,020 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:30,022 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:30,022 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:32,566 - CtxMemMgr_User5 - INFO - Stored turn 3b3200d5-efd4-44ec-9fbb-13899e7b7f4b for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:32,566 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:32,566 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:32,567 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~402 / 30000
2025-04-24 21:12:32,567 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:32,570 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:32,571 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:32,571 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:32,571 - CtxMemMgr_User5 - INFO - Stored turn b086daaa-56af-43b2-9392-84a8c218bd68 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:32,571 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:32,572 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:32,572 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~436 / 30000
2025-04-24 21:12:32,573 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:32,575 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:32,575 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:32,576 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:33,600 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:33,606 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:33,611 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_e3c515ec-30cd-4d6c-ac58-91a1bfa170f3', 'timestamp': '2025-04-24T21:12:33.607363', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:33.602567"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:33,615 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:33,615 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:33,616 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:33,616 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 8: I want to tell you a fact about my dream vacation. My dream vacation is touring the ancient temples of Japan. Please remember this specific fact.'
2025-04-24 21:12:33,617 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:33,618 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:33,618 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:33,620 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:33,620 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:36,117 - CtxMemMgr_User5 - INFO - Stored turn 36259742-eb43-4e0e-8bef-f2d441209400 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:36,118 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:36,118 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:36,119 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~474 / 30000
2025-04-24 21:12:36,119 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:36,123 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:36,123 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:36,124 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:36,126 - CtxMemMgr_User5 - INFO - Stored turn 9a1ec0e4-b709-493b-8404-9d141a3be472 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:36,126 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:36,127 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:36,127 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~512 / 30000
2025-04-24 21:12:36,127 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:36,131 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:36,131 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:36,133 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:37,149 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:37,154 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:37,159 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_7c364471-b2f8-4a5c-809e-9236f30ba217', 'timestamp': '2025-04-24T21:12:37.155412', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:37.150687"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:37,163 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:37,163 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:37,164 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:37,164 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 9: I want to tell you a fact about my best friend. My best friend is Jamie, who they've known since kindergarten. Please remember this specific fact.'
2025-04-24 21:12:37,164 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:37,165 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:37,165 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:37,166 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:37,166 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:39,585 - CtxMemMgr_User5 - INFO - Stored turn 6bec6cb2-8f02-4491-a85f-385773ab3271 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:39,585 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:39,586 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:39,586 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~550 / 30000
2025-04-24 21:12:39,587 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:39,590 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:39,590 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:39,591 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:39,591 - CtxMemMgr_User5 - INFO - Stored turn 83db61f9-c657-401d-8cc6-7ce26786ea14 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:39,591 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:39,591 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:39,592 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~588 / 30000
2025-04-24 21:12:39,592 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:39,595 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:39,595 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:39,596 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:40,612 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:40,618 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:40,625 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_b397eb6f-e1c6-4c67-8771-74020af2bf8c', 'timestamp': '2025-04-24T21:12:40.619046', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:40.613762"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:40,629 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:40,629 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:40,630 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:40,630 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 10: I want to tell you a fact about my lucky number. My lucky number is seventeen. Please remember this specific fact.'
2025-04-24 21:12:40,631 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:40,631 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:40,631 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:40,633 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:40,633 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:42,883 - CtxMemMgr_User5 - INFO - Stored turn deb8ad99-0db4-4047-9119-69f67640802b for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:42,883 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:42,884 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:42,884 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~618 / 30000
2025-04-24 21:12:42,885 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:42,890 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:42,890 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:42,890 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:42,891 - CtxMemMgr_User5 - INFO - Stored turn 21d6e8b2-f7d4-43a4-bf5d-50f51fccb2b3 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:42,891 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:42,891 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:42,892 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~648 / 30000
2025-04-24 21:12:42,892 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:42,897 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:42,897 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:42,898 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:43,921 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:43,926 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:43,931 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_0397f0a4-6b7e-45e5-8b68-3249e62fdfc9', 'timestamp': '2025-04-24T21:12:43.926662', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:43.922293"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:43,935 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:43,935 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:43,936 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:43,937 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 11: I want to tell you a fact about my college major. My college major is Environmental Science. Please remember this specific fact.'
2025-04-24 21:12:43,937 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:43,937 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:43,937 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:43,939 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:43,940 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:46,160 - CtxMemMgr_User5 - INFO - Stored turn a281d506-5588-4cd6-89cc-3893ec664c48 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:46,160 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:46,161 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:46,161 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~682 / 30000
2025-04-24 21:12:46,161 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:46,166 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:46,166 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:46,167 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:46,167 - CtxMemMgr_User5 - INFO - Stored turn ed1a2903-70dd-413f-8e82-8ac851125319 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:46,168 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:46,168 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:46,168 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~716 / 30000
2025-04-24 21:12:46,168 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:46,173 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:46,174 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:46,174 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:47,193 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:47,201 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:47,208 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_f9fef8a4-9a06-43f7-809e-40a34343e66b', 'timestamp': '2025-04-24T21:12:47.202314', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:47.194256"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:47,212 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:47,212 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:47,213 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses book for the Name.
2025-04-24 21:12:47,214 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:12:47,215 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:12:47,216 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:12:47,216 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:47,217 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 12: I want to tell you a fact about my favorite book. My favorite book is The Name of the Wind. Please remember this specific fact.'
2025-04-24 21:12:47,217 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:47,217 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:47,217 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:47,219 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:47,219 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:49,682 - CtxMemMgr_User5 - INFO - Stored turn 7e5ecb2b-7db2-45af-b810-1f04711a643e for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:49,682 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:49,683 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:49,683 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~750 / 30000
2025-04-24 21:12:49,684 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:49,688 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:49,688 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:49,689 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:49,689 - CtxMemMgr_User5 - INFO - Stored turn 2af78175-adb4-4b37-9c3c-589319e5ed81 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:49,689 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:49,690 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:49,690 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~784 / 30000
2025-04-24 21:12:49,690 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:49,693 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:49,693 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:49,694 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:50,706 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:50,712 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:50,719 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_b11de065-455a-47fd-aa5e-6d24557e0a0a', 'timestamp': '2025-04-24T21:12:50.713100', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:50.707103"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:50,723 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:50,723 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:50,724 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses movie for the Shawshank.
2025-04-24 21:12:50,724 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:12:50,726 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:12:50,726 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:12:50,727 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:50,727 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 13: I want to tell you a fact about my favorite movie. My favorite movie is The Shawshank Redemption. Please remember this specific fact.'
2025-04-24 21:12:50,727 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:50,727 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:50,727 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:50,729 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:50,729 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:53,163 - CtxMemMgr_User5 - INFO - Stored turn acaa846f-a4ba-453b-901b-057b106e49be for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:53,163 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:53,164 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:53,164 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~819 / 30000
2025-04-24 21:12:53,164 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:53,168 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:53,168 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:53,168 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:53,169 - CtxMemMgr_User5 - INFO - Stored turn 6b02d05f-6e82-4ffd-82ce-5105c0e17a59 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:53,169 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:53,169 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:53,169 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~854 / 30000
2025-04-24 21:12:53,170 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:53,172 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:53,172 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:53,173 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:54,191 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:54,200 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:54,204 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_99cc58db-4fe2-4dbf-971a-08182c64b11a', 'timestamp': '2025-04-24T21:12:54.200700', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:54.192014"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:54,207 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:54,208 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:54,209 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:54,210 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 14: I want to tell you a fact about my career goal. My career goal is to start a sustainable technology company. Please remember this specific fact.'
2025-04-24 21:12:54,210 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:54,210 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:54,210 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:54,212 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:54,212 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:12:56,761 - CtxMemMgr_User5 - INFO - Stored turn db9471e9-1b0c-4fcf-8a56-4b0185e2a6a8 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:56,762 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:56,762 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:56,763 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~892 / 30000
2025-04-24 21:12:56,764 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:56,769 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:56,769 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:12:56,770 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:12:56,770 - CtxMemMgr_User5 - INFO - Stored turn 4b88e8a0-0c7b-436d-8d0f-57ffde1c1f92 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:56,771 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:12:56,771 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:12:56,771 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~930 / 30000
2025-04-24 21:12:56,772 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:12:56,775 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:12:56,775 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:12:56,776 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:12:57,789 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:57,793 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:12:57,796 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_4bfbc438-5d04-4fd1-98bb-9d650d8ba602', 'timestamp': '2025-04-24T21:12:57.793431', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:12:57.790010"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:12:57,798 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:57,798 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:12:57,798 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:12:57,798 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 15: I want to tell you a fact about my biggest fear. My biggest fear is public speaking. Please remember this specific fact.'
2025-04-24 21:12:57,799 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:12:57,799 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:12:57,799 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:12:57,799 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:12:57,799 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:00,187 - CtxMemMgr_User5 - INFO - Stored turn af90e153-8646-456d-b51b-772469c860ff for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:00,188 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:00,189 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:00,189 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~962 / 30000
2025-04-24 21:13:00,190 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:00,196 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:00,196 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:00,197 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:00,197 - CtxMemMgr_User5 - INFO - Stored turn 0c557400-13c3-43e7-907a-6f24c49bcc52 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:00,198 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:00,198 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:00,198 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~994 / 30000
2025-04-24 21:13:00,199 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:00,204 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:00,204 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:00,204 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:13:01,217 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:01,225 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:01,230 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_30b33623-4cb1-4f25-bdb8-8433aa93d8ce', 'timestamp': '2025-04-24T21:13:01.226325', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:01.218473"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:01,235 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:01,235 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:01,236 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:01,236 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 16: I want to tell you a fact about my favorite season. My favorite season is autumn when the leaves change. Please remember this specific fact.'
2025-04-24 21:13:01,236 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:01,236 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:01,237 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:01,238 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:01,238 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:03,435 - CtxMemMgr_User5 - INFO - Stored turn 65cb3451-0e7f-4d24-a65b-ca62bca1da41 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:03,436 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:03,436 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:03,437 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1031 / 30000
2025-04-24 21:13:03,437 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:03,453 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:03,453 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:03,453 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:03,454 - CtxMemMgr_User5 - INFO - Stored turn fd33a018-dd68-4b76-a1fd-37929598603c for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:03,454 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:03,454 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:03,455 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1068 / 30000
2025-04-24 21:13:03,455 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:03,461 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:03,461 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:03,461 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:04,471 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:04,476 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:04,481 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_57414d1d-98ba-464f-a404-c44e64dea4b6', 'timestamp': '2025-04-24T21:13:04.477088', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:04.471867"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:04,485 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:04,485 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:04,486 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:04,486 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 17: I want to tell you a fact about my allergies. My allergies is peanuts and bee stings. Please remember this specific fact.'
2025-04-24 21:13:04,487 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:04,487 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:04,487 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:04,489 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:04,489 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:06,932 - CtxMemMgr_User5 - INFO - Stored turn 1842592b-1444-48e6-b3ae-171489ddba7a for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:06,933 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:06,934 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:06,934 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1100 / 30000
2025-04-24 21:13:06,935 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:06,944 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:06,944 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:06,944 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:06,945 - CtxMemMgr_User5 - INFO - Stored turn 79287f8d-f4c1-4b52-a613-deb387ad4050 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:06,945 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:06,945 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:06,945 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1132 / 30000
2025-04-24 21:13:06,946 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:06,950 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:06,951 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:06,951 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-07-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:07,968 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:07,995 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:07,997 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_ca0f3aef-9703-4dbc-897a-9db45925fc2f', 'timestamp': '2025-04-24T21:13:07.995451', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:07.969863"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:07,999 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:07,999 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:08,000 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:08,000 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 18: I want to tell you a fact about my hidden talent. My hidden talent is can solve a Rubik's cube in under 2 minutes. Please remember this specific fact.'
2025-04-24 21:13:08,000 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:08,000 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:08,001 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:08,002 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:08,002 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:10,838 - CtxMemMgr_User5 - INFO - Stored turn ee96ccb1-2b75-41af-a7b7-5e8d4a49a0c2 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:10,838 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:10,839 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:10,839 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1171 / 30000
2025-04-24 21:13:10,839 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:10,847 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:10,848 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:10,848 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:10,848 - CtxMemMgr_User5 - INFO - Stored turn 5f982db4-e5d5-48e7-8e4f-7dd99313c35d for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:10,849 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:10,849 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:10,849 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1210 / 30000
2025-04-24 21:13:10,850 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:10,855 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:10,855 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:10,856 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:13:11,905 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:11,913 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:11,919 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_37c8bf9f-cf82-4884-9b54-d44cad1a7669', 'timestamp': '2025-04-24T21:13:11.914242', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:11.906986"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:11,925 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:11,925 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:11,926 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:11,926 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 19: I want to tell you a fact about my role model. My role model is their grandfather who was an inventor. Please remember this specific fact.'
2025-04-24 21:13:11,926 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:11,926 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:11,926 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:11,927 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:11,927 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:14,325 - CtxMemMgr_User5 - INFO - Stored turn 734c42a3-5308-4e15-88ab-6d368cbfce31 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:14,325 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:14,326 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:14,326 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1246 / 30000
2025-04-24 21:13:14,327 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:14,334 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:14,334 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:14,335 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:14,335 - CtxMemMgr_User5 - INFO - Stored turn 5efee10d-dd71-41b3-9390-2f48970948be for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:14,335 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:14,336 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:14,336 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1282 / 30000
2025-04-24 21:13:14,336 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:14,342 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:14,342 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:14,343 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:13:15,362 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:15,371 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:15,377 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_d831d680-c265-49a9-b590-21ab01623ed0', 'timestamp': '2025-04-24T21:13:15.371621', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:15.364272"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:15,381 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:15,381 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:15,382 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:15,382 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 20: I want to tell you a fact about my favorite musician. My favorite musician is Beethoven, especially his piano sonatas. Please remember this specific fact.'
2025-04-24 21:13:15,383 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:15,383 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:15,383 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:15,385 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:15,386 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:17,948 - CtxMemMgr_User5 - INFO - Stored turn 974a4eb3-e70b-4ad0-bbd6-55322b4a0591 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:17,948 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:17,949 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:17,949 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1322 / 30000
2025-04-24 21:13:17,950 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:17,959 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:17,960 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:17,960 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:17,960 - CtxMemMgr_User5 - INFO - Stored turn 73613fa5-f113-48a6-ad09-c31f35311fe2 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:17,961 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:17,961 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:17,961 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1362 / 30000
2025-04-24 21:13:17,962 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:17,967 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:17,968 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:17,968 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:18,982 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:18,989 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:18,995 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_a7dfd469-62ea-44f1-8c4c-68b368dc7770', 'timestamp': '2025-04-24T21:13:18.989470', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:18.984283"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:18,999 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:18,999 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:19,000 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:19,000 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 21: I want to tell you a fact about my favorite color. My favorite color is cerulean blue. Please remember this specific fact.'
2025-04-24 21:13:19,001 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:19,001 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:19,001 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:19,003 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:19,004 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:21,386 - CtxMemMgr_User5 - INFO - Stored turn 18432868-128c-4cfb-9dc6-e9123a723b0e for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:21,387 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:21,387 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:21,388 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1394 / 30000
2025-04-24 21:13:21,388 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:21,397 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:21,398 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:21,398 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:21,399 - CtxMemMgr_User5 - INFO - Stored turn ea90083a-1ec0-4650-97dd-458e3846e03b for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:21,399 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:21,399 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:21,400 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1426 / 30000
2025-04-24 21:13:21,400 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:21,406 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:21,407 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:21,407 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:22,432 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:22,438 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:22,446 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_4bb232a1-5d9a-40fe-92f0-baa0d9f57748', 'timestamp': '2025-04-24T21:13:22.439194', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:22.433749"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:22,450 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:22,450 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:22,451 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:22,451 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 22: I want to tell you a fact about my birthday. My birthday is March 15. Please remember this specific fact.'
2025-04-24 21:13:22,452 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:22,452 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:22,452 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:22,454 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:22,454 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:24,811 - CtxMemMgr_User5 - INFO - Stored turn fc2a0b55-cb77-43d9-b6cc-b214706b504a for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:24,811 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:24,812 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:24,813 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1454 / 30000
2025-04-24 21:13:24,813 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:24,820 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:24,820 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:24,821 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:24,821 - CtxMemMgr_User5 - INFO - Stored turn ea8f78e4-6ce3-4b1f-b3a7-60f3c89597f4 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:24,821 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:24,821 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:24,822 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1482 / 30000
2025-04-24 21:13:24,822 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:24,826 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:24,827 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:24,828 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:25,844 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:25,852 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:25,857 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_a98cd4be-911b-4360-afbb-88e1fbb809c2', 'timestamp': '2025-04-24T21:13:25.852997', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:25.845662"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:25,861 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:25,861 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:25,862 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:25,862 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 23: I want to tell you a fact about my pet. My pet is a golden retriever named Max. Please remember this specific fact.'
2025-04-24 21:13:25,862 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:25,862 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:25,863 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:25,864 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:25,864 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:28,040 - CtxMemMgr_User5 - INFO - Stored turn 58ae7b52-0354-4846-9b6a-ee621f897d9c for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:28,041 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:28,042 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:28,042 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1513 / 30000
2025-04-24 21:13:28,043 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:28,051 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:28,051 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:28,052 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:28,052 - CtxMemMgr_User5 - INFO - Stored turn 4df989eb-615f-4003-a009-c2fc70613d6f for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:28,052 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:28,052 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:28,053 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1544 / 30000
2025-04-24 21:13:28,053 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:28,060 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:28,060 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:28,061 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:29,080 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:29,088 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:29,094 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_a1fb3a82-ce34-4d18-b9a6-c461cf1d35c0', 'timestamp': '2025-04-24T21:13:29.089198', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:29.081709"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:29,100 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:29,100 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:29,101 - ConvMgr_User5 - INFO - Pattern match extracted: User enjoys collecting vintage postcards.
2025-04-24 21:13:29,102 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:13:29,105 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:13:29,106 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:13:29,106 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:29,107 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 24: I want to tell you a fact about my hobby. My hobby is collecting vintage postcards. Please remember this specific fact.'
2025-04-24 21:13:29,107 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:29,107 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:29,107 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:29,110 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:29,110 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:31,379 - CtxMemMgr_User5 - INFO - Stored turn df720bce-0029-4ba9-9f56-fab64cb102dd for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:31,379 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:31,380 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 21:13:31,380 - CtxMemMgr_User5 - INFO - Added hobby fact to user memory: User enjoys collecting vintage postcards.
2025-04-24 21:13:31,383 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:13:31,384 - CtxMemMgr_User5 - INFO - Successfully saved 1 new facts to database.
2025-04-24 21:13:31,385 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:31,385 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1576 / 30000
2025-04-24 21:13:31,386 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:31,395 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:31,396 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:31,396 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:31,396 - CtxMemMgr_User5 - INFO - Stored turn 37594db8-ea58-48b5-8b41-4aa52b1eef21 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:31,397 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:31,397 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 21:13:31,398 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:31,398 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1608 / 30000
2025-04-24 21:13:31,398 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:31,405 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:31,405 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:31,406 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:32,426 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:32,434 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:32,440 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_06f23233-6c4e-44d1-b130-fe83b6e0aa1e', 'timestamp': '2025-04-24T21:13:32.435648', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:32.427791"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:32,447 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:32,447 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:32,448 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:32,449 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 25: I want to tell you a fact about my hometown. My hometown is Springfield, Illinois. Please remember this specific fact.'
2025-04-24 21:13:32,449 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:32,449 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:32,450 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:32,452 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:32,453 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:34,780 - CtxMemMgr_User5 - INFO - Stored turn 015dc595-c26f-4412-9059-4bfbdc4569a1 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:34,780 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:34,781 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:34,781 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1639 / 30000
2025-04-24 21:13:34,781 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:34,789 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:34,790 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:34,790 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:34,790 - CtxMemMgr_User5 - INFO - Stored turn 2f3178d3-5fc0-4582-909f-b870edba7fbf for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:34,790 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:34,791 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:34,791 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1670 / 30000
2025-04-24 21:13:34,791 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:34,797 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:34,797 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:34,797 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:35,811 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:35,819 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:35,825 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_19af24c7-42d5-4d6f-810c-958652f117f7', 'timestamp': '2025-04-24T21:13:35.820442', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:35.812730"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:35,829 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:35,829 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:35,830 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:35,830 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 26: I want to tell you a fact about my favorite food. My favorite food is spicy Thai curry. Please remember this specific fact.'
2025-04-24 21:13:35,830 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:35,831 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:35,831 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:35,832 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:35,832 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:38,093 - CtxMemMgr_User5 - INFO - Stored turn bbb15ed5-b644-4a56-9edc-d9edda01db39 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:38,094 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:38,094 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:38,095 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1703 / 30000
2025-04-24 21:13:38,096 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:38,103 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:38,104 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:38,104 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:38,104 - CtxMemMgr_User5 - INFO - Stored turn 63cc8abb-3594-4b1c-ab5d-a240acc0d34a for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:38,105 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:38,105 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:38,106 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1736 / 30000
2025-04-24 21:13:38,106 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:38,112 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:38,113 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:38,113 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:39,131 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:39,139 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:39,145 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_82199310-d1fa-472d-903a-2afd7c6234d3', 'timestamp': '2025-04-24T21:13:39.139896', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:39.132814"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:39,148 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:39,149 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:39,150 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:39,150 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 27: I want to tell you a fact about my first job. My first job is lifeguard at the community pool. Please remember this specific fact.'
2025-04-24 21:13:39,150 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:39,151 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:39,152 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:39,154 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:39,154 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:41,501 - CtxMemMgr_User5 - INFO - Stored turn 1437222a-61b8-4256-af5b-014d6bdd055e for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:41,502 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:41,503 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:41,503 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1770 / 30000
2025-04-24 21:13:41,504 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:41,516 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:41,517 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:41,518 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:41,518 - CtxMemMgr_User5 - INFO - Stored turn add2d0b2-4f4f-4d61-a249-4ee9a9f235ed for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:41,519 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:41,519 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:41,519 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1804 / 30000
2025-04-24 21:13:41,519 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:41,526 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:41,527 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:41,527 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:42,554 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:42,562 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:42,571 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_d51e4fe4-c913-4ca4-87f3-0fd51b8976c8', 'timestamp': '2025-04-24T21:13:42.563877', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:42.555551"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:42,578 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:42,578 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:42,579 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:42,580 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 28: I want to tell you a fact about my dream vacation. My dream vacation is touring the ancient temples of Japan. Please remember this specific fact.'
2025-04-24 21:13:42,580 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:42,581 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:42,581 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:42,583 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:42,583 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:45,145 - CtxMemMgr_User5 - INFO - Stored turn 7f4f419b-976b-4eb9-8163-361182921588 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:45,145 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:45,146 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:45,148 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1842 / 30000
2025-04-24 21:13:45,150 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:45,160 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:45,160 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:45,161 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:45,161 - CtxMemMgr_User5 - INFO - Stored turn 63071b35-0a2e-4185-9774-b8d0892d17b2 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:45,161 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:45,161 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:45,162 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1880 / 30000
2025-04-24 21:13:45,162 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:45,169 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:45,169 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:45,169 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:46,185 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:46,192 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:46,197 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_c951ca12-8911-43ae-8b77-e066bd53d68d', 'timestamp': '2025-04-24T21:13:46.193061', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:46.186645"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:46,201 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:46,201 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:46,202 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:46,202 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 29: I want to tell you a fact about my best friend. My best friend is Jamie, who they've known since kindergarten. Please remember this specific fact.'
2025-04-24 21:13:46,202 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:46,202 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:46,203 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:46,204 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:46,205 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:48,764 - CtxMemMgr_User5 - INFO - Stored turn 7fdf4ec9-5aa4-4288-91e5-4fa936b5f1ac for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:48,764 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:48,765 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:48,765 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1918 / 30000
2025-04-24 21:13:48,766 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:48,774 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:48,775 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:48,775 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:48,775 - CtxMemMgr_User5 - INFO - Stored turn e0f6f6a2-e33e-4ae4-8726-f7c5b7e60471 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:48,776 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:48,776 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:48,776 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1956 / 30000
2025-04-24 21:13:48,776 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:48,783 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:48,783 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:48,785 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:13:49,806 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:49,811 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:49,816 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_a2100f72-8c6c-410d-89c5-8f82189af27d', 'timestamp': '2025-04-24T21:13:49.812138', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:49.806929"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:49,820 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:49,821 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:49,822 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:49,822 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 30: I want to tell you a fact about my lucky number. My lucky number is seventeen. Please remember this specific fact.'
2025-04-24 21:13:49,823 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:49,823 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:49,823 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:49,825 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:49,826 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:52,181 - CtxMemMgr_User5 - INFO - Stored turn afadda53-feef-41cb-bec0-eb671c187c82 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:52,182 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:52,182 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:52,183 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~1986 / 30000
2025-04-24 21:13:52,184 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:52,192 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:52,192 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:52,193 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:52,193 - CtxMemMgr_User5 - INFO - Stored turn c00c3a96-e4a3-42fe-a79f-9242b01b385b for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:52,193 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:52,193 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:52,193 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2016 / 30000
2025-04-24 21:13:52,194 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:52,199 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:52,200 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:52,200 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-07-26T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:53,216 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:53,221 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:53,226 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_e056a417-b785-4915-8732-798a7b64d451', 'timestamp': '2025-04-24T21:13:53.222160', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:53.217135"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:53,231 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:53,231 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:53,232 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:53,233 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 31: I want to tell you a fact about my college major. My college major is Environmental Science. Please remember this specific fact.'
2025-04-24 21:13:53,233 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:53,233 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:53,233 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:53,235 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:53,235 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:55,452 - CtxMemMgr_User5 - INFO - Stored turn 7418b36a-b49a-49c7-ba37-948e1d55283f for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:55,453 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:55,453 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:55,454 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2050 / 30000
2025-04-24 21:13:55,454 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:55,465 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:55,465 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:55,465 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:55,465 - CtxMemMgr_User5 - INFO - Stored turn b23d7169-e3fd-4022-a1f8-b7abb0f9662c for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:55,466 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:55,466 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:55,466 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2084 / 30000
2025-04-24 21:13:55,466 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:55,472 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:55,472 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:55,473 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:14:00Z",
    "speaker": "User...
2025-04-24 21:13:56,490 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:56,496 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:56,501 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_53f226af-c6e0-49c4-a7ca-2e2ee6420777', 'timestamp': '2025-04-24T21:13:56.496624', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:56.491670"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:56,505 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:56,505 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:56,506 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses book for the Name.
2025-04-24 21:13:56,507 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:13:56,509 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:13:56,510 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:13:56,510 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:56,511 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 32: I want to tell you a fact about my favorite book. My favorite book is The Name of the Wind. Please remember this specific fact.'
2025-04-24 21:13:56,511 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:56,511 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:56,511 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:56,513 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:56,514 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:13:58,797 - CtxMemMgr_User5 - INFO - Stored turn b336b172-04ef-4515-a053-3616d1aa8ca5 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:58,797 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:58,798 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:58,798 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2118 / 30000
2025-04-24 21:13:58,799 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:58,808 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:58,808 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:13:58,809 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:13:58,809 - CtxMemMgr_User5 - INFO - Stored turn 4da4b1bb-ea9c-4b47-b98a-70b7e2935023 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:58,809 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:13:58,810 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:13:58,810 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2152 / 30000
2025-04-24 21:13:58,811 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:13:58,817 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:13:58,818 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:13:58,818 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:13:59,832 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:59,840 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:13:59,846 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_fefbe580-8c3b-47a5-a19e-de6ac1937cab', 'timestamp': '2025-04-24T21:13:59.841303', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:13:59.833331"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:13:59,850 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:59,850 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:13:59,851 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses movie for the Shawshank.
2025-04-24 21:13:59,851 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:13:59,853 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:13:59,854 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:13:59,854 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:13:59,854 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 33: I want to tell you a fact about my favorite movie. My favorite movie is The Shawshank Redemption. Please remember this specific fact.'
2025-04-24 21:13:59,854 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:13:59,854 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:13:59,855 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:13:59,856 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:13:59,856 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:02,142 - CtxMemMgr_User5 - INFO - Stored turn 4e5687a7-3ec3-4fa9-82aa-ac31153f439d for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:02,142 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:02,143 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:02,143 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2187 / 30000
2025-04-24 21:14:02,144 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:02,155 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:02,155 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:02,156 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:02,156 - CtxMemMgr_User5 - INFO - Stored turn 01d1ba08-d626-4d8f-aa27-c8b77dd3df7f for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:02,156 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:02,157 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:02,157 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2222 / 30000
2025-04-24 21:14:02,157 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:02,164 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:02,164 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:02,164 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:03,183 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:03,188 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:03,193 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_02cc67aa-8b0b-4b42-8019-e11666aec1e0', 'timestamp': '2025-04-24T21:14:03.189309', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:03.185005"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:03,196 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:03,196 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:03,197 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:03,197 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 34: I want to tell you a fact about my career goal. My career goal is to start a sustainable technology company. Please remember this specific fact.'
2025-04-24 21:14:03,198 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:03,198 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:03,198 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:03,200 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:03,200 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:05,727 - CtxMemMgr_User5 - INFO - Stored turn 54993344-9188-4d0c-955e-9c269350ec2c for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:05,728 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:05,728 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:05,729 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2260 / 30000
2025-04-24 21:14:05,730 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:05,740 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:05,740 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:05,741 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:05,741 - CtxMemMgr_User5 - INFO - Stored turn b07c2169-e85b-45ea-a276-1e52217c755a for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:05,741 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:05,742 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:05,742 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2298 / 30000
2025-04-24 21:14:05,742 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:05,749 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:05,750 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:05,750 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:06,763 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:06,769 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:06,773 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_9ff3e688-5939-459a-a32d-5d700fe0722e', 'timestamp': '2025-04-24T21:14:06.769832', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:06.764841"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:06,777 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:06,777 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:06,778 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:06,779 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 35: I want to tell you a fact about my biggest fear. My biggest fear is public speaking. Please remember this specific fact.'
2025-04-24 21:14:06,779 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:06,779 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:06,779 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:06,781 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:06,781 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:09,105 - CtxMemMgr_User5 - INFO - Stored turn 24f6d61b-1d9c-4e40-9ef8-ffed765801f4 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:09,105 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:09,106 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:09,106 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2330 / 30000
2025-04-24 21:14:09,106 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:09,116 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:09,116 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:09,117 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:09,117 - CtxMemMgr_User5 - INFO - Stored turn 7b5dded4-9b81-4d94-a3ae-6034a7637458 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:09,118 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:09,118 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:09,119 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2362 / 30000
2025-04-24 21:14:09,119 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:09,126 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:09,126 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:09,127 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:10,138 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:10,146 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:10,152 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_24b84b29-cbe3-45ea-a082-8bb85844af4b', 'timestamp': '2025-04-24T21:14:10.146934', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:10.139229"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:10,157 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:10,157 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:10,159 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:10,159 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 36: I want to tell you a fact about my favorite season. My favorite season is autumn when the leaves change. Please remember this specific fact.'
2025-04-24 21:14:10,159 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:10,160 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:10,160 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:10,162 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:10,162 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:12,387 - CtxMemMgr_User5 - INFO - Stored turn 7d179354-20f1-4963-8cae-eb42ff53f09b for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:12,388 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:12,388 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:12,389 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2399 / 30000
2025-04-24 21:14:12,389 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:12,398 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:12,398 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:12,398 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:12,399 - CtxMemMgr_User5 - INFO - Stored turn e5674aa7-d02c-4be6-bda1-7eb20a14a1f9 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:12,399 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:12,399 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:12,400 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2436 / 30000
2025-04-24 21:14:12,401 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:12,407 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:12,407 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:12,408 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:13,419 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:13,424 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:13,428 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_d2c71863-57e2-4ee0-ab52-ba6fa6e680ff', 'timestamp': '2025-04-24T21:14:13.424833', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:13.420093"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:13,431 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:13,432 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:13,432 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:13,433 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 37: I want to tell you a fact about my allergies. My allergies is peanuts and bee stings. Please remember this specific fact.'
2025-04-24 21:14:13,433 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:13,433 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:13,433 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:13,436 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:13,436 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:15,631 - CtxMemMgr_User5 - INFO - Stored turn 44d342e3-a1c3-4a0e-a88a-8bc8ff97110d for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:15,631 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:15,632 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:15,633 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2468 / 30000
2025-04-24 21:14:15,633 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:15,645 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:15,645 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:15,645 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:15,645 - CtxMemMgr_User5 - INFO - Stored turn e55b2579-9f69-4995-9d4e-b69d9911faf2 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:15,646 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:15,646 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:15,647 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2500 / 30000
2025-04-24 21:14:15,647 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:15,654 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:15,654 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:15,654 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:16,671 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:16,681 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:16,687 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_75a543a2-4872-4d47-9e37-cb1515033f39', 'timestamp': '2025-04-24T21:14:16.681645', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:16.672663"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:16,692 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:16,693 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:16,694 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:16,694 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 38: I want to tell you a fact about my hidden talent. My hidden talent is can solve a Rubik's cube in under 2 minutes. Please remember this specific fact.'
2025-04-24 21:14:16,695 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:16,695 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:16,695 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:16,697 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:16,698 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:19,080 - CtxMemMgr_User5 - INFO - Stored turn 21fa9fe4-3ada-4dfa-a2fb-2dfc42020c34 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:19,080 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:19,081 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:19,081 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2539 / 30000
2025-04-24 21:14:19,081 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:19,092 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:19,093 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:19,093 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:19,094 - CtxMemMgr_User5 - INFO - Stored turn 1d84a1b8-5101-4234-9d5c-da31f3d1824d for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:19,094 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:19,095 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:19,095 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2578 / 30000
2025-04-24 21:14:19,096 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:19,103 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:19,103 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:19,104 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:20,119 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:20,132 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:20,139 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_80b43550-8e8a-40cc-8212-d2a108e6482e', 'timestamp': '2025-04-24T21:14:20.133118', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:20.121317"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:20,144 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:20,145 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:20,146 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:20,146 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 39: I want to tell you a fact about my role model. My role model is their grandfather who was an inventor. Please remember this specific fact.'
2025-04-24 21:14:20,147 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:20,147 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:20,147 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:20,149 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:20,149 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:22,464 - CtxMemMgr_User5 - INFO - Stored turn e55f1852-4297-44a5-8602-59905f9caa83 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:22,464 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:22,465 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:22,465 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2614 / 30000
2025-04-24 21:14:22,466 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:22,475 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:22,475 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:22,475 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:22,475 - CtxMemMgr_User5 - INFO - Stored turn b4e804ce-bb81-43f4-bbe0-ad1df0c7aa89 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:22,476 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:22,476 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:22,476 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2650 / 30000
2025-04-24 21:14:22,476 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:22,483 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:22,483 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:22,484 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:15:00Z",
    "speaker": "User...
2025-04-24 21:14:23,500 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:23,507 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:23,513 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_b3247592-e005-4da6-9515-3dddbd315272', 'timestamp': '2025-04-24T21:14:23.508164', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:23.501477"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:23,517 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:23,517 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:23,518 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:23,518 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 40: I want to tell you a fact about my favorite musician. My favorite musician is Beethoven, especially his piano sonatas. Please remember this specific fact.'
2025-04-24 21:14:23,519 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:23,519 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:23,519 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:23,521 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:23,521 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:25,899 - CtxMemMgr_User5 - INFO - Stored turn 71ab02ac-59c6-4baf-9e28-b39fe3623930 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:25,899 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:25,900 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:25,900 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2690 / 30000
2025-04-24 21:14:25,901 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:25,914 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:25,915 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:25,915 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:25,916 - CtxMemMgr_User5 - INFO - Stored turn f922bd7f-0b55-41c1-a203-6ab6f1852da4 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:25,916 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:25,917 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:25,917 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2730 / 30000
2025-04-24 21:14:25,917 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:25,923 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:25,923 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:25,923 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:26,940 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:26,950 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:26,957 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_f6ea3f2b-0f57-4acf-b96a-32355f48fe09', 'timestamp': '2025-04-24T21:14:26.951427', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:26.942477"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:26,963 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:26,964 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:26,965 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:26,965 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 41: I want to tell you a fact about my favorite color. My favorite color is cerulean blue. Please remember this specific fact.'
2025-04-24 21:14:26,965 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:26,965 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:26,965 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:26,967 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:26,968 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:29,383 - CtxMemMgr_User5 - INFO - Stored turn 386ae091-83b7-4c36-94eb-02e7b6df5efc for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:29,383 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:29,383 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:29,384 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2762 / 30000
2025-04-24 21:14:29,384 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:29,401 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:29,402 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:29,402 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:29,402 - CtxMemMgr_User5 - INFO - Stored turn faa9b79b-46e9-4a44-a1dd-b9d3088647d0 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:29,402 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:29,403 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:29,403 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2794 / 30000
2025-04-24 21:14:29,403 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:29,410 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:29,410 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:29,410 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:30,428 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:30,433 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:30,438 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_ccb13c13-0ad4-44eb-b03c-dffbd61105cb', 'timestamp': '2025-04-24T21:14:30.434272', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:30.429376"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:30,441 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:30,442 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:30,443 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:30,444 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 42: I want to tell you a fact about my birthday. My birthday is March 15. Please remember this specific fact.'
2025-04-24 21:14:30,444 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:30,444 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:30,444 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:30,446 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:30,447 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:32,861 - CtxMemMgr_User5 - INFO - Stored turn 07e9629d-cd59-4a49-9714-3002361943f1 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:32,862 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:32,862 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:32,863 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2822 / 30000
2025-04-24 21:14:32,863 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:32,876 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:32,877 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:32,877 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:32,877 - CtxMemMgr_User5 - INFO - Stored turn dc7f3333-dbd3-4bb4-b53e-ae4410017825 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:32,878 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:32,878 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:32,879 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2850 / 30000
2025-04-24 21:14:32,879 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:32,888 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:32,888 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:32,889 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:33,917 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:33,926 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:33,933 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_31e0ad8b-260d-4a32-9c26-758e94b12fa0', 'timestamp': '2025-04-24T21:14:33.926944', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:33.918584"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:33,941 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:33,941 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:33,942 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:33,942 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 43: I want to tell you a fact about my pet. My pet is a golden retriever named Max. Please remember this specific fact.'
2025-04-24 21:14:33,943 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:33,943 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:33,943 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:33,945 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:33,945 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:36,086 - CtxMemMgr_User5 - INFO - Stored turn 88b5e8b7-fda0-4f71-95d3-ae203b4a1434 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:36,086 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:36,087 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:36,087 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2881 / 30000
2025-04-24 21:14:36,087 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:36,103 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:36,103 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:36,104 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:36,104 - CtxMemMgr_User5 - INFO - Stored turn 34b80ebc-5740-48fe-bfca-e7b6e415ceaa for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:36,104 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:36,104 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:36,105 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2912 / 30000
2025-04-24 21:14:36,105 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:36,112 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:36,112 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:36,112 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:37,134 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:37,147 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:37,154 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_04da437f-0fe5-485f-abb5-ea488441bf22', 'timestamp': '2025-04-24T21:14:37.147776', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:37.135497"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:37,157 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:37,157 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:37,158 - ConvMgr_User5 - INFO - Pattern match extracted: User enjoys collecting vintage postcards.
2025-04-24 21:14:37,158 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:14:37,160 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:14:37,161 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:14:37,161 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:37,161 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 44: I want to tell you a fact about my hobby. My hobby is collecting vintage postcards. Please remember this specific fact.'
2025-04-24 21:14:37,161 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:37,161 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:37,161 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:37,163 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:37,163 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:39,435 - CtxMemMgr_User5 - INFO - Stored turn 989d65dd-c2ed-457c-ac39-248f5df8f624 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:39,436 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:39,436 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 21:14:39,436 - CtxMemMgr_User5 - INFO - Added hobby fact to user memory: User enjoys collecting vintage postcards.
2025-04-24 21:14:39,440 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:14:39,441 - CtxMemMgr_User5 - INFO - Successfully saved 1 new facts to database.
2025-04-24 21:14:39,441 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:39,441 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2944 / 30000
2025-04-24 21:14:39,442 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:39,456 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:39,456 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:39,457 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:39,457 - CtxMemMgr_User5 - INFO - Stored turn dd4024c5-45e9-4ef1-a888-d8958607abef for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:39,457 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:39,458 - CtxMemMgr_User5 - INFO - Rule-based extraction found hobby: collecting vintage postcards
2025-04-24 21:14:39,458 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:39,458 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~2976 / 30000
2025-04-24 21:14:39,458 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:39,469 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:39,470 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:39,470 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:15:00Z",
    "speaker": "User...
2025-04-24 21:14:40,488 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:40,494 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:40,499 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_de89a672-995e-4cd6-856f-47de4a6768a0', 'timestamp': '2025-04-24T21:14:40.494802', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:40.489340"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:40,504 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:40,504 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:40,505 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:40,505 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 45: I want to tell you a fact about my hometown. My hometown is Springfield, Illinois. Please remember this specific fact.'
2025-04-24 21:14:40,506 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:40,506 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:40,506 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:40,507 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:40,508 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:42,931 - CtxMemMgr_User5 - INFO - Stored turn 0d757c25-19f5-4a13-8bdf-bf5467668dd9 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:42,932 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:42,932 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:42,933 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3007 / 30000
2025-04-24 21:14:42,933 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:42,948 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:42,949 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:42,949 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:42,949 - CtxMemMgr_User5 - INFO - Stored turn 07596229-a699-4ee4-b811-e50d2fd14504 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:42,950 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:42,950 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:42,950 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3038 / 30000
2025-04-24 21:14:42,951 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:42,968 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:42,968 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:42,969 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:43,995 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:43,998 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:44,001 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_99868b5c-23dc-4e87-8117-91079302f58b', 'timestamp': '2025-04-24T21:14:43.998847', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:43.995887"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:44,003 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:44,003 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:44,003 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:44,003 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 46: I want to tell you a fact about my favorite food. My favorite food is spicy Thai curry. Please remember this specific fact.'
2025-04-24 21:14:44,003 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:44,003 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:44,003 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:44,004 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:44,004 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:46,110 - CtxMemMgr_User5 - INFO - Stored turn 42b5720b-5b78-4e46-9e03-f612ff8d8631 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:46,111 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:46,111 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:46,111 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3071 / 30000
2025-04-24 21:14:46,112 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:46,121 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:46,121 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:46,121 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:46,122 - CtxMemMgr_User5 - INFO - Stored turn c09429a7-96f0-4076-90bb-f6e58b034c90 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:46,122 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:46,123 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:46,123 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3104 / 30000
2025-04-24 21:14:46,123 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:46,135 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:46,135 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:46,136 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:47,157 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:47,164 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:47,170 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_b1aa0244-2422-4c5e-b7fd-56f97b1ed94e', 'timestamp': '2025-04-24T21:14:47.165403', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:47.159609"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:47,173 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:47,174 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:47,174 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:47,175 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 47: I want to tell you a fact about my first job. My first job is lifeguard at the community pool. Please remember this specific fact.'
2025-04-24 21:14:47,175 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:47,175 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:47,175 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:47,177 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:47,177 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:49,446 - CtxMemMgr_User5 - INFO - Stored turn fb985253-f5b9-4a58-80e9-80b445c73091 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:49,447 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:49,448 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:49,448 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3138 / 30000
2025-04-24 21:14:49,449 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:49,469 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:49,470 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:49,471 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:49,471 - CtxMemMgr_User5 - INFO - Stored turn a2024de8-e8e2-4564-8e86-c314ca625f5d for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:49,471 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:49,471 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:49,471 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3172 / 30000
2025-04-24 21:14:49,472 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:49,476 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:49,476 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:49,476 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:50,498 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:50,505 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:50,510 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_d8366e75-b944-4412-9f58-bcef3d58d54e', 'timestamp': '2025-04-24T21:14:50.505774', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:50.499426"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:50,515 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:50,516 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:50,517 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:50,517 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 48: I want to tell you a fact about my dream vacation. My dream vacation is touring the ancient temples of Japan. Please remember this specific fact.'
2025-04-24 21:14:50,517 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:50,517 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:50,517 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:50,519 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:50,520 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:52,933 - CtxMemMgr_User5 - INFO - Stored turn 444f9391-7884-4c81-a576-4c8adf4d6acc for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:52,934 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:52,934 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:52,935 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3210 / 30000
2025-04-24 21:14:52,935 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:52,954 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:52,954 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:52,955 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:52,955 - CtxMemMgr_User5 - INFO - Stored turn b5a48cd6-3407-4d7b-bdfa-d57084da14f7 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:52,955 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:52,955 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:52,956 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3248 / 30000
2025-04-24 21:14:52,956 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:52,964 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:52,964 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:52,964 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:14:53,978 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:53,983 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:53,993 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_13104339-2309-4b91-8fb7-b929ef22830f', 'timestamp': '2025-04-24T21:14:53.984369', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:53.979646"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:53,996 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:53,997 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:53,997 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:53,998 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 49: I want to tell you a fact about my best friend. My best friend is Jamie, who they've known since kindergarten. Please remember this specific fact.'
2025-04-24 21:14:53,998 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:53,998 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:53,998 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:54,000 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:54,000 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:56,409 - CtxMemMgr_User5 - INFO - Stored turn 0b0f88c8-684c-4fa0-88a6-38343a6dfd6b for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:56,409 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:56,410 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:56,410 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3286 / 30000
2025-04-24 21:14:56,411 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:56,422 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:56,422 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:56,422 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:56,423 - CtxMemMgr_User5 - INFO - Stored turn f77b7b01-2f79-46dc-92ea-59568bcd273e for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:56,423 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:56,423 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:56,424 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3324 / 30000
2025-04-24 21:14:56,424 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:56,434 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:56,434 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:56,434 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:15:00Z",
    "speaker": "User...
2025-04-24 21:14:57,460 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:57,467 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:14:57,474 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_7b849bab-d58b-4265-b56f-65e2d84655e8', 'timestamp': '2025-04-24T21:14:57.468734', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:14:57.461701"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:14:57,479 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:57,479 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:14:57,480 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:14:57,481 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Turn 50: I want to tell you a fact about my lucky number. My lucky number is seventeen. Please remember this specific fact.'
2025-04-24 21:14:57,481 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:14:57,481 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:14:57,481 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:14:57,483 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:14:57,484 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:14:59,719 - CtxMemMgr_User5 - INFO - Stored turn e089209c-82a8-4bd7-9908-9c7e3447109e for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:59,719 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:59,719 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:59,720 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3354 / 30000
2025-04-24 21:14:59,720 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:59,733 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:59,733 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:14:59,734 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:14:59,734 - CtxMemMgr_User5 - INFO - Stored turn 5f8c6b79-d860-4a91-b677-34fff13dac13 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:59,734 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:14:59,734 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:14:59,735 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3384 / 30000
2025-04-24 21:14:59,735 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:14:59,743 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:14:59,743 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:14:59,743 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:00,762 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:00,771 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:00,775 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_a6a2ed34-4434-46e0-99a6-562c2162cdcf', 'timestamp': '2025-04-24T21:15:00.771923', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:00.762872"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:00,780 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:00,780 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:00,781 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:00,782 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my favorite color is?'
2025-04-24 21:15:00,782 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:00,782 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:00,782 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:00,788 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:00,788 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:02,591 - CtxMemMgr_User5 - INFO - Stored turn 79a506f4-da94-422f-8d55-c76edfa49f7f for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:02,592 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:02,592 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:02,593 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3394 / 30000
2025-04-24 21:15:02,593 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:02,612 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:02,613 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:02,613 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:02,614 - CtxMemMgr_User5 - INFO - Stored turn 3acdfc57-cbc9-4863-9247-10987fb6e597 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:02,615 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:02,616 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:02,617 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3404 / 30000
2025-04-24 21:15:02,618 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:02,629 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:02,629 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:02,629 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-07-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:03,643 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:03,651 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:03,657 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_642e14d4-eca7-43ed-967e-8acbe1e171dd', 'timestamp': '2025-04-24T21:15:03.651986', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:03.644606"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:03,661 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:03,661 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:03,662 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:03,662 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my birthday, what was it?'
2025-04-24 21:15:03,663 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:03,663 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:03,663 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:03,665 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:03,666 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:05,729 - CtxMemMgr_User5 - INFO - Stored turn af2adc28-5b65-4a1a-9162-afccec8b47c0 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:05,730 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:05,731 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:05,731 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3416 / 30000
2025-04-24 21:15:05,731 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:05,745 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:05,745 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:05,746 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:05,746 - CtxMemMgr_User5 - INFO - Stored turn c6434399-8c82-4b78-9334-23a41f115683 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:05,746 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:05,746 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:05,747 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3428 / 30000
2025-04-24 21:15:05,747 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:05,755 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:05,757 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:05,758 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:06,777 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:06,785 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:06,790 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_62b5bbcb-7ad0-4581-8456-45556fe570bf', 'timestamp': '2025-04-24T21:15:06.785993', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:06.779025"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:06,795 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:06,795 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:06,796 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the pet.
2025-04-24 21:15:06,796 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:15:06,798 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:15:06,798 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:15:06,799 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:06,799 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my pet?'
2025-04-24 21:15:06,799 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:06,799 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:06,799 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:06,801 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:06,802 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:08,748 - CtxMemMgr_User5 - INFO - Stored turn 57d37b8e-1a54-4c14-800e-00aa0d25b0b9 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:08,748 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:08,749 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:08,749 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3431 / 30000
2025-04-24 21:15:08,750 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:08,761 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:08,762 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:08,763 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:08,764 - CtxMemMgr_User5 - INFO - Stored turn 93006150-0a9c-4241-a653-2f1dff9d6628 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:08,764 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:08,765 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:08,765 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3434 / 30000
2025-04-24 21:15:08,766 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:08,774 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:08,774 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:08,775 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-08-08T21:15:00Z",
    "speaker": "User...
2025-04-24 21:15:09,793 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:09,799 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:09,805 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_c558f99f-b6a3-4f93-99a4-7c28722e3ccd', 'timestamp': '2025-04-24T21:15:09.800275', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:09.794863"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:09,810 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:09,810 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:09,811 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:09,811 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my hobby, what was it?'
2025-04-24 21:15:09,812 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:09,812 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:09,812 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:09,814 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:09,814 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:11,773 - CtxMemMgr_User5 - INFO - Stored turn bba1e324-377c-4654-84dc-bed79ead7b6b for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:11,774 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:11,775 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:11,776 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3445 / 30000
2025-04-24 21:15:11,776 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:11,791 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:11,792 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:11,792 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:11,792 - CtxMemMgr_User5 - INFO - Stored turn 13dd415b-cecc-4553-bd27-5c3b827a055d for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:11,792 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:11,792 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:11,793 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3456 / 30000
2025-04-24 21:15:11,793 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:11,801 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:11,801 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:11,801 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:12,816 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:12,826 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:12,832 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_74237c14-bb3a-4ad0-99a8-d47e0fb35d83', 'timestamp': '2025-04-24T21:15:12.826992', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:12.818274"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:12,840 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:12,840 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:12,841 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:12,842 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my hometown is?'
2025-04-24 21:15:12,842 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:12,842 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:12,842 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:12,845 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:12,845 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:14,770 - CtxMemMgr_User5 - INFO - Stored turn 03137580-60d9-4a24-9d09-1c5a2cad2452 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:14,771 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:14,771 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:14,772 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3465 / 30000
2025-04-24 21:15:14,772 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:14,788 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:14,789 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:14,789 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:14,789 - CtxMemMgr_User5 - INFO - Stored turn 6b0b5cec-1370-4063-b727-78c9accd05bc for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:14,789 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:14,790 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:14,790 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3474 / 30000
2025-04-24 21:15:14,790 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:14,798 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:14,798 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:14,799 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:15,820 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:15,828 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:15,834 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_983a6ba8-218b-4221-b068-16573b48c501', 'timestamp': '2025-04-24T21:15:15.829089', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:15.821970"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:15,837 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:15,838 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:15,839 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the favorite.
2025-04-24 21:15:15,839 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:15:15,840 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:15:15,841 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:15:15,841 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:15,842 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my favorite food?'
2025-04-24 21:15:15,842 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:15,842 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:15,842 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:15,843 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:15,844 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:17,626 - CtxMemMgr_User5 - INFO - Stored turn f5c21bb1-2720-419e-b24c-397a2a292a17 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:17,627 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:17,627 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:17,628 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3480 / 30000
2025-04-24 21:15:17,628 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:17,644 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:17,645 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:17,645 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:17,646 - CtxMemMgr_User5 - INFO - Stored turn 21ce5b5f-503b-4696-9e39-00f8dcddee0d for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:17,646 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:17,646 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:17,647 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3486 / 30000
2025-04-24 21:15:17,647 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:17,653 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:17,654 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:17,654 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-08-24T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:18,670 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:18,679 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:18,685 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_9b23471c-4bf8-49eb-9e76-65778665450a', 'timestamp': '2025-04-24T21:15:18.680183', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:18.671374"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:18,689 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:18,689 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:18,690 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:18,690 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my first job, what was it?'
2025-04-24 21:15:18,691 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:18,691 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:18,691 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:18,693 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:18,693 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:20,651 - CtxMemMgr_User5 - INFO - Stored turn 344c423e-9add-47f4-9de2-c8dec528c300 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:20,651 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:20,651 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:20,652 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3498 / 30000
2025-04-24 21:15:20,652 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:20,658 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:20,658 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:20,658 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:20,658 - CtxMemMgr_User5 - INFO - Stored turn bb218434-4a10-45f4-902c-a348cf393b0f for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:20,658 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:20,658 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:20,658 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3510 / 30000
2025-04-24 21:15:20,659 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:20,663 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:20,663 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:20,663 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:21,676 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:21,681 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:21,686 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_c558c6b4-86ad-4b50-a672-554177675494', 'timestamp': '2025-04-24T21:15:21.682331', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:21.676802"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:21,692 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:21,692 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:21,693 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the dream.
2025-04-24 21:15:21,694 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:15:21,696 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:15:21,696 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:15:21,697 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:21,697 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my dream vacation?'
2025-04-24 21:15:21,697 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:21,697 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:21,698 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:21,699 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:21,700 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:23,757 - CtxMemMgr_User5 - INFO - Stored turn f6d3aeb9-6420-4b1c-bc90-b4cd0a9e6c49 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:23,757 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:23,758 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:23,759 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3516 / 30000
2025-04-24 21:15:23,760 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:23,773 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:23,774 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:23,775 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:23,776 - CtxMemMgr_User5 - INFO - Stored turn 6410a2a0-853d-4c21-bd6d-0a8172c8956d for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:23,776 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:23,776 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:23,777 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3522 / 30000
2025-04-24 21:15:23,777 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:23,785 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:23,785 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:23,785 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:24,805 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:24,813 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:24,819 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_0754dbe4-65d1-4d6c-ac9c-4f7938f38a7a', 'timestamp': '2025-04-24T21:15:24.813597', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:24.806206"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:24,823 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:24,824 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:24,825 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:24,825 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my best friend is?'
2025-04-24 21:15:24,826 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:24,826 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:24,826 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:24,827 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:24,828 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:26,796 - CtxMemMgr_User5 - INFO - Stored turn 41267779-af88-4d8a-bb8f-d39fee8905a6 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:26,797 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:26,797 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:26,798 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3531 / 30000
2025-04-24 21:15:26,799 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:26,814 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:26,815 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:26,815 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:26,815 - CtxMemMgr_User5 - INFO - Stored turn 6cdba5d4-fc13-4b12-bff5-60a245dbc79d for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:26,815 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:26,816 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:26,816 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3540 / 30000
2025-04-24 21:15:26,816 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:26,825 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:26,825 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:26,826 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:15:00Z",
    "speaker": "User...
2025-04-24 21:15:27,840 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:27,849 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:27,857 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_23921f0a-f807-4c96-9731-4921e181b152', 'timestamp': '2025-04-24T21:15:27.850354', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:27.842121"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:27,861 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:27,861 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:27,863 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:27,863 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my lucky number, what was it?'
2025-04-24 21:15:27,863 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:27,863 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:27,864 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:27,865 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:27,866 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:29,708 - CtxMemMgr_User5 - INFO - Stored turn 163e90e5-b2df-4180-8f5e-145d7f8a62a6 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:29,708 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:29,709 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:29,709 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3553 / 30000
2025-04-24 21:15:29,710 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:29,723 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:29,723 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:29,723 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:29,724 - CtxMemMgr_User5 - INFO - Stored turn f7b8f6fb-26d8-4b32-b729-93b263e537e1 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:29,724 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:29,724 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:29,724 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3566 / 30000
2025-04-24 21:15:29,725 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:29,734 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:29,734 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:29,734 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:30,752 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:30,760 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:30,766 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_fb82583b-8d91-4683-a229-06728725f168', 'timestamp': '2025-04-24T21:15:30.761443', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:30.755383"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:30,771 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:30,771 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:30,772 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:30,773 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my college major, what was it?'
2025-04-24 21:15:30,773 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:30,773 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:30,773 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:30,775 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:30,775 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:32,887 - CtxMemMgr_User5 - INFO - Stored turn c5442150-a879-4e84-90bb-a1e932739acd for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:32,888 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:32,888 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:32,889 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3579 / 30000
2025-04-24 21:15:32,892 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:32,908 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:32,908 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:32,909 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:32,909 - CtxMemMgr_User5 - INFO - Stored turn 9171dc96-0800-43cf-afc1-4b7564e360ee for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:32,909 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:32,910 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:32,910 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3592 / 30000
2025-04-24 21:15:32,911 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:32,917 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:32,917 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:32,917 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:33,943 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:33,947 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:33,953 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_a186f789-ae50-467b-ba73-dfabc753f7c8', 'timestamp': '2025-04-24T21:15:33.948080', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:33.943906"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:33,958 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:33,959 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:33,960 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:33,960 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my favorite book is?'
2025-04-24 21:15:33,960 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:33,960 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:33,961 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:33,962 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:33,963 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:35,916 - CtxMemMgr_User5 - INFO - Stored turn dedbb303-2438-42fc-9431-193fe49d1069 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:35,916 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:35,917 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:35,918 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3602 / 30000
2025-04-24 21:15:35,918 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:35,936 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:35,937 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:35,937 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:35,937 - CtxMemMgr_User5 - INFO - Stored turn 8488f00d-4f58-4384-a37a-ff300d46e02b for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:35,938 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:35,938 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:35,938 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3612 / 30000
2025-04-24 21:15:35,939 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:35,944 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:35,945 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:35,945 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:36,969 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:36,975 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:36,980 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_f12c0956-d997-40a4-a0c0-9993e97fc677', 'timestamp': '2025-04-24T21:15:36.976269', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:36.970812"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:36,984 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:36,985 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:36,986 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:36,986 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my favorite movie is?'
2025-04-24 21:15:36,986 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:36,986 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:36,987 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:36,988 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:36,988 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:39,222 - CtxMemMgr_User5 - INFO - Stored turn 9342ffc5-6297-4d71-83aa-41e51fbe029a for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:39,222 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:39,223 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:39,225 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3622 / 30000
2025-04-24 21:15:39,225 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:39,241 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:39,241 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:39,242 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:39,242 - CtxMemMgr_User5 - INFO - Stored turn 6a0d9e75-24a0-480e-b65b-b6f343884f06 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:39,242 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:39,242 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:39,243 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3632 / 30000
2025-04-24 21:15:39,243 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:39,252 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:39,252 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:39,253 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:40,276 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:40,282 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:40,287 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_8195d0a9-5468-4d92-8512-0908d8a553e6', 'timestamp': '2025-04-24T21:15:40.282922', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:40.277896"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:40,291 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:40,291 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:40,292 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the career.
2025-04-24 21:15:40,292 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:15:40,294 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:15:40,295 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:15:40,295 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:40,295 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my career goal?'
2025-04-24 21:15:40,295 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:40,296 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:40,296 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:40,297 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:40,297 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:42,593 - CtxMemMgr_User5 - INFO - Stored turn 4d7c6fc7-4a48-4f7b-8113-0e331dab9b65 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:42,594 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:42,594 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:42,595 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3637 / 30000
2025-04-24 21:15:42,595 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:42,614 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:42,614 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:42,615 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:42,615 - CtxMemMgr_User5 - INFO - Stored turn 67953dee-498b-4b9c-b8df-15fa7fe0c263 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:42,615 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:42,615 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:42,616 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3642 / 30000
2025-04-24 21:15:42,616 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:42,626 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:42,626 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:42,627 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:43,649 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:43,658 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:43,665 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_2fe0ab98-d1cc-493a-ad19-748259868c8f', 'timestamp': '2025-04-24T21:15:43.658872', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:43.651047"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:43,672 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:43,673 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:43,674 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:43,675 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my biggest fear is?'
2025-04-24 21:15:43,676 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:43,676 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:43,677 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:43,679 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:43,680 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:45,977 - CtxMemMgr_User5 - INFO - Stored turn 12855f5d-eedd-4667-9ee0-fd9ec367d793 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:45,977 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:45,978 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:45,979 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3652 / 30000
2025-04-24 21:15:45,980 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:45,996 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:45,997 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:45,997 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:45,997 - CtxMemMgr_User5 - INFO - Stored turn 4c2ce1da-0796-4b47-b480-4fa3d51292b3 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:45,998 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:45,998 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:45,998 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3662 / 30000
2025-04-24 21:15:45,999 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:46,008 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:46,009 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:46,009 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:47,031 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:47,037 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:47,043 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_332fa948-e363-4a9d-ba53-ebce9f34d8d3', 'timestamp': '2025-04-24T21:15:47.038378', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:47.032044"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:47,047 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:47,047 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:47,048 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:47,048 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my favorite season, what was it?'
2025-04-24 21:15:47,049 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:47,049 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:47,049 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:47,051 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:47,051 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:49,194 - CtxMemMgr_User5 - INFO - Stored turn 30e36fde-bd2f-4ffe-b1d3-35dc9c655c05 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:49,194 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:49,195 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:49,195 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3675 / 30000
2025-04-24 21:15:49,195 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:49,209 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:49,210 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:49,211 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:49,211 - CtxMemMgr_User5 - INFO - Stored turn 9ee504fe-4a97-41d5-a8df-370e87f105c1 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:49,211 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:49,212 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:49,212 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3688 / 30000
2025-04-24 21:15:49,212 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:49,223 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:49,223 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:49,223 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:50,244 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:50,254 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:50,262 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_8b274d86-1eee-498a-9eae-d9a64338fad9', 'timestamp': '2025-04-24T21:15:50.255280', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:50.245813"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:50,268 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:50,268 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:50,270 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the allergies.
2025-04-24 21:15:50,270 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:15:50,271 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:15:50,272 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:15:50,272 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:50,272 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my allergies?'
2025-04-24 21:15:50,272 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:50,273 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:50,273 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:50,274 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:50,274 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:52,224 - CtxMemMgr_User5 - INFO - Stored turn 368d98a3-2cf0-48ee-81b5-eb1a96d97303 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:52,225 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:52,225 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:52,226 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3693 / 30000
2025-04-24 21:15:52,226 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:52,241 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:52,242 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:52,242 - ActionHandler_User5 - INFO - Web search detected with pattern: \[SEARCH:\s*(.+?)\s*\]
2025-04-24 21:15:52,242 - ActionHandler_User5 - INFO - Extracted query: 'user allergies'
2025-04-24 21:15:52,242 - ActionHandler_User5 - INFO - WEB SEARCH signal detected for query: 'user allergies' (Session: 75e46832-e724-40b9-bd75-053a6987191b)
2025-04-24 21:15:52,243 - CtxMemMgr_User5 - INFO - Stored turn 4535a7f4-c719-4b46-b233-d25e46b2bc53 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:52,243 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:52,243 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:52,243 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3698 / 30000
2025-04-24 21:15:52,244 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:52,253 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:52,254 - ActionHandler_User5 - INFO - *** SENDING SEARCH STATUS TO FRONTEND (ID: search-1745529352-75e46832) ***
2025-04-24 21:15:52,254 - ActionHandler_User5 - INFO - Storing search status for session 75e46832-e724-40b9-bd75-053a6987191b: active
2025-04-24 21:15:52,256 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:52,258 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_c95d2df9-bda1-4062-8bba-1b08a9d52668', 'timestamp': '2025-04-24T21:15:52.256312', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'web_search', 'content': '{"status": "active", "message": "Searching the web for: user allergies", "search_id": "search-1745529352-75e46832", "timestamp": "2025-04-24T21:15:52.254149"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:52,258 - ActionHandler_User5 - INFO - Stored system message ID sys_c95d2df9-bda1-4062-8bba-1b08a9d52668 for search ID search-1745529352-75e46832
2025-04-24 21:15:52,258 - ActionHandler_User5 - INFO - Successfully posted system message to dedicated API for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:52,258 - ActionHandler_User5 - INFO - EXECUTING WEB SEARCH for query: 'user allergies'
2025-04-24 21:15:52,259 - ActionHandler_User5 - INFO - TAVILY_AVAILABLE = True
2025-04-24 21:15:52,259 - ActionHandler_User5 - INFO - TAVILY_API_KEY from env: Present
2025-04-24 21:15:52,259 - ActionHandler_User5 - INFO - TAVILY_API_KEY value (first/last 4 chars): tvly...VPLb
2025-04-24 21:15:52,259 - ActionHandler_User5 - INFO - Calling perform_search function for query: 'user allergies'
2025-04-24 21:15:52,259 - components.action_handler - INFO - Performing Tavily search for query: 'user allergies'
2025-04-24 21:15:52,259 - components.action_handler - INFO - Calling Tavily search API with query: 'user allergies'
2025-04-24 21:15:54,200 - components.action_handler - INFO - Tavily search response: {'query': 'user allergies', 'follow_up_questions': None, 'answer': 'Allergies occur when the immune system overreacts to harmless substances. Symptoms range from mild irritation to severe reactions li...
2025-04-24 21:15:54,200 - components.action_handler - INFO - Formatted search results (first 200 chars): Search results for: user allergies

Summary: Allergies occur when the immune system overreacts to harmless substances. Symptoms range from mild irritation to severe reactions like anaphylaxis. Treatme...
2025-04-24 21:15:54,201 - ActionHandler_User5 - INFO - perform_search function call completed successfully
2025-04-24 21:15:54,201 - ActionHandler_User5 - INFO - SEARCH RESULTS TYPE: <class 'str'>
2025-04-24 21:15:54,201 - ActionHandler_User5 - INFO - SEARCH RESULTS LENGTH: 2000
2025-04-24 21:15:54,201 - ActionHandler_User5 - INFO - Received valid web search results (first 100 chars): Search results for: user allergies

Summary: Allergies occur when the immune system overreacts to ha...
2025-04-24 21:15:54,201 - ActionHandler_User5 - INFO - Updating system message sys_c95d2df9-bda1-4062-8bba-1b08a9d52668 for search ID search-1745529352-75e46832
2025-04-24 21:15:54,202 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:54,203 - api.endpoints.system_messages - INFO - Updated system message sys_c95d2df9-bda1-4062-8bba-1b08a9d52668 in database
2025-04-24 21:15:54,204 - ActionHandler_User5 - INFO - Successfully updated system message sys_c95d2df9-bda1-4062-8bba-1b08a9d52668
2025-04-24 21:15:54,205 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:54,207 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_997513d7-a8f7-4a31-b929-128c0f32c9c4', 'timestamp': '2025-04-24T21:15:54.205810', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'web_search', 'content': '{"status": "complete", "message": "Search results for: user allergies\\n\\nSummary: Allergies occur when the immune system overreacts to harmless sub ... (1836 characters truncated) ...  mild, moderate, and severe categories of allergy symptoms. This article will look at mild, mod...\\n\\n", "timestamp": "2025-04-24T21:15:54.204214"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:55,219 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:55,225 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:55,231 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_881efdc0-5d6f-48ce-a92b-d9c107383d13', 'timestamp': '2025-04-24T21:15:55.226173', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:55.220234"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:55,234 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:55,235 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:55,236 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:55,236 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'Can you tell me what my hidden talent is?'
2025-04-24 21:15:55,237 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:55,237 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:55,237 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:55,240 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:55,241 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:15:57,905 - CtxMemMgr_User5 - INFO - Stored turn 70f7bb6e-846c-4511-be9c-86f9bfe8f1e7 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:57,906 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:57,906 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:57,907 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3708 / 30000
2025-04-24 21:15:57,908 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:57,923 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:57,924 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:15:57,925 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:15:57,925 - CtxMemMgr_User5 - INFO - Stored turn 42f335f9-aa10-46c2-8762-be119f5d7a58 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:57,925 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:15:57,925 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:15:57,926 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3718 / 30000
2025-04-24 21:15:57,926 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:15:57,933 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:15:57,933 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:15:57,933 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:15:58,963 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:58,974 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:15:58,982 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_f61cc67d-3672-4c08-a65a-7c961fe6e7cb', 'timestamp': '2025-04-24T21:15:58.976402', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:15:58.965329"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:15:58,989 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:58,990 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:15:58,992 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:15:58,992 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'I previously mentioned my role model, what was it?'
2025-04-24 21:15:58,993 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:15:58,993 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:15:58,994 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:15:58,995 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:15:58,996 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:16:01,352 - CtxMemMgr_User5 - INFO - Stored turn ebd9d128-7ff1-4cd7-b759-1d220d5201b1 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:16:01,352 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:16:01,353 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:16:01,354 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3730 / 30000
2025-04-24 21:16:01,354 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:16:01,372 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:16:01,372 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:16:01,372 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:16:01,372 - CtxMemMgr_User5 - INFO - Stored turn c58c55ee-33db-4900-bbe2-3936dfdfed0e for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:16:01,372 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:16:01,373 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:16:01,373 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3742 / 30000
2025-04-24 21:16:01,373 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:16:01,382 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:16:01,382 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:16:01,382 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:16:00Z",
    "speaker": "User...
2025-04-24 21:16:02,402 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:16:02,408 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:16:02,414 - api.endpoints.system_messages - ERROR - Database error storing system message: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`rai_chat`.`system_messages`, CONSTRAINT `system_messages_ibfk_1` FOREIGN KEY (`session_id`) REFERENCES `sessions` (`session_id`))')
[SQL: INSERT INTO system_messages 
                          (id, timestamp, session_id, message_type, content) 
                          VALUES (%(id)s, %(timestamp)s, %(session_id)s, %(message_type)s, %(content)s)]
[parameters: {'id': 'sys_15847e06-9f4c-421b-8a62-669ad5481016', 'timestamp': '2025-04-24T21:16:02.408938', 'session_id': '75e46832-e724-40b9-bd75-053a6987191b', 'message_type': 'status_update', 'content': '{"status": "processing", "message": "Processing your message...", "timestamp": "2025-04-24T21:16:02.403675"}'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-24 21:16:02,418 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:16:02,419 - ConvMgr_User5 - INFO - Loaded remembered facts from database for user 5
2025-04-24 21:16:02,420 - ConvMgr_User5 - INFO - Pattern match extracted: User's project uses What for the favorite.
2025-04-24 21:16:02,420 - ConvMgr_User5 - INFO - Added 1 new facts to contextual memory
2025-04-24 21:16:02,422 - CtxMemMgr_User5 - ERROR - User 5 not found in DB. Cannot save facts.
2025-04-24 21:16:02,423 - ConvMgr_User5 - INFO - Saved 1 new facts to database
2025-04-24 21:16:02,423 - components.prompt_builder - INFO - Constructing prompt for session 75e46832-e724-40b9-bd75-053a6987191b, user 5, depth 0
2025-04-24 21:16:02,423 - EpisodicMemMgr_User5 - INFO - Searching all episodic summaries for user 5, query: 'What is my favorite musician?'
2025-04-24 21:16:02,424 - EpisodicMemMgr_User5 - INFO - No relevant summaries found across all sessions for user 5.
2025-04-24 21:16:02,424 - components.prompt_builder - INFO - No current context summary (Tier 2) found.
2025-04-24 21:16:02,424 - components.prompt_builder - INFO - No episodic summaries found.
2025-04-24 21:16:02,426 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:16:02,427 - CtxMemMgr_User5 - INFO - Reloaded 0 facts from database for prompt generation
2025-04-24 21:16:04,666 - CtxMemMgr_User5 - INFO - Stored turn 7c24e795-126d-4755-bf1a-1dc53e91a7a4 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:16:04,666 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:16:04,667 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:16:04,667 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3749 / 30000
2025-04-24 21:16:04,668 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:16:04,687 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:16:04,687 - ActionHandler_User5 - INFO - Processing LLM response for session 75e46832-e724-40b9-bd75-053a6987191b, user 5
2025-04-24 21:16:04,688 - ActionHandler_User5 - INFO - No signals detected. Processing as normal answer (Session: 75e46832-e724-40b9-bd75-053a6987191b).
2025-04-24 21:16:04,688 - CtxMemMgr_User5 - INFO - Stored turn 29a1cc3a-411f-4843-bdd0-b04d9b9fd802 for active session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:16:04,688 - CtxMemMgr_User5 - INFO - Updated current_context_summary for session 75e46832-e724-40b9-bd75-053a6987191b: '...'
2025-04-24 21:16:04,688 - CtxMemMgr_User5 - WARNING - Skipping memory extraction (no LLM API or T3 response).
2025-04-24 21:16:04,689 - CtxMemMgr_User5 - INFO - Session 75e46832-e724-40b9-bd75-053a6987191b: Active history token count ~3756 / 30000
2025-04-24 21:16:04,689 - CtxMemMgr_User5 - INFO - Saving active session context for 75e46832-e724-40b9-bd75-053a6987191b to /app/data/sessions/5/75e46832-e724-40b9-bd75-053a6987191b/context.json
2025-04-24 21:16:04,694 - CtxMemMgr_User5 - INFO - Successfully saved context for session 75e46832-e724-40b9-bd75-053a6987191b
2025-04-24 21:16:04,694 - ActionHandler_User5 - WARNING - Error processing tier3 content: local variable 'json' referenced before assignment
2025-04-24 21:16:04,695 - ActionHandler_User5 - INFO - Final chat response sent (first 100 chars): ```json
{
  "user_message_analysis": {
    "timestamp": "2024-10-27T21:17:00Z",
    "speaker": "User...
2025-04-24 21:45:38,331 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-24 21:45:38,331 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-24 21:45:38,331 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-24 21:45:38,365 - core.database.connection - INFO - Database connection successful!
2025-04-24 21:45:38,365 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-24 21:45:38,392 - core.database.connection - INFO - Database tables created or already exist.
2025-04-24 21:45:38,398 - core.database.connection - INFO - Default user already exists.
2025-04-24 21:45:38,413 - app - INFO - Auth blueprint registered successfully
2025-04-24 21:45:38,427 - components.action_handler - INFO - Current directory: /app/components
2025-04-24 21:45:38,427 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-24 21:45:38,427 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-24 21:45:38,428 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-24 21:45:38,428 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-24 21:45:38,428 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-24 21:45:38,428 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-24 21:45:38,428 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-24 21:45:38,436 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-24 21:45:38,437 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-24 21:45:38,437 - components.action_handler - INFO - Web search functionality is available
2025-04-24 21:45:38,437 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-24 21:45:38,437 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-24 21:45:38,438 - app - INFO - Chat blueprint registered successfully
2025-04-24 21:45:38,439 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-24 21:45:38,441 - app - INFO - Session blueprint registered successfully
2025-04-24 21:45:38,442 - app - INFO - Memory blueprint registered successfully
2025-04-24 21:45:38,444 - app - INFO - System Messages blueprint registered successfully
2025-04-24 21:45:38,445 - app - INFO - Test Search blueprint registered successfully
2025-04-24 21:45:38,445 - app - INFO - Basic endpoints registered successfully
2025-04-24 21:45:38,449 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-24 21:55:32,427 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,428 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-24 21:55:32,428 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-24 21:55:32,429 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-24 21:55:32,429 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,430 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 21:55:32,431 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,431 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,431 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,436 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,438 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,441 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,445 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,446 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,446 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,447 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,447 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,449 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,450 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,451 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,456 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,456 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,457 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,457 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,457 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,459 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,460 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,461 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,466 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,466 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,467 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,467 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,468 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,470 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,472 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,473 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,476 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,476 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,477 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,477 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,477 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,480 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,480 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,481 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,484 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,484 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,485 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,485 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,485 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,486 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,486 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,487 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,490 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,490 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,490 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,490 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,490 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,491 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,491 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,492 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,495 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,495 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,496 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,496 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,496 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,497 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,498 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,498 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,501 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,502 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,502 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,502 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,502 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,503 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,503 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,504 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,507 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,507 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,507 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,507 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,507 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,508 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,508 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,509 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,512 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,512 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,513 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,513 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,513 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,516 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,516 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,517 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,520 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,520 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,520 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,520 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,520 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,521 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,522 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,522 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,525 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,525 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,525 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,525 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,525 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,526 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,526 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,527 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,530 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,530 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,530 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,531 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,531 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,532 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,532 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,533 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,535 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,536 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,536 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,536 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,536 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,537 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,537 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,538 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,541 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,541 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,541 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,541 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,541 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,543 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,543 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,543 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,547 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,547 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,547 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,548 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,548 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,552 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,552 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,553 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,555 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,556 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,556 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,556 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,556 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,557 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,558 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,558 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,561 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,562 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,562 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,562 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,562 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,563 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,564 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,564 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,567 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,567 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,568 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,568 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,568 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,569 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,569 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,570 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,573 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,573 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,574 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,574 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,574 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,575 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,575 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,576 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,579 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,579 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,580 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,580 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,580 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,581 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,581 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,582 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,585 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,585 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,586 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,586 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,586 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,587 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,588 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,590 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,595 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,595 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,596 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,596 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,596 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,597 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,597 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,598 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,603 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,603 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,604 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,604 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,604 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,605 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,606 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,606 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,610 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,610 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,610 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,610 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,610 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,611 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,612 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,612 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,616 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,616 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,616 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,617 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,617 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,618 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,618 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,619 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,622 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,622 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,622 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,622 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,622 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,623 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,624 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,624 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,628 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,628 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,628 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,628 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,628 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,629 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,630 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,630 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,633 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,634 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,634 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,634 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,634 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,635 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,635 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,636 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,639 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,639 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,639 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,639 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,639 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,640 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,641 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,641 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,644 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,644 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,645 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,645 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,645 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,646 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,646 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,647 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,650 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,650 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,650 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,650 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,650 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,651 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,651 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,652 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,655 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,655 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,655 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,656 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,656 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,656 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,657 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,657 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,660 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,660 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,661 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,661 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,661 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,662 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,662 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,662 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,665 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,665 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,666 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,666 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,666 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,666 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,667 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,667 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,670 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,670 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,671 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,671 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,671 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,672 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,672 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,672 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,675 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,675 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,676 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,676 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,676 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,677 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,677 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,677 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,680 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,680 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,681 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,681 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,681 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,682 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,682 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,682 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,685 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,685 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,685 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,685 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,685 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,686 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,687 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,687 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,690 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,690 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,691 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,691 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,691 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,694 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,694 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,695 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,697 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,697 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,698 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,698 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,698 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,699 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,699 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,700 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,703 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,703 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,703 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,703 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,703 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,704 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,705 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,705 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,708 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,708 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,708 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,708 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,708 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,709 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,709 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,710 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,713 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,713 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,713 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,713 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,713 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,714 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,715 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,715 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,718 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,718 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,718 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,718 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,718 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,719 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,719 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,720 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,723 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,723 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,724 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,724 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,724 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,725 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,726 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,726 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,729 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,730 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,730 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,730 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,730 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,731 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,731 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,732 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,735 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,735 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,735 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,736 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,736 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,736 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,737 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,737 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:55:32,740 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:55:32,740 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ce503f7d-be30-4471-af24-43d61d42bceb
2025-04-24 21:55:32,740 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:55:32,740 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:55:32,741 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:55:32,741 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:55:32,742 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:55:32,742 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:58:41,345 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-24 21:58:41,345 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-24 21:58:41,345 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-24 21:58:41,379 - core.database.connection - INFO - Database connection successful!
2025-04-24 21:58:41,379 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-24 21:58:41,384 - core.database.connection - INFO - Database tables created or already exist.
2025-04-24 21:58:41,393 - core.database.connection - INFO - Default user already exists.
2025-04-24 21:58:41,411 - app - INFO - Auth blueprint registered successfully
2025-04-24 21:58:41,423 - components.action_handler - INFO - Current directory: /app/components
2025-04-24 21:58:41,423 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-24 21:58:41,423 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-24 21:58:41,423 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-24 21:58:41,423 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-24 21:58:41,424 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-24 21:58:41,424 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-24 21:58:41,424 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-24 21:58:41,431 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-24 21:58:41,431 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-24 21:58:41,431 - components.action_handler - INFO - Web search functionality is available
2025-04-24 21:58:41,431 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-24 21:58:41,431 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-24 21:58:41,432 - app - INFO - Chat blueprint registered successfully
2025-04-24 21:58:41,433 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-24 21:58:41,434 - app - INFO - Session blueprint registered successfully
2025-04-24 21:58:41,435 - app - INFO - Memory blueprint registered successfully
2025-04-24 21:58:41,436 - app - INFO - System Messages blueprint registered successfully
2025-04-24 21:58:41,437 - app - INFO - Test Search blueprint registered successfully
2025-04-24 21:58:41,438 - app - INFO - Basic endpoints registered successfully
2025-04-24 21:58:41,442 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-24 21:59:03,093 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,094 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-24 21:59:03,094 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-24 21:59:03,094 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-24 21:59:03,094 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,095 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 21:59:03,096 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,096 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,096 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,099 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,099 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,100 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,104 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,104 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,104 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,104 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,104 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,106 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,106 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,106 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,110 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,110 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,110 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,110 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,111 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,112 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,112 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,113 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,116 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,116 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,116 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,116 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,117 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,117 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,118 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,118 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,121 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,121 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,121 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,122 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,122 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,122 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,123 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,123 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,126 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,126 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,126 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,127 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,127 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,127 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,128 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,128 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,131 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,132 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,132 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,132 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,132 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,133 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,133 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,134 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,137 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,137 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,137 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,137 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,137 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,138 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,139 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,139 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,142 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,142 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,142 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,142 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,142 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,143 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,143 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,144 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,146 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,146 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,146 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,146 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,146 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,147 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,148 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,148 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,151 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,151 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,151 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,151 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,151 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,152 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,153 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,153 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,156 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,156 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,156 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,156 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,156 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,157 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,157 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,158 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,160 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,161 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,161 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,161 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,161 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,162 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,163 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,163 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,165 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,165 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,166 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,166 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,166 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,167 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,167 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,167 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,171 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,172 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,172 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,172 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,173 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,175 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,176 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,176 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,179 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,179 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,179 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,179 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,179 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,180 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,181 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,181 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,184 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,184 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,184 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,184 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,185 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,185 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,186 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,186 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,189 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,189 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,189 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,189 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,189 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,190 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,190 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,191 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,193 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,193 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,194 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,194 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,194 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,195 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,195 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,196 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,198 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,198 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,198 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,198 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,199 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,199 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,200 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,200 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,203 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,203 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,203 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,203 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,204 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,204 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,205 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,205 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,209 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,209 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,210 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,210 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,210 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,212 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,213 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,215 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,218 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,218 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,218 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,218 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,218 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,219 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,219 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,220 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,223 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,223 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,223 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,223 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,223 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,224 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,224 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,225 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,227 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,228 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,228 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,228 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,228 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,229 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,229 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,229 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,233 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,233 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,233 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,234 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,234 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,234 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,235 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,235 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,238 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,238 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,239 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,239 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,239 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,239 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,240 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,240 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,243 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,243 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,244 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,244 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,244 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,245 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,245 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,246 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,249 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,249 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,249 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,249 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,249 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,250 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,250 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,252 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,257 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,257 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,258 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,259 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,259 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,262 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,263 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,263 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,266 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,266 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,267 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,267 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,267 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,268 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,268 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,269 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,272 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,272 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,272 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,272 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,272 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,273 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,273 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,274 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,277 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,277 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,277 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,277 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,277 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,278 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,278 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,279 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,282 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,282 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,282 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,282 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,282 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,283 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,283 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,284 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,287 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,287 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,287 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,287 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,288 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,288 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,289 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,289 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,292 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,292 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,293 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,293 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,293 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,294 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,294 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,295 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,300 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,300 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,301 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,301 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,301 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,304 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,305 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,306 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,309 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,309 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,309 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,309 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,309 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,310 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,311 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,311 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,315 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,315 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,315 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,315 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,315 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,316 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,316 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,317 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,320 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,320 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,320 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,320 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,320 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,321 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,322 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,322 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,325 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,325 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,325 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,326 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,326 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,327 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,327 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,327 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,330 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,330 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,331 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,331 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,331 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,332 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,332 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,332 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,335 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,335 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,336 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,336 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,336 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,337 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,337 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,337 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,340 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,340 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,341 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,341 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,341 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,343 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,344 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,345 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,348 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,348 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,348 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,348 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,349 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,350 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,350 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,350 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,353 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,354 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,354 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,354 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,354 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,355 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,355 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,356 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,358 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,358 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,359 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,359 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,359 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,360 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,360 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,360 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,364 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,364 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,364 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,364 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,364 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,365 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,365 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,366 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,368 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,368 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,369 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,369 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,369 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,370 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,370 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,370 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 21:59:03,373 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 21:59:03,374 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 747858f4-1b53-45f7-bf85-e2211c0f4095
2025-04-24 21:59:03,374 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 21:59:03,374 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 21:59:03,374 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 21:59:03,375 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 21:59:03,375 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 21:59:03,375 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:13:54,280 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-24 22:13:54,281 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-24 22:13:54,281 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-24 22:13:54,312 - core.database.connection - INFO - Database connection successful!
2025-04-24 22:13:54,312 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-24 22:13:54,317 - core.database.connection - INFO - Database tables created or already exist.
2025-04-24 22:13:54,324 - core.database.connection - INFO - Default user already exists.
2025-04-24 22:13:54,341 - app - INFO - Auth blueprint registered successfully
2025-04-24 22:13:54,355 - components.action_handler - INFO - Current directory: /app/components
2025-04-24 22:13:54,355 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-24 22:13:54,356 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-24 22:13:54,356 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-24 22:13:54,357 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-24 22:13:54,357 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-24 22:13:54,357 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-24 22:13:54,357 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-24 22:13:54,364 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-24 22:13:54,364 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-24 22:13:54,364 - components.action_handler - INFO - Web search functionality is available
2025-04-24 22:13:54,365 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-24 22:13:54,365 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-24 22:13:54,365 - app - INFO - Chat blueprint registered successfully
2025-04-24 22:13:54,366 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-24 22:13:54,368 - app - INFO - Session blueprint registered successfully
2025-04-24 22:13:54,368 - app - INFO - Memory blueprint registered successfully
2025-04-24 22:13:54,370 - app - INFO - System Messages blueprint registered successfully
2025-04-24 22:13:54,371 - app - INFO - Test Search blueprint registered successfully
2025-04-24 22:13:54,372 - app - INFO - Basic endpoints registered successfully
2025-04-24 22:13:54,375 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-24 22:14:56,042 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,043 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-24 22:14:56,044 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-24 22:14:56,044 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-24 22:14:56,044 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,046 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 22:14:56,047 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,047 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,047 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,053 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,056 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,059 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,064 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,064 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,065 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,065 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,065 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,067 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,068 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,069 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,074 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,074 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,075 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,075 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,075 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,077 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,078 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,079 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,083 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,083 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,084 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,084 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,084 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,086 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,088 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,089 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,092 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,093 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,093 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,094 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,094 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,096 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,097 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,098 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,101 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,101 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,101 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,102 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,102 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,105 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,106 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,106 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,109 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,109 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,110 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,110 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,110 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,111 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,111 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,111 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,115 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,115 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,115 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,116 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,116 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,116 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,117 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,117 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,120 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,120 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,121 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,121 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,121 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,122 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,122 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,123 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,126 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,126 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,126 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,126 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,126 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,127 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,128 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,128 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,131 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,131 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,131 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,131 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,132 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,132 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,133 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,133 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,136 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,137 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,137 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,137 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,137 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,138 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,138 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,139 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,141 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,142 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,143 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,143 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,144 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,145 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,146 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,146 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,149 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,149 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,149 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,149 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,149 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,150 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,151 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,151 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,154 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,154 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,154 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,154 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,154 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,155 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,155 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,156 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,158 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,159 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,159 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,159 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,159 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,160 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,160 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,161 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,163 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,163 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,163 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,164 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,164 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,164 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,165 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,165 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,168 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,168 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,169 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,169 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,169 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,170 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,170 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,170 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,173 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,173 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,174 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,174 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,174 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,175 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,175 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,176 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,178 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,179 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,179 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,179 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,179 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,180 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,180 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,181 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,183 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,183 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,184 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,184 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,184 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,185 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,185 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,187 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,191 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,192 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,192 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,192 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,193 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,195 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,195 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,197 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,199 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,199 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,200 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,200 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,200 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,201 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,201 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,201 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,204 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,204 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,205 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,205 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,205 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,205 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,206 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,206 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,209 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,209 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,209 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,209 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,210 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,210 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,211 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,211 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,214 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,214 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,214 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,214 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,214 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,215 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,215 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,216 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,218 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,218 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,218 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,218 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,219 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,219 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,220 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,220 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,223 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,223 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,223 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,223 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,223 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,224 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,225 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,226 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,230 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,230 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,231 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,231 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,231 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,233 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,234 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,235 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,238 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,238 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,238 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,239 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,239 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,239 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,240 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,240 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,243 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,243 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,243 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,243 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,243 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,244 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,244 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,245 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,247 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,247 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,248 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,248 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,248 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,249 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,249 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,250 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,252 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,253 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,253 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,253 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,253 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,254 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,254 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,255 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,257 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,257 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,258 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,258 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,258 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,259 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,259 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,260 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,262 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,262 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,263 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,263 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,263 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,264 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,264 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,264 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,267 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,268 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,268 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,269 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,269 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,271 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,272 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,272 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,275 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,276 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,276 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,276 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,276 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,277 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,277 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,278 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,280 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,281 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,281 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,281 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,281 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,282 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,282 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,283 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,286 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,286 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,286 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,287 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,287 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,287 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,288 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,288 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,291 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,291 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,291 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,291 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,291 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,292 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,293 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,293 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,296 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,296 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,297 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,297 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,297 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,298 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,298 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,299 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,301 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,302 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,302 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,302 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,302 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,303 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,304 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,304 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,308 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,309 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,309 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,310 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,310 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,311 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,312 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,312 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,315 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,315 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,315 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,316 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,316 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,316 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,317 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,317 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,320 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,320 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,321 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,321 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,321 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,322 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,322 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,322 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,325 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,326 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,326 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,326 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,326 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,327 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,327 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,328 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,331 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,331 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,331 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,331 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,331 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,332 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,332 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,333 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,336 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,336 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,336 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,336 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,336 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,337 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,337 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,338 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,341 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,341 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,341 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,341 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,341 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,343 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,344 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,346 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:14:56,349 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:14:56,349 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 74541116-a27c-4de0-bf46-8a75fcb31587
2025-04-24 22:14:56,349 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:14:56,349 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:14:56,349 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:14:56,350 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:14:56,350 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:14:56,351 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:42:41,263 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-24 22:42:41,263 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-24 22:42:41,263 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-24 22:42:41,299 - core.database.connection - INFO - Database connection successful!
2025-04-24 22:42:41,300 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-24 22:42:41,306 - core.database.connection - INFO - Database tables created or already exist.
2025-04-24 22:42:41,314 - core.database.connection - INFO - Default user already exists.
2025-04-24 22:42:41,331 - app - INFO - Auth blueprint registered successfully
2025-04-24 22:42:41,341 - components.action_handler - INFO - Current directory: /app/components
2025-04-24 22:42:41,341 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-24 22:42:41,341 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-24 22:42:41,341 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-24 22:42:41,341 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-24 22:42:41,342 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-24 22:42:41,342 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-24 22:42:41,342 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-24 22:42:41,349 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-24 22:42:41,349 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-24 22:42:41,349 - components.action_handler - INFO - Web search functionality is available
2025-04-24 22:42:41,350 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-24 22:42:41,350 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-24 22:42:41,350 - app - INFO - Chat blueprint registered successfully
2025-04-24 22:42:41,352 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-24 22:42:41,353 - app - INFO - Session blueprint registered successfully
2025-04-24 22:42:41,354 - app - INFO - Memory blueprint registered successfully
2025-04-24 22:42:41,356 - app - INFO - System Messages blueprint registered successfully
2025-04-24 22:42:41,356 - app - INFO - Test Search blueprint registered successfully
2025-04-24 22:42:41,357 - app - INFO - Basic endpoints registered successfully
2025-04-24 22:42:41,361 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-24 22:56:20,358 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,359 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-24 22:56:20,360 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-24 22:56:20,360 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-24 22:56:20,361 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,361 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 22:56:20,362 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,362 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,362 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,367 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,368 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,374 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,378 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,378 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,379 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,379 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,379 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,382 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,383 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,384 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,388 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,389 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,389 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,390 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,390 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,392 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,392 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,393 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,398 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,399 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,399 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,399 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,400 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,402 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,402 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,404 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,407 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,407 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,408 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,408 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,408 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,409 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,409 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,410 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,413 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,413 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,413 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,413 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,413 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,414 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,415 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,415 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,418 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,419 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,419 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,419 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,419 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,420 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,420 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,421 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,426 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,426 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,426 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,426 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,427 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,428 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,428 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,429 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,433 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,433 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,434 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,434 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,434 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,436 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,437 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,439 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,442 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,443 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,443 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,443 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,443 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,444 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,445 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,445 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,449 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,449 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,449 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,450 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,450 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,451 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,451 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,451 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,455 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,455 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,455 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,455 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,456 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,457 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,457 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,458 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,461 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,461 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,461 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,462 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,462 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,462 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,463 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,463 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,466 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,466 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,467 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,467 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,467 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,468 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,468 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,469 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,473 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,473 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,474 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,474 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,474 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,476 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,477 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,478 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,481 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,481 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,482 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,482 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,482 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,483 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,483 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,484 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,486 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,487 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,487 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,487 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,487 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,488 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,488 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,489 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,492 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,492 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,492 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,492 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,492 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,493 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,493 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,494 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,497 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,497 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,497 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,497 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,497 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,498 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,498 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,499 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,502 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,502 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,502 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,502 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,502 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,503 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,503 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,504 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,507 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,507 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,507 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,507 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,508 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,509 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,509 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,509 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,512 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,513 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,513 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,513 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,513 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,514 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,516 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,517 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,520 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,520 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,520 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,520 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,521 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,521 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,522 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,522 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,525 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,525 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,526 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,526 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,526 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,526 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,527 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,527 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,530 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,530 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,530 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,530 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,530 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,531 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,531 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,532 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,535 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,535 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,535 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,535 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,535 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,536 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,537 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,537 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,541 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,541 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,541 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,541 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,541 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,542 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,543 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,543 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,546 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,546 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,546 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,546 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,547 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,547 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,548 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,548 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,551 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,551 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,551 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,551 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,552 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,552 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,553 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,554 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,558 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,558 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,559 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,559 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,559 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,562 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,563 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,564 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,567 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,567 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,567 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,567 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,567 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,568 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,568 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,569 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,572 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,572 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,572 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,572 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,572 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,573 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,573 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,574 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,577 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,577 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,577 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,577 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,577 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,578 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,578 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,579 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,581 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,582 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,582 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,582 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,582 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,583 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,583 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,584 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,586 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,586 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,587 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,587 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,587 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,587 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,588 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,588 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,591 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,591 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,591 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,591 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,591 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,592 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,592 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,593 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,595 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,595 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,596 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,596 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,596 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,597 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,598 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,600 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,602 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,602 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,603 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,603 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,603 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,604 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,604 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,604 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,607 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,607 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,607 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,607 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,607 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,608 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,608 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,609 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,611 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,611 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,612 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,612 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,612 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,612 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,613 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,613 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,616 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,616 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,616 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,616 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,616 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,617 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,617 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,618 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,620 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,620 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,621 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,621 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,621 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,622 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,622 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,622 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,625 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,625 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,626 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,626 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,626 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,626 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,627 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,627 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,630 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,630 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,630 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,630 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,631 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,631 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,632 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,632 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,635 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,635 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,636 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,636 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,636 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,639 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,639 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,640 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,643 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,643 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,643 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,643 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,643 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,644 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,644 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,645 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,648 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,648 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,648 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,648 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,648 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,649 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,650 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,650 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,653 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,653 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,653 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,653 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,653 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,654 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,655 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,655 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,658 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,658 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,659 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,659 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,659 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,660 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,660 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,661 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:56:20,664 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 22:56:20,664 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: ef25b00f-49f8-46e4-aa98-8e60c985ed06
2025-04-24 22:56:20,664 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 22:56:20,664 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 22:56:20,664 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 22:56:20,665 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 22:56:20,666 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 22:56:20,666 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
2025-04-24 22:59:22,015 - core.database.connection - INFO - Using MySQL database at: mysql:3306/rai_chat
2025-04-24 22:59:22,015 - core.database.connection - INFO - Using MySQL database URL: mysql+pymysql://rai_user:rai_password@mysql:3306/rai_chat
2025-04-24 22:59:22,015 - core.database.connection - INFO - Attempting to connect to database (attempt 1/5)
2025-04-24 22:59:22,041 - core.database.connection - INFO - Database connection successful!
2025-04-24 22:59:22,042 - core.database.connection - INFO - Creating database tables if they don't exist...
2025-04-24 22:59:22,046 - core.database.connection - INFO - Database tables created or already exist.
2025-04-24 22:59:22,054 - core.database.connection - INFO - Default user already exists.
2025-04-24 22:59:22,071 - app - INFO - Auth blueprint registered successfully
2025-04-24 22:59:22,085 - components.action_handler - INFO - Current directory: /app/components
2025-04-24 22:59:22,086 - components.action_handler - INFO - Checking for .env at: /app/components/../../Backend/.env
2025-04-24 22:59:22,086 - components.action_handler - INFO - Checking for .env at: /app/components/../../backend/.env
2025-04-24 22:59:22,086 - components.action_handler - INFO - Checking for .env at: /app/components/../../../.env
2025-04-24 22:59:22,086 - components.action_handler - INFO - Checking for .env at: /.env
2025-04-24 22:59:22,086 - components.action_handler - WARNING - Could not find .env file in any of the checked directories.
2025-04-24 22:59:22,087 - components.action_handler - INFO - TAVILY_API_KEY loaded: YES (length: 41)
2025-04-24 22:59:22,087 - components.action_handler - INFO - Checked for .env file in multiple locations
2025-04-24 22:59:22,094 - components.action_handler - INFO - Initializing Tavily client with API key: tvly...VPLb
2025-04-24 22:59:22,094 - components.action_handler - INFO - Tavily client initialized successfully
2025-04-24 22:59:22,094 - components.action_handler - INFO - Web search functionality is available
2025-04-24 22:59:22,095 - managers.conversation_manager - INFO - LLM Engine path: /app/llm_client
2025-04-24 22:59:22,095 - managers.conversation_manager - INFO - Successfully initialized Docker LLM API client
2025-04-24 22:59:22,095 - app - INFO - Chat blueprint registered successfully
2025-04-24 22:59:22,096 - root - INFO - MySQL connection: rai_user@mysql:3306/rai_chat
2025-04-24 22:59:22,097 - app - INFO - Session blueprint registered successfully
2025-04-24 22:59:22,098 - app - INFO - Memory blueprint registered successfully
2025-04-24 22:59:22,100 - app - INFO - System Messages blueprint registered successfully
2025-04-24 22:59:22,100 - app - INFO - Test Search blueprint registered successfully
2025-04-24 22:59:22,101 - app - INFO - Basic endpoints registered successfully
2025-04-24 22:59:22,105 - waitress - INFO - Serving on http://0.0.0.0:6102
2025-04-24 23:58:16,760 - core.auth.utils - INFO - DEV_AUTO_AUTH enabled - auto-authenticating as user testuser5 (ID: 5)
2025-04-24 23:58:16,761 - managers.session - INFO - Creating new UserSessionManager instance
2025-04-24 23:58:16,762 - managers.chat_file_manager - INFO - ChatFileManager initialized. Base data path: /app/data
2025-04-24 23:58:16,763 - managers.user_session_manager - INFO - UserSessionManager initialized with base path: /app/data
2025-04-24 23:58:16,763 - managers.user_session_manager - INFO - Creating new conversation manager for user: 5, session: 3542891d-de7c-43be-ae17-a696a1e7d0d7
2025-04-24 23:58:16,764 - api.llm_engine.llm_api_interface - INFO - Initializing LLM API client with URL: http://rai-llm-engine:6101
2025-04-24 23:58:16,764 - EpisodicMemMgr_User5 - INFO - Summary index file not found for user 5. Initialized empty index.
2025-04-24 23:58:16,764 - EpisodicMemMgr_User5 - INFO - EpisodicMemoryManager initialized for user 5. Episodic path: /app/data/5/episodic
2025-04-24 23:58:16,765 - CtxMemMgr_User5 - INFO - Successfully initialized LLM API client for memory extraction
2025-04-24 23:58:16,770 - CtxMemMgr_User5 - ERROR - User 5 not found in DB during fact loading.
2025-04-24 23:58:16,771 - CtxMemMgr_User5 - INFO - ContextualMemoryManager initialized for user 5.
2025-04-24 23:58:16,774 - api.endpoints.chat - ERROR - Error processing chat request: No module named 'backend'
